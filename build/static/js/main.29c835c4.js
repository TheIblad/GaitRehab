/*! For license information please see main.29c835c4.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var i=n(43),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,s={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,i)&&!l.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===s[i]&&(s[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,g(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,_=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,i){var r,s={},a=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,r)&&!S.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:k.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,r,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return a=a(l=e),e=""===s?"."+N(l,0):s,x(a)?(r="",null!=e&&(r=e.replace(C,"$&/")+"/"),I(a,t,r,"",(function(e){return e}))):null!=a&&(T(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",x(e))for(var c=0;c<e.length;c++){var u=s+N(o=e[c],c);l+=I(o,t,r,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=I(o=o.value,t,r,u=s+N(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function D(e,t,n){if(null==e)return e;var i=[],r=0;return I(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},P={transition:null},R={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:P,ReactCurrentOwner:k};function j(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:D,forEach:function(e,t,n){D(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return D(e,(function(){t++})),t},toArray:function(e){return D(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=a,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=j,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=g({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!S.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:r,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=j,t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,n){return M.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,n){return M.current.useReducer(e,t,n)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<s(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,a=r>>>1;i<a;){var o=2*(i+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<r&&0>s(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[o]=n,i=o);else{if(!(c<r&&0>s(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function x(e){if(m=!1,w(e),!g)if(null!==i(c))g=!0,P(_);else{var t=i(u);null!==t&&R(x,t.startTime-e)}}function _(e,n){g=!1,m&&(m=!1,y(T),T=-1),p=!0;var s=f;try{for(w(n),d=i(c);null!==d&&(!(d.expirationTime>n)||e&&!I());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var o=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?d.callback=o:d===i(c)&&r(c),w(n)}else r(c);d=i(c)}if(null!==d)var l=!0;else{var h=i(u);null!==h&&R(x,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,E=null,T=-1,C=5,N=-1;function I(){return!(t.unstable_now()-N<C)}function D(){if(null!==E){var e=t.unstable_now();N=e;var n=!0;try{n=E(!0,e)}finally{n?k():(S=!1,E=null)}}else S=!1}if("function"===typeof b)k=function(){b(D)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,M=A.port2;A.port1.onmessage=D,k=function(){M.postMessage(null)}}else k=function(){v(D,0)};function P(e){E=e,S||(S=!0,k())}function R(e,n){T=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,P(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,r,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:r,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===i(c)&&e===i(u)&&(m?(y(T),T=-1):m=!0,R(x,s-a))):(e.sortIndex=o,n(c,e),g||p||(g=!0,P(_))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var i=n(950);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var i=n(43),r=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,i,r,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,i){var r=m.hasOwnProperty(t)?m[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),_=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),C=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var O,L=Object.assign;function F(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch($s){var i=$s}Reflect.construct(e,[],t)}else{try{t.call()}catch($s){i=$s}e.call(t.prototype)}else{try{throw Error()}catch($s){i=$s}e()}}catch($s){if($s&&i&&"string"===typeof $s.stack){for(var r=$s.stack.split("\n"),s=i.stack.split("\n"),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||r[a]!==s[o]){var l="\n"+r[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case _:return"Portal";case E:return"Profiler";case S:return"StrictMode";case I:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=H(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(au){return e.body}}function Y(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){X(e,t);var n=W(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),i=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=ge(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,ke=null,Se=null;function Ee(e){if(e=br(e)){if("function"!==typeof _e)throw Error(s(280));var t=e.stateNode;t&&(t=xr(t),_e(e.stateNode,e.type,t))}}function Te(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Ce(){if(ke){var e=ke,t=Se;if(Se=ke=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ne(e,t){return e(t)}function Ie(){}var De=!1;function Ae(e,t,n){if(De)return e(t,n);De=!0;try{return Ne(e,t,n)}finally{De=!1,(null!==ke||null!==Se)&&(Ie(),Ce())}}function Me(e,t){var n=e.stateNode;if(null===n)return null;var i=xr(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Pe=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ue){Pe=!1}function je(e,t,n,i,r,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Oe=!1,Le=null,Fe=!1,Ue=null,Ve={onError:function(e){Oe=!0,Le=e}};function ze(e,t,n,i,r,s,a,o,l){Oe=!1,Le=null,je.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(s(188))}function He(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return We(r),e;if(a===i)return We(r),t;a=a.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=a;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=a;break}if(l===i){o=!0,i=r,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,i=r;break}if(l===i){o=!0,i=a,n=r;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ke=r.unstable_scheduleCallback,Ge=r.unstable_cancelCallback,Ye=r.unstable_shouldYield,Qe=r.unstable_requestPaint,Xe=r.unstable_now,Je=r.unstable_getCurrentPriorityLevel,Ze=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~r;0!==o?i=ht(o):0!==(s&=a)&&(i=ht(s))}else 0!==(a=n&~r)?i=ht(a):0!==s&&(i=ht(s));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(s=t&-t)||16===r&&0!==(4194240&s)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-at(t)),i|=e[n],t&=~r;return i}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-at(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,_t,kt,St,Et,Tt=!1,Ct=[],Nt=null,It=null,Dt=null,At=new Map,Mt=new Map,Pt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jt(e,t){switch(e){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function Ot(e,t,n,i,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=br(t))&&_t(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Lt(e){var t=yr(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void Et(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=br(n))&&_t(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);we=i,n.target.dispatchEvent(i),we=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){Tt=!1,null!==Nt&&Ft(Nt)&&(Nt=null),null!==It&&Ft(It)&&(It=null),null!==Dt&&Ft(Dt)&&(Dt=null),At.forEach(Ut),Mt.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var i=Ct[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Nt&&zt(Nt,e),null!==It&&zt(It,e),null!==Dt&&zt(Dt,e),At.forEach(t),Mt.forEach(t),n=0;n<Pt.length;n++)(i=Pt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Pt.shift()}var $t=w.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,i){var r=bt,s=$t.transition;$t.transition=null;try{bt=1,Kt(e,t,n,i)}finally{bt=r,$t.transition=s}}function qt(e,t,n,i){var r=bt,s=$t.transition;$t.transition=null;try{bt=4,Kt(e,t,n,i)}finally{bt=r,$t.transition=s}}function Kt(e,t,n,i){if(Wt){var r=Yt(e,t,n,i);if(null===r)Wi(e,t,i,Gt,n),jt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Nt=Ot(Nt,e,t,n,i,r),!0;case"dragenter":return It=Ot(It,e,t,n,i,r),!0;case"mouseover":return Dt=Ot(Dt,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return At.set(s,Ot(At.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Mt.set(s,Ot(Mt.get(s)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(jt(e,i),4&t&&-1<Rt.indexOf(e)){for(;null!==r;){var s=br(r);if(null!==s&&xt(s),null===(s=Yt(e,t,n,i))&&Wi(e,t,i,Gt,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else Wi(e,t,i,null,n)}}var Gt=null;function Yt(e,t,n,i){if(Gt=null,null!==(e=yr(e=xe(i))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=$e(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,i=n.length,r="value"in Xt?Xt.value:Xt.textContent,s=r.length;for(e=0;e<i&&n[e]===r[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===r[s-t];t++);return Zt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,i,r,s){for(var a in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=L({},cn,{view:0,detail:0}),dn=sn(hn),fn=L({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(fn),gn=sn(L({},fn,{dataTransfer:0})),mn=sn(L({},hn,{relatedTarget:0})),vn=sn(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(yn),wn=sn(L({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function En(){return Sn}var Tn=L({},hn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(Tn),Nn=sn(L({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=sn(L({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Dn=sn(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=L({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=sn(An),Pn=[9,13,27,32],Rn=u&&"CompositionEvent"in window,jn=null;u&&"documentMode"in document&&(jn=document.documentMode);var On=u&&"TextEvent"in window&&!jn,Ln=u&&(!Rn||jn&&8<jn&&11>=jn),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$n[e.type]:"textarea"===t}function Hn(e,t,n,i){Te(i),0<(t=qi(t,"onChange")).length&&(n=new un("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var qn=null,Kn=null;function Gn(e){Fi(e,0)}function Yn(e){if(K(wr(e)))return e}function Qn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Zn="function"===typeof ei.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function ti(){qn&&(qn.detachEvent("onpropertychange",ni),Kn=qn=null)}function ni(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Hn(t,Kn,e,xe(e)),Ae(Gn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Kn=n,(qn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function si(e,t){if("click"===e)return Yn(t)}function ai(e,t){if("input"===e||"change"===e)return Yn(t)}var oi="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(oi(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!h.call(t,r)||!oi(e[r],t[r]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function hi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function di(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pi(e){var t=di(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hi(n.ownerDocument.documentElement,n)){if(null!==i&&fi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!e.extend&&s>i&&(r=i,i=s,s=r),r=ui(n,s);var a=ui(n,i);r&&a&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gi=u&&"documentMode"in document&&11>=document.documentMode,mi=null,vi=null,yi=null,bi=!1;function wi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;bi||null==mi||mi!==G(i)||("selectionStart"in(i=mi)&&fi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yi&&li(yi,i)||(yi=i,0<(i=qi(vi,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=mi)))}function xi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _i={animationend:xi("Animation","AnimationEnd"),animationiteration:xi("Animation","AnimationIteration"),animationstart:xi("Animation","AnimationStart"),transitionend:xi("Transition","TransitionEnd")},ki={},Si={};function Ei(e){if(ki[e])return ki[e];if(!_i[e])return e;var t,n=_i[e];for(t in n)if(n.hasOwnProperty(t)&&t in Si)return ki[e]=n[t];return e}u&&(Si=document.createElement("div").style,"AnimationEvent"in window||(delete _i.animationend.animation,delete _i.animationiteration.animation,delete _i.animationstart.animation),"TransitionEvent"in window||delete _i.transitionend.transition);var Ti=Ei("animationend"),Ci=Ei("animationiteration"),Ni=Ei("animationstart"),Ii=Ei("transitionend"),Di=new Map,Ai="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mi(e,t){Di.set(e,t),l(t,[e])}for(var Pi=0;Pi<Ai.length;Pi++){var Ri=Ai[Pi];Mi(Ri.toLowerCase(),"on"+(Ri[0].toUpperCase()+Ri.slice(1)))}Mi(Ti,"onAnimationEnd"),Mi(Ci,"onAnimationIteration"),Mi(Ni,"onAnimationStart"),Mi("dblclick","onDoubleClick"),Mi("focusin","onFocus"),Mi("focusout","onBlur"),Mi(Ii,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ji="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Oi=new Set("cancel close invalid load scroll toggle".split(" ").concat(ji));function Li(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,a,o,l,c){if(ze.apply(this,arguments),Oe){if(!Oe)throw Error(s(198));var u=Le;Oe=!1,Le=null,Fe||(Fe=!0,Ue=u)}}(i,t,void 0,e),e.currentTarget=null}function Fi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;Li(r,o,c),s=l}else for(a=0;a<i.length;a++){if(l=(o=i[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;Li(r,o,c),s=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ui(e,t){var n=t[gr];void 0===n&&(n=t[gr]=new Set);var i=e+"__bubble";n.has(i)||($i(t,e,2,!1),n.add(i))}function Vi(e,t,n){var i=0;t&&(i|=4),$i(n,e,i,t)}var zi="_reactListening"+Math.random().toString(36).slice(2);function Bi(e){if(!e[zi]){e[zi]=!0,a.forEach((function(t){"selectionchange"!==t&&(Oi.has(t)||Vi(t,!1,e),Vi(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zi]||(t[zi]=!0,Vi("selectionchange",!1,t))}}function $i(e,t,n,i){switch(Qt(t)){case 1:var r=Ht;break;case 4:r=qt;break;default:r=Kt}n=r.bind(null,t,n,e),r=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Wi(e,t,n,i,r){var s=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var o=i.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===a)for(a=i.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;a=a.return}for(;null!==o;){if(null===(a=yr(o)))return;if(5===(l=a.tag)||6===l){i=s=a;continue e}o=o.parentNode}}i=i.return}Ae((function(){var i=s,r=xe(n),a=[];e:{var o=Di.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Ti:case Ci:case Ni:l=vn;break;case Ii:l=Dn;break;case"scroll":l=dn;break;case"wheel":l=Mn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Nn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=i;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Me(p,d))&&u.push(Hi(p,g,f)))),h)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,r),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!yr(c)&&!c[pr])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?yr(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Nn,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?o:wr(l),f=null==c?o:wr(c),(o=new u(g,p+"leave",l,n,r)).target=h,o.relatedTarget=f,g=null,yr(r)===i&&((u=new u(d,p+"enter",c,n,r)).target=f,u.relatedTarget=h,g=u),h=g,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Ki(f))p++;for(f=0,g=d;g;g=Ki(g))f++;for(;0<p-f;)u=Ki(u),p--;for(;0<f-p;)d=Ki(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Ki(u),d=Ki(d)}u=null}else u=null;null!==l&&Gi(a,o,l,u,!1),null!==c&&null!==h&&Gi(a,h,c,u,!0)}if("select"===(l=(o=i?wr(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var m=Qn;else if(Wn(o))if(Xn)m=ai;else{m=ri;var v=ii}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=si);switch(m&&(m=m(e,i))?Hn(a,m,n,r):(v&&v(e,o,i),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=i?wr(i):window,e){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(mi=v,vi=i,yi=null);break;case"focusout":yi=vi=mi=null;break;case"mousedown":bi=!0;break;case"contextmenu":case"mouseup":case"dragend":bi=!1,wi(a,n,r);break;case"selectionchange":if(gi)break;case"keydown":case"keyup":wi(a,n,r)}var y;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(y=en()):(Jt="value"in(Xt=r)?Xt.value:Xt.textContent,Bn=!0)),0<(v=qi(i,b)).length&&(b=new wn(b,e,null,n,r),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=zn(n))&&(b.data=y))),(y=On?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Rn&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=qi(i,"onBeforeInput")).length&&(r=new wn("onBeforeInput","beforeinput",null,n,r),a.push({event:r,listeners:i}),r.data=y))}Fi(a,t)}))}function Hi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Me(e,n))&&i.unshift(Hi(e,s,r)),null!=(s=Me(e,t))&&i.push(Hi(e,s,r))),e=e.return}return i}function Ki(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gi(e,t,n,i,r){for(var s=t._reactName,a=[];null!==n&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===i)break;5===o.tag&&null!==c&&(o=c,r?null!=(l=Me(n,s))&&a.unshift(Hi(n,l,o)):r||null!=(l=Me(n,s))&&a.push(Hi(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yi=/\r\n?/g,Qi=/\u0000|\uFFFD/g;function Xi(e){return("string"===typeof e?e:""+e).replace(Yi,"\n").replace(Qi,"")}function Ji(e,t,n){if(t=Xi(t),Xi(e)!==t&&n)throw Error(s(425))}function Zi(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,ar="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(e){return sr.resolve(null).then(e).catch(or)}:ir;function or(e){setTimeout((function(){throw e}))}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Bt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Bt(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hr=Math.random().toString(36).slice(2),dr="__reactFiber$"+hr,fr="__reactProps$"+hr,pr="__reactContainer$"+hr,gr="__reactEvents$"+hr,mr="__reactListeners$"+hr,vr="__reactHandles$"+hr;function yr(e){var t=e[dr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pr]||n[dr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[dr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function br(e){return!(e=e[dr]||e[pr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function xr(e){return e[fr]||null}var _r=[],kr=-1;function Sr(e){return{current:e}}function Er(e){0>kr||(e.current=_r[kr],_r[kr]=null,kr--)}function Tr(e,t){kr++,_r[kr]=e.current,e.current=t}var Cr={},Nr=Sr(Cr),Ir=Sr(!1),Dr=Cr;function Ar(e,t){var n=e.type.contextTypes;if(!n)return Cr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Mr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pr(){Er(Ir),Er(Nr)}function Rr(e,t,n){if(Nr.current!==Cr)throw Error(s(168));Tr(Nr,t),Tr(Ir,n)}function jr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(s(108,$(e)||"Unknown",r));return L({},n,i)}function Or(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cr,Dr=Nr.current,Tr(Nr,e),Tr(Ir,Ir.current),!0}function Lr(e,t,n){var i=e.stateNode;if(!i)throw Error(s(169));n?(e=jr(e,t,Dr),i.__reactInternalMemoizedMergedChildContext=e,Er(Ir),Er(Nr),Tr(Nr,e)):Er(Ir),Tr(Ir,n)}var Fr=null,Ur=!1,Vr=!1;function zr(e){null===Fr?Fr=[e]:Fr.push(e)}function Br(){if(!Vr&&null!==Fr){Vr=!0;var e=0,t=bt;try{var n=Fr;for(bt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Fr=null,Ur=!1}catch(r){throw null!==Fr&&(Fr=Fr.slice(e+1)),Ke(Ze,Br),r}finally{bt=t,Vr=!1}}return null}var $r=[],Wr=0,Hr=null,qr=0,Kr=[],Gr=0,Yr=null,Qr=1,Xr="";function Jr(e,t){$r[Wr++]=qr,$r[Wr++]=Hr,Hr=e,qr=t}function Zr(e,t,n){Kr[Gr++]=Qr,Kr[Gr++]=Xr,Kr[Gr++]=Yr,Yr=e;var i=Qr;e=Xr;var r=32-at(i)-1;i&=~(1<<r),n+=1;var s=32-at(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Qr=1<<32-at(t)+r|n<<r|i,Xr=s+e}else Qr=1<<s|n<<r|i,Xr=e}function es(e){null!==e.return&&(Jr(e,1),Zr(e,1,0))}function ts(e){for(;e===Hr;)Hr=$r[--Wr],$r[Wr]=null,qr=$r[--Wr],$r[Wr]=null;for(;e===Yr;)Yr=Kr[--Gr],Kr[Gr]=null,Xr=Kr[--Gr],Kr[Gr]=null,Qr=Kr[--Gr],Kr[Gr]=null}var ns=null,is=null,rs=!1,ss=null;function as(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,is=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yr?{id:Qr,overflow:Xr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,is=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(rs){var t=is;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=cr(n.nextSibling);var i=ns;t&&os(e,t)?as(i,n):(e.flags=-4097&e.flags|2,rs=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,rs=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!rs)return us(e),rs=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=is)){if(ls(e))throw ds(),Error(s(418));for(;t;)as(e,t),t=cr(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){is=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}is=null}}else is=ns?cr(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=is;e;)e=cr(e.nextSibling)}function fs(){is=ns=null,rs=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var gs=w.ReactCurrentBatchConfig;function ms(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,e));var r=i,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function bs(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Fc(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Bc(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var s=n.type;return s===k?h(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===M&&ys(s)===t.type)?((i=r(t,n.props)).ref=ms(e,t,n),i.return=e,i):((i=Uc(n.type,n.key,n.props,null,e.mode,i)).ref=ms(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$c(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function h(e,t,n,i,s){return null===t||7!==t.tag?((t=Vc(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Bc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Uc(t.type,t.key,t.props,null,e.mode,n)).ref=ms(e,null,t),n.return=e,n;case _:return(t=$c(t,e.mode,n)).return=e,t;case M:return d(e,(0,t._init)(t._payload),n)}if(te(t)||j(t))return(t=Vc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function f(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===r?c(e,t,n,i):null;case _:return n.key===r?u(e,t,n,i):null;case M:return f(e,t,(r=n._init)(n._payload),i)}if(te(n)||j(n))return null!==r?null:h(e,t,n,i,null);vs(e,n)}return null}function p(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case x:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case _:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case M:return p(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||j(i))return h(t,e=e.get(n)||null,i,r,null);vs(t,i)}return null}function g(r,s,o,l){for(var c=null,u=null,h=s,g=s=0,m=null;null!==h&&g<o.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=f(r,h,o[g],l);if(null===v){null===h&&(h=m);break}e&&h&&null===v.alternate&&t(r,h),s=a(v,s,g),null===u?c=v:u.sibling=v,u=v,h=m}if(g===o.length)return n(r,h),rs&&Jr(r,g),c;if(null===h){for(;g<o.length;g++)null!==(h=d(r,o[g],l))&&(s=a(h,s,g),null===u?c=h:u.sibling=h,u=h);return rs&&Jr(r,g),c}for(h=i(r,h);g<o.length;g++)null!==(m=p(h,r,g,o[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=a(m,s,g),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach((function(e){return t(r,e)})),rs&&Jr(r,g),c}function m(r,o,l,c){var u=j(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,g=o,m=o=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var b=f(r,g,y.value,c);if(null===b){null===g&&(g=v);break}e&&g&&null===b.alternate&&t(r,g),o=a(b,o,m),null===h?u=b:h.sibling=b,h=b,g=v}if(y.done)return n(r,g),rs&&Jr(r,m),u;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=d(r,y.value,c))&&(o=a(y,o,m),null===h?u=y:h.sibling=y,h=y);return rs&&Jr(r,m),u}for(g=i(r,g);!y.done;m++,y=l.next())null!==(y=p(g,r,m,y.value,c))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),o=a(y,o,m),null===h?u=y:h.sibling=y,h=y);return e&&g.forEach((function(e){return t(r,e)})),rs&&Jr(r,m),u}return function e(i,s,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===k){if(7===u.tag){n(i,u.sibling),(s=r(u,a.props.children)).return=i,i=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===M&&ys(c)===u.type){n(i,u.sibling),(s=r(u,a.props)).ref=ms(i,u,a),s.return=i,i=s;break e}n(i,u);break}t(i,u),u=u.sibling}a.type===k?((s=Vc(a.props.children,i.mode,l,a.key)).return=i,i=s):((l=Uc(a.type,a.key,a.props,null,i.mode,l)).ref=ms(i,s,a),l.return=i,i=l)}return o(i);case _:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(i,s.sibling),(s=r(s,a.children||[])).return=i,i=s;break e}n(i,s);break}t(i,s),s=s.sibling}(s=$c(a,i.mode,l)).return=i,i=s}return o(i);case M:return e(i,s,(u=a._init)(a._payload),l)}if(te(a))return g(i,s,a,l);if(j(a))return m(i,s,a,l);vs(i,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,a)).return=i,i=s):(n(i,s),(s=Bc(a,i.mode,l)).return=i,i=s),o(i)):n(i,s)}}var ws=bs(!0),xs=bs(!1),_s=Sr(null),ks=null,Ss=null,Es=null;function Ts(){Es=Ss=ks=null}function Cs(e){var t=_s.current;Er(_s),e._currentValue=t}function Ns(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Is(e,t){ks=e,Es=Ss=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ko=!0),e.firstContext=null)}function Ds(e){var t=e._currentValue;if(Es!==e)if(e={context:e,memoizedValue:t,next:null},null===Ss){if(null===ks)throw Error(s(308));Ss=e,ks.dependencies={lanes:0,firstContext:e}}else Ss=Ss.next=e;return t}var As=null;function Ms(e){null===As?As=[e]:As.push(e)}function Ps(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Ms(t)):(n.next=r.next,r.next=n),t.interleaved=n,Rs(e,i)}function Rs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var js=!1;function Os(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ls(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vs(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Pl)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Rs(e,n)}return null===(r=i.interleaved)?(t.next=t,Ms(i)):(t.next=r.next,r.next=t),i.interleaved=t,Rs(e,n)}function zs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Bs(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ws(e,t,n,i){var r=e.updateQueue;js=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=r.baseState;for(a=0,u=c=l=null,o=s;;){var d=o.lane,f=o.eventTime;if((i&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,g=o;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break e;h=L({},h,d);break e;case 2:js=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=r.effects)?r.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,a|=d;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(d=o).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{a|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);zl|=a,e.lanes=a,e.memoizedState=h}}function Hs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var qs={},Ks=Sr(qs),Gs=Sr(qs),Ys=Sr(qs);function Qs(e){if(e===qs)throw Error(s(174));return e}function Xs(e,t){switch(Tr(Ys,t),Tr(Gs,e),Tr(Ks,qs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Er(Ks),Tr(Ks,t)}function Zs(){Er(Ks),Er(Gs),Er(Ys)}function ea(e){Qs(Ys.current);var t=Qs(Ks.current),n=le(t,e.type);t!==n&&(Tr(Gs,e),Tr(Ks,n))}function ta(e){Gs.current===e&&(Er(Ks),Er(Gs))}var ia=Sr(0);function ra(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sa=[];function aa(){for(var e=0;e<sa.length;e++)sa[e]._workInProgressVersionPrimary=null;sa.length=0}var oa=w.ReactCurrentDispatcher,la=w.ReactCurrentBatchConfig,ca=0,ua=null,ha=null,da=null,fa=!1,pa=!1,ga=0,ma=0;function va(){throw Error(s(321))}function ya(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!oi(e[n],t[n]))return!1;return!0}function ba(e,t,n,i,r,a){if(ca=a,ua=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oa.current=null===e||null===e.memoizedState?no:io,e=n(i,r),pa){a=0;do{if(pa=!1,ga=0,25<=a)throw Error(s(301));a+=1,da=ha=null,t.updateQueue=null,oa.current=ro,e=n(i,r)}while(pa)}if(oa.current=to,t=null!==ha&&null!==ha.next,ca=0,da=ha=ua=null,fa=!1,t)throw Error(s(300));return e}function wa(){var e=0!==ga;return ga=0,e}function xa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===da?ua.memoizedState=da=e:da=da.next=e,da}function _a(){if(null===ha){var e=ua.alternate;e=null!==e?e.memoizedState:null}else e=ha.next;var t=null===da?ua.memoizedState:da.next;if(null!==t)da=t,ha=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ha=e).memoizedState,baseState:ha.baseState,baseQueue:ha.baseQueue,queue:ha.queue,next:null},null===da?ua.memoizedState=da=e:da=da.next=e}return da}function ka(e,t){return"function"===typeof t?t(e):t}function Sa(e){var t=_a(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=ha,r=i.baseQueue,a=n.pending;if(null!==a){if(null!==r){var o=r.next;r.next=a.next,a.next=o}i.baseQueue=r=a,n.pending=null}if(null!==r){a=r.next,i=i.baseState;var l=o=null,c=null,u=a;do{var h=u.lane;if((ca&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,o=i):c=c.next=d,ua.lanes|=h,zl|=h}u=u.next}while(null!==u&&u!==a);null===c?o=i:c.next=l,oi(i,t.memoizedState)||(ko=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{a=r.lane,ua.lanes|=a,zl|=a,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ea(e){var t=_a(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,a=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{a=e(a,o.action),o=o.next}while(o!==r);oi(a,t.memoizedState)||(ko=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function Ta(){}function Ca(e,t){var n=ua,i=_a(),r=t(),a=!oi(i.memoizedState,r);if(a&&(i.memoizedState=r,ko=!0),i=i.queue,Ua(Da.bind(null,n,i,e),[e]),i.getSnapshot!==t||a||null!==da&&1&da.memoizedState.tag){if(n.flags|=2048,Ra(9,Ia.bind(null,n,i,r,t),void 0,null),null===Rl)throw Error(s(349));0!==(30&ca)||Na(n,t,r)}return r}function Na(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ua.updateQueue)?(t={lastEffect:null,stores:null},ua.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ia(e,t,n,i){t.value=n,t.getSnapshot=i,Aa(t)&&Ma(e)}function Da(e,t,n){return n((function(){Aa(t)&&Ma(e)}))}function Aa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oi(e,n)}catch(i){return!0}}function Ma(e){var t=Rs(e,1);null!==t&&oc(t,e,1,-1)}function Pa(e){var t=xa();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:e},t.queue=e,e=e.dispatch=Xa.bind(null,ua,e),[t.memoizedState,e]}function Ra(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=ua.updateQueue)?(t={lastEffect:null,stores:null},ua.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function ja(){return _a().memoizedState}function Oa(e,t,n,i){var r=xa();ua.flags|=e,r.memoizedState=Ra(1|t,n,void 0,void 0===i?null:i)}function La(e,t,n,i){var r=_a();i=void 0===i?null:i;var s=void 0;if(null!==ha){var a=ha.memoizedState;if(s=a.destroy,null!==i&&ya(i,a.deps))return void(r.memoizedState=Ra(t,n,s,i))}ua.flags|=e,r.memoizedState=Ra(1|t,n,s,i)}function Fa(e,t){return Oa(8390656,8,e,t)}function Ua(e,t){return La(2048,8,e,t)}function Va(e,t){return La(4,2,e,t)}function za(e,t){return La(4,4,e,t)}function Ba(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function $a(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,La(4,4,Ba.bind(null,t,e),n)}function Wa(){}function Ha(e,t){var n=_a();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ya(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function qa(e,t){var n=_a();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ya(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Ka(e,t,n){return 0===(21&ca)?(e.baseState&&(e.baseState=!1,ko=!0),e.memoizedState=n):(oi(n,t)||(n=gt(),ua.lanes|=n,zl|=n,e.baseState=!0),t)}function Ga(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var i=la.transition;la.transition={};try{e(!1),t()}finally{bt=n,la.transition=i}}function Ya(){return _a().memoizedState}function Qa(e,t,n){var i=ac(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Ja(e))Za(t,n);else if(null!==(n=Ps(e,t,n,i))){oc(n,e,i,sc()),eo(n,t,i)}}function Xa(e,t,n){var i=ac(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ja(e))Za(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,oi(o,a)){var l=t.interleaved;return null===l?(r.next=r,Ms(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch($s){}null!==(n=Ps(e,t,r,i))&&(oc(n,e,i,r=sc()),eo(n,t,i))}}function Ja(e){var t=e.alternate;return e===ua||null!==t&&t===ua}function Za(e,t){pa=fa=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function eo(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}var to={readContext:Ds,useCallback:va,useContext:va,useEffect:va,useImperativeHandle:va,useInsertionEffect:va,useLayoutEffect:va,useMemo:va,useReducer:va,useRef:va,useState:va,useDebugValue:va,useDeferredValue:va,useTransition:va,useMutableSource:va,useSyncExternalStore:va,useId:va,unstable_isNewReconciler:!1},no={readContext:Ds,useCallback:function(e,t){return xa().memoizedState=[e,void 0===t?null:t],e},useContext:Ds,useEffect:Fa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oa(4194308,4,Ba.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oa(4,2,e,t)},useMemo:function(e,t){var n=xa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=xa();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Qa.bind(null,ua,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},xa().memoizedState=e},useState:Pa,useDebugValue:Wa,useDeferredValue:function(e){return xa().memoizedState=e},useTransition:function(){var e=Pa(!1),t=e[0];return e=Ga.bind(null,e[1]),xa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=ua,r=xa();if(rs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Rl)throw Error(s(349));0!==(30&ca)||Na(i,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,Fa(Da.bind(null,i,a,e),[e]),i.flags|=2048,Ra(9,Ia.bind(null,i,a,n,t),void 0,null),n},useId:function(){var e=xa(),t=Rl.identifierPrefix;if(rs){var n=Xr;t=":"+t+"R"+(n=(Qr&~(1<<32-at(Qr)-1)).toString(32)+n),0<(n=ga++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ma++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},io={readContext:Ds,useCallback:Ha,useContext:Ds,useEffect:Ua,useImperativeHandle:$a,useInsertionEffect:Va,useLayoutEffect:za,useMemo:qa,useReducer:Sa,useRef:ja,useState:function(){return Sa(ka)},useDebugValue:Wa,useDeferredValue:function(e){return Ka(_a(),ha.memoizedState,e)},useTransition:function(){return[Sa(ka)[0],_a().memoizedState]},useMutableSource:Ta,useSyncExternalStore:Ca,useId:Ya,unstable_isNewReconciler:!1},ro={readContext:Ds,useCallback:Ha,useContext:Ds,useEffect:Ua,useImperativeHandle:$a,useInsertionEffect:Va,useLayoutEffect:za,useMemo:qa,useReducer:Ea,useRef:ja,useState:function(){return Ea(ka)},useDebugValue:Wa,useDeferredValue:function(e){var t=_a();return null===ha?t.memoizedState=e:Ka(t,ha.memoizedState,e)},useTransition:function(){return[Ea(ka)[0],_a().memoizedState]},useMutableSource:Ta,useSyncExternalStore:Ca,useId:Ya,unstable_isNewReconciler:!1};function so(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ao(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var oo={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=sc(),r=ac(e),s=Fs(i,r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Vs(e,s,r))&&(oc(t,e,r,i),zs(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=sc(),r=ac(e),s=Fs(i,r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Vs(e,s,r))&&(oc(t,e,r,i),zs(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=sc(),i=ac(e),r=Fs(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Vs(e,r,i))&&(oc(t,e,i,n),zs(t,e,i))}};function lo(e,t,n,i,r,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,s))}function co(e,t,n){var i=!1,r=Cr,s=t.contextType;return"object"===typeof s&&null!==s?s=Ds(s):(r=Mr(t)?Dr:Nr.current,s=(i=null!==(i=t.contextTypes)&&void 0!==i)?Ar(e,r):Cr),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=oo,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function uo(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&oo.enqueueReplaceState(t,t.state,null)}function ho(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Os(e);var s=t.contextType;"object"===typeof s&&null!==s?r.context=Ds(s):(s=Mr(t)?Dr:Nr.current,r.context=Ar(e,s)),r.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ao(e,t,s,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&oo.enqueueReplaceState(r,r.state,null),Ws(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function fo(e,t){try{var n="",i=t;do{n+=z(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r,digest:null}}function po(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function go(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var mo="function"===typeof WeakMap?WeakMap:Map;function vo(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Yl||(Yl=!0,Ql=i),go(0,t)},n}function yo(e,t,n){(n=Fs(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){go(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){go(0,t),"function"!==typeof i&&(null===Xl?Xl=new Set([this]):Xl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function bo(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new mo;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Dc.bind(null,e,t,n),t.then(e,e))}function wo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function xo(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,Vs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var _o=w.ReactCurrentOwner,ko=!1;function So(e,t,n,i){t.child=null===e?xs(t,null,n,i):ws(t,e.child,n,i)}function Eo(e,t,n,i,r){n=n.render;var s=t.ref;return Is(t,r),i=ba(e,t,n,i,s,r),n=wa(),null===e||ko?(rs&&n&&es(t),t.flags|=1,So(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Yo(e,t,r))}function Co(e,t,n,i,r){if(null===e){var s=n.type;return"function"!==typeof s||Lc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Uc(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,No(e,t,s,i,r))}if(s=e.child,0===(e.lanes&r)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:li)(a,i)&&e.ref===t.ref)return Yo(e,t,r)}return t.flags|=1,(e=Fc(s,i)).ref=t.ref,e.return=t,t.child=e}function No(e,t,n,i,r){if(null!==e){var s=e.memoizedProps;if(li(s,i)&&e.ref===t.ref){if(ko=!1,t.pendingProps=i=s,0===(e.lanes&r))return t.lanes=e.lanes,Yo(e,t,r);0!==(131072&e.flags)&&(ko=!0)}}return Ao(e,t,n,i,r)}function Io(e,t,n){var i=t.pendingProps,r=i.children,s=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tr(Fl,Ll),Ll|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Tr(Fl,Ll),Ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,Tr(Fl,Ll),Ll|=i}else null!==s?(i=s.baseLanes|n,t.memoizedState=null):i=n,Tr(Fl,Ll),Ll|=i;return So(e,t,r,n),t.child}function Do(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ao(e,t,n,i,r){var s=Mr(n)?Dr:Nr.current;return s=Ar(t,s),Is(t,r),n=ba(e,t,n,i,s,r),i=wa(),null===e||ko?(rs&&i&&es(t),t.flags|=1,So(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Yo(e,t,r))}function Mo(e,t,n,i,r){if(Mr(n)){var s=!0;Or(t)}else s=!1;if(Is(t,r),null===t.stateNode)Go(e,t),co(t,n,i),ho(t,n,i,r),i=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ds(c):c=Ar(t,c=Mr(n)?Dr:Nr.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==i||l!==c)&&uo(t,a,i,c),js=!1;var d=t.memoizedState;a.state=d,Ws(t,i,a,r),l=t.memoizedState,o!==i||d!==l||Ir.current||js?("function"===typeof u&&(ao(t,n,u,i),l=t.memoizedState),(o=js||lo(t,n,o,i,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=c,i=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,Ls(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:so(t.type,o),a.props=c,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ds(l):l=Ar(t,l=Mr(n)?Dr:Nr.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==l)&&uo(t,a,i,l),js=!1,d=t.memoizedState,a.state=d,Ws(t,i,a,r);var p=t.memoizedState;o!==h||d!==p||Ir.current||js?("function"===typeof f&&(ao(t,n,f,i),p=t.memoizedState),(c=js||lo(t,n,c,i,d,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),a.props=i,a.state=p,a.context=l,i=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return Po(e,t,n,i,s,r)}function Po(e,t,n,i,r,s){Do(e,t);var a=0!==(128&t.flags);if(!i&&!a)return r&&Lr(t,n,!1),Yo(e,t,s);i=t.stateNode,_o.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&a?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,o,s)):So(e,t,o,s),t.memoizedState=i.state,r&&Lr(t,n,!0),t.child}function Ro(e){var t=e.stateNode;t.pendingContext?Rr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Rr(0,t.context,!1),Xs(e,t.containerInfo)}function jo(e,t,n,i,r){return fs(),ps(r),t.flags|=256,So(e,t,n,i),t.child}var Oo,Lo,Fo,Uo,Vo={dehydrated:null,treeContext:null,retryLane:0};function zo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bo(e,t,n){var i,r=t.pendingProps,a=ia.current,o=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&a)),i?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Tr(ia,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=zc(l,r,0,null),e=Vc(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=zo(n),t.memoizedState=Vo,e):$o(t,l));if(null!==(a=e.memoizedState)&&null!==(i=a.dehydrated))return function(e,t,n,i,r,a,o){if(n)return 256&t.flags?(t.flags&=-257,Wo(e,t,o,i=po(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=i.fallback,r=t.mode,i=zc({mode:"visible",children:i.children},r,0,null),(a=Vc(a,r,o,null)).flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,0!==(1&t.mode)&&ws(t,e.child,null,o),t.child.memoizedState=zo(o),t.memoizedState=Vo,a);if(0===(1&t.mode))return Wo(e,t,o,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Wo(e,t,o,i=po(a=Error(s(419)),i,void 0))}if(l=0!==(o&e.childLanes),ko||l){if(null!==(i=Rl)){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|o))?0:r)&&r!==a.retryLane&&(a.retryLane=r,Rs(e,r),oc(i,e,r,-1))}return wc(),Wo(e,t,o,i=po(Error(s(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Mc.bind(null,e),r._reactRetry=t,null):(e=a.treeContext,is=cr(r.nextSibling),ns=t,rs=!0,ss=null,null!==e&&(Kr[Gr++]=Qr,Kr[Gr++]=Xr,Kr[Gr++]=Yr,Qr=e.id,Xr=e.overflow,Yr=t),t=$o(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,a,n);if(o){o=r.fallback,l=t.mode,i=(a=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==a?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Fc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==i?o=Fc(i,o):(o=Vc(o,l,n,null)).flags|=2,o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=null===(l=e.child.memoizedState)?zo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Vo,r}return e=(o=e.child).sibling,r=Fc(o,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function $o(e,t){return(t=zc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Wo(e,t,n,i){return null!==i&&ps(i),ws(t,e.child,null,n),(e=$o(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ho(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Ns(e.return,t,n)}function qo(e,t,n,i,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Ko(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(So(e,t,i.children,n),0!==(2&(i=ia.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ho(e,n,t);else if(19===e.tag)Ho(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Tr(ia,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ra(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),qo(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ra(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}qo(t,!0,n,null,s);break;case"together":qo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Go(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Yo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),zl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Fc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qo(e,t){if(!rs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Xo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Jo(e,t,n){var i=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xo(t),null;case 1:case 17:return Mr(t.type)&&Pr(),Xo(t),null;case 3:return i=t.stateNode,Zs(),Er(Ir),Er(Nr),aa(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(hc(ss),ss=null))),Lo(e,t),Xo(t),null;case 5:ta(t);var r=Qs(Ys.current);if(n=t.type,null!==e&&null!=t.stateNode)Fo(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(s(166));return Xo(t),null}if(e=Qs(Ks.current),hs(t)){i=t.stateNode,n=t.type;var a=t.memoizedProps;switch(i[dr]=t,i[fr]=a,e=0!==(1&t.mode),n){case"dialog":Ui("cancel",i),Ui("close",i);break;case"iframe":case"object":case"embed":Ui("load",i);break;case"video":case"audio":for(r=0;r<ji.length;r++)Ui(ji[r],i);break;case"source":Ui("error",i);break;case"img":case"image":case"link":Ui("error",i),Ui("load",i);break;case"details":Ui("toggle",i);break;case"input":Q(i,a),Ui("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},Ui("invalid",i);break;case"textarea":re(i,a),Ui("invalid",i)}for(var l in ye(n,a),r=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==a.suppressHydrationWarning&&Ji(i.textContent,c,e),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Ji(i.textContent,c,e),r=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ui("scroll",i)}switch(n){case"input":q(i),Z(i,a,!0);break;case"textarea":q(i),ae(i);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(i.onclick=Zi)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[dr]=t,e[fr]=i,Oo(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,i),n){case"dialog":Ui("cancel",e),Ui("close",e),r=i;break;case"iframe":case"object":case"embed":Ui("load",e),r=i;break;case"video":case"audio":for(r=0;r<ji.length;r++)Ui(ji[r],e);r=i;break;case"source":Ui("error",e),r=i;break;case"img":case"image":case"link":Ui("error",e),Ui("load",e),r=i;break;case"details":Ui("toggle",e),r=i;break;case"input":Q(e,i),r=Y(e,i),Ui("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=L({},i,{value:void 0}),Ui("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),Ui("invalid",e)}for(a in ye(n,r),c=r)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?me(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ui("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":q(e),Z(e,i,!1);break;case"textarea":q(e),ae(e);break;case"option":null!=i.value&&e.setAttribute("value",""+W(i.value));break;case"select":e.multiple=!!i.multiple,null!=(a=i.value)?ne(e,!!i.multiple,a,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Zi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xo(t),null;case 6:if(e&&null!=t.stateNode)Uo(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(s(166));if(n=Qs(Ys.current),Qs(Ks.current),hs(t)){if(i=t.stateNode,n=t.memoizedProps,i[dr]=t,(a=i.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Ji(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ji(i.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[dr]=t,t.stateNode=i}return Xo(t),null;case 13:if(Er(ia),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rs&&null!==is&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,a=!1;else if(a=hs(t),null!==i&&null!==i.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[dr]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xo(t),a=!1}else null!==ss&&(hc(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ia.current)?0===Ul&&(Ul=3):wc())),null!==t.updateQueue&&(t.flags|=4),Xo(t),null);case 4:return Zs(),Lo(e,t),null===e&&Bi(t.stateNode.containerInfo),Xo(t),null;case 10:return Cs(t.type._context),Xo(t),null;case 19:if(Er(ia),null===(a=t.memoizedState))return Xo(t),null;if(i=0!==(128&t.flags),null===(l=a.rendering))if(i)Qo(a,!1);else{if(0!==Ul||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ra(e))){for(t.flags|=128,Qo(a,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Tr(ia,1&ia.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>Kl&&(t.flags|=128,i=!0,Qo(a,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=ra(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Qo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!rs)return Xo(t),null}else 2*Xe()-a.renderingStartTime>Kl&&1073741824!==n&&(t.flags|=128,i=!0,Qo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=ia.current,Tr(ia,i?1&n|2:1&n),t):(Xo(t),null);case 22:case 23:return mc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Ll)&&(Xo(t),6&t.subtreeFlags&&(t.flags|=8192)):Xo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Zo(e,t){switch(ts(t),t.tag){case 1:return Mr(t.type)&&Pr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Zs(),Er(Ir),Er(Nr),aa(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ta(t),null;case 13:if(Er(ia),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Er(ia),null;case 4:return Zs(),null;case 10:return Cs(t.type._context),null;case 22:case 23:return mc(),null;default:return null}}Oo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Lo=function(){},Fo=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,Qs(Ks.current);var s,a=null;switch(n){case"input":r=Y(e,r),i=Y(e,i),a=[];break;case"select":r=L({},r,{value:void 0}),i=L({},i,{value:void 0}),a=[];break;case"textarea":r=ie(e,r),i=ie(e,i),a=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=Zi)}for(u in ye(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ui("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Uo=function(e,t,n,i){n!==i&&(t.flags|=4)};var el=!1,tl=!1,nl="function"===typeof WeakSet?WeakSet:Set,il=null;function rl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Ic(e,t,i)}else n.current=null}function sl(e,t,n){try{n()}catch(i){Ic(e,t,i)}}var al=!1;function ol(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&sl(t,n,s)}r=r.next}while(r!==i)}}function ll(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function cl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ul(e){var t=e.alternate;null!==t&&(e.alternate=null,ul(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[dr],delete t[fr],delete t[gr],delete t[mr],delete t[vr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function hl(e){return 5===e.tag||3===e.tag||4===e.tag}function dl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||hl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function fl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zi));else if(4!==i&&null!==(e=e.child))for(fl(e,t,n),e=e.sibling;null!==e;)fl(e,t,n),e=e.sibling}function pl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(pl(e,t,n),e=e.sibling;null!==e;)pl(e,t,n),e=e.sibling}var gl=null,ml=!1;function vl(e,t,n){for(n=n.child;null!==n;)yl(e,t,n),n=n.sibling}function yl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(rt,n)}catch(o){}switch(n.tag){case 5:tl||rl(n,t);case 6:var i=gl,r=ml;gl=null,vl(e,t,n),ml=r,null!==(gl=i)&&(ml?(e=gl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):gl.removeChild(n.stateNode));break;case 18:null!==gl&&(ml?(e=gl,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Bt(e)):lr(gl,n.stateNode));break;case 4:i=gl,r=ml,gl=n.stateNode.containerInfo,ml=!0,vl(e,t,n),gl=i,ml=r;break;case 0:case 11:case 14:case 15:if(!tl&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&sl(n,t,a),r=r.next}while(r!==i)}vl(e,t,n);break;case 1:if(!tl&&(rl(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(o){Ic(n,t,o)}vl(e,t,n);break;case 21:vl(e,t,n);break;case 22:1&n.mode?(tl=(i=tl)||null!==n.memoizedState,vl(e,t,n),tl=i):vl(e,t,n);break;default:vl(e,t,n)}}function bl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new nl),t.forEach((function(t){var i=Pc.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function wl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:gl=l.stateNode,ml=!1;break e;case 3:case 4:gl=l.stateNode.containerInfo,ml=!0;break e}l=l.return}if(null===gl)throw Error(s(160));yl(a,o,r),gl=null,ml=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch($s){Ic(r,t,$s)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)xl(t,e),t=t.sibling}function xl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wl(t,e),_l(e),4&i){try{ol(3,e,e.return),ll(3,e)}catch(m){Ic(e,e.return,m)}try{ol(5,e,e.return)}catch(m){Ic(e,e.return,m)}}break;case 1:wl(t,e),_l(e),512&i&&null!==n&&rl(n,n.return);break;case 5:if(wl(t,e),_l(e),512&i&&null!==n&&rl(n,n.return),32&e.flags){var r=e.stateNode;try{de(r,"")}catch(m){Ic(e,e.return,m)}}if(4&i&&null!=(r=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(r,a),be(l,o);var u=be(l,a);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];"style"===h?me(r,d):"dangerouslySetInnerHTML"===h?he(r,d):"children"===h?de(r,d):b(r,h,d,u)}switch(l){case"input":J(r,a);break;case"textarea":se(r,a);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(r,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(r,!!a.multiple,a.defaultValue,!0):ne(r,!!a.multiple,a.multiple?[]:"",!1))}r[fr]=a}catch(m){Ic(e,e.return,m)}}break;case 6:if(wl(t,e),_l(e),4&i){if(null===e.stateNode)throw Error(s(162));r=e.stateNode,a=e.memoizedProps;try{r.nodeValue=a}catch(m){Ic(e,e.return,m)}}break;case 3:if(wl(t,e),_l(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Ic(e,e.return,m)}break;case 4:default:wl(t,e),_l(e);break;case 13:wl(t,e),_l(e),8192&(r=e.child).flags&&(a=null!==r.memoizedState,r.stateNode.isHidden=a,!a||null!==r.alternate&&null!==r.alternate.memoizedState||(ql=Xe())),4&i&&bl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(tl=(u=tl)||h,wl(t,e),tl=u):wl(t,e),_l(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(il=e,h=e.child;null!==h;){for(d=il=h;null!==il;){switch(p=(f=il).child,f.tag){case 0:case 11:case 14:case 15:ol(4,f,f.return);break;case 1:rl(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){i=f,n=f.return;try{t=i,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Ic(i,n,m)}}break;case 5:rl(f,f.return);break;case 22:if(null!==f.memoizedState){Tl(d);continue}}null!==p?(p.return=f,il=p):Tl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{r=d.stateNode,u?"function"===typeof(a=r.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,o=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",o))}catch(m){Ic(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Ic(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:wl(t,e),_l(e),4&i&&bl(e);case 21:}}function _l(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(hl(n)){var i=n;break e}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(de(r,""),i.flags&=-33),pl(e,dl(e),r);break;case 3:case 4:var a=i.stateNode.containerInfo;fl(e,dl(e),a);break;default:throw Error(s(161))}}catch(Us){Ic(e,e.return,Us)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function kl(e,t,n){il=e,Sl(e,t,n)}function Sl(e,t,n){for(var i=0!==(1&e.mode);null!==il;){var r=il,s=r.child;if(22===r.tag&&i){var a=null!==r.memoizedState||el;if(!a){var o=r.alternate,l=null!==o&&null!==o.memoizedState||tl;o=el;var c=tl;if(el=a,(tl=l)&&!c)for(il=r;null!==il;)l=(a=il).child,22===a.tag&&null!==a.memoizedState?Cl(r):null!==l?(l.return=a,il=l):Cl(r);for(;null!==s;)il=s,Sl(s,t,n),s=s.sibling;il=r,el=o,tl=c}El(e)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,il=s):El(e)}}function El(e){for(;null!==il;){var t=il;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:tl||ll(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!tl)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:so(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Hs(t,a,i);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Hs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}tl||512&t.flags&&cl(t)}catch(Js){Ic(t,t.return,Js)}}if(t===e){il=null;break}if(null!==(n=t.sibling)){n.return=t.return,il=n;break}il=t.return}}function Tl(e){for(;null!==il;){var t=il;if(t===e){il=null;break}var n=t.sibling;if(null!==n){n.return=t.return,il=n;break}il=t.return}}function Cl(e){for(;null!==il;){var t=il;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ll(4,t)}catch(Us){Ic(t,n,Us)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(Us){Ic(t,r,Us)}}var s=t.return;try{cl(t)}catch(Us){Ic(t,s,Us)}break;case 5:var a=t.return;try{cl(t)}catch(Us){Ic(t,a,Us)}}}catch(Us){Ic(t,t.return,Us)}if(t===e){il=null;break}var o=t.sibling;if(null!==o){o.return=t.return,il=o;break}il=t.return}}var Nl,Il=Math.ceil,Dl=w.ReactCurrentDispatcher,Al=w.ReactCurrentOwner,Ml=w.ReactCurrentBatchConfig,Pl=0,Rl=null,jl=null,Ol=0,Ll=0,Fl=Sr(0),Ul=0,Vl=null,zl=0,Bl=0,$l=0,Wl=null,Hl=null,ql=0,Kl=1/0,Gl=null,Yl=!1,Ql=null,Xl=null,Jl=!1,Zl=null,ec=0,tc=0,nc=null,ic=-1,rc=0;function sc(){return 0!==(6&Pl)?Xe():-1!==ic?ic:ic=Xe()}function ac(e){return 0===(1&e.mode)?1:0!==(2&Pl)&&0!==Ol?Ol&-Ol:null!==gs.transition?(0===rc&&(rc=gt()),rc):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function oc(e,t,n,i){if(50<tc)throw tc=0,nc=null,Error(s(185));vt(e,n,i),0!==(2&Pl)&&e===Rl||(e===Rl&&(0===(2&Pl)&&(Bl|=n),4===Ul&&dc(e,Ol)),lc(e,i),1===n&&0===Pl&&0===(1&t.mode)&&(Kl=Xe()+500,Ur&&Br()))}function lc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=r[a];-1===l?0!==(o&n)&&0===(o&i)||(r[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var i=dt(e,e===Rl?Ol:0);if(0===i)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Ur=!0,zr(e)}(fc.bind(null,e)):zr(fc.bind(null,e)),ar((function(){0===(6&Pl)&&Br()})),n=null;else{switch(wt(i)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Rc(n,cc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function cc(e,t){if(ic=-1,rc=0,0!==(6&Pl))throw Error(s(327));var n=e.callbackNode;if(Cc()&&e.callbackNode!==n)return null;var i=dt(e,e===Rl?Ol:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=xc(e,i);else{t=i;var r=Pl;Pl|=2;var a=bc();for(Rl===e&&Ol===t||(Gl=null,Kl=Xe()+500,vc(e,t));;)try{kc();break}catch(l){yc(e,l)}Ts(),Dl.current=a,Pl=r,null!==jl?t=0:(Rl=null,Ol=0,t=Ul)}if(0!==t){if(2===t&&(0!==(r=pt(e))&&(i=r,t=uc(e,r))),1===t)throw n=Vl,vc(e,0),dc(e,i),lc(e,Xe()),n;if(6===t)dc(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!oi(s(),r))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=xc(e,i))&&(0!==(a=pt(e))&&(i=a,t=uc(e,a))),1===t))throw n=Vl,vc(e,0),dc(e,i),lc(e,Xe()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:case 5:Tc(e,Hl,Gl);break;case 3:if(dc(e,i),(130023424&i)===i&&10<(t=ql+500-Xe())){if(0!==dt(e,0))break;if(((r=e.suspendedLanes)&i)!==i){sc(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(Tc.bind(null,e,Hl,Gl),t);break}Tc(e,Hl,Gl);break;case 4:if(dc(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var o=31-at(i);a=1<<o,(o=t[o])>r&&(r=o),i&=~a}if(i=r,10<(i=(120>(i=Xe()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Il(i/1960))-i)){e.timeoutHandle=ir(Tc.bind(null,e,Hl,Gl),i);break}Tc(e,Hl,Gl);break;default:throw Error(s(329))}}}return lc(e,Xe()),e.callbackNode===n?cc.bind(null,e):null}function uc(e,t){var n=Wl;return e.current.memoizedState.isDehydrated&&(vc(e,t).flags|=256),2!==(e=xc(e,t))&&(t=Hl,Hl=n,null!==t&&hc(t)),e}function hc(e){null===Hl?Hl=e:Hl.push.apply(Hl,e)}function dc(e,t){for(t&=~$l,t&=~Bl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),i=1<<n;e[n]=-1,t&=~i}}function fc(e){if(0!==(6&Pl))throw Error(s(327));Cc();var t=dt(e,0);if(0===(1&t))return lc(e,Xe()),null;var n=xc(e,t);if(0!==e.tag&&2===n){var i=pt(e);0!==i&&(t=i,n=uc(e,i))}if(1===n)throw n=Vl,vc(e,0),dc(e,t),lc(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tc(e,Hl,Gl),lc(e,Xe()),null}function pc(e,t){var n=Pl;Pl|=1;try{return e(t)}finally{0===(Pl=n)&&(Kl=Xe()+500,Ur&&Br())}}function gc(e){null!==Zl&&0===Zl.tag&&0===(6&Pl)&&Cc();var t=Pl;Pl|=1;var n=Ml.transition,i=bt;try{if(Ml.transition=null,bt=1,e)return e()}finally{bt=i,Ml.transition=n,0===(6&(Pl=t))&&Br()}}function mc(){Ll=Fl.current,Er(Fl)}function vc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==jl)for(n=jl.return;null!==n;){var i=n;switch(ts(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Pr();break;case 3:Zs(),Er(Ir),Er(Nr),aa();break;case 5:ta(i);break;case 4:Zs();break;case 13:case 19:Er(ia);break;case 10:Cs(i.type._context);break;case 22:case 23:mc()}n=n.return}if(Rl=e,jl=e=Fc(e.current,null),Ol=Ll=t,Ul=0,Vl=null,$l=Bl=zl=0,Hl=Wl=null,null!==As){for(t=0;t<As.length;t++)if(null!==(i=(n=As[t]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var a=s.next;s.next=r,i.next=a}n.pending=i}As=null}return e}function yc(e,t){for(;;){var n=jl;try{if(Ts(),oa.current=to,fa){for(var i=ua.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}fa=!1}if(ca=0,da=ha=ua=null,pa=!1,ga=0,Al.current=null,null===n||null===n.return){Ul=1,Vl=t,jl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Ol,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=wo(o);if(null!==p){p.flags&=-257,xo(p,o,l,0,t),1&p.mode&&bo(a,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){bo(a,u,t),wc();break e}c=Error(s(426))}else if(rs&&1&l.mode){var v=wo(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),xo(v,o,l,0,t),ps(fo(c,l));break e}}a=c=fo(c,l),4!==Ul&&(Ul=2),null===Wl?Wl=[a]:Wl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Bs(a,vo(0,c,t));break e;case 1:l=c;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Xl||!Xl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Bs(a,yo(a,l,t));break e}}a=a.return}while(null!==a)}Ec(n)}catch(na){t=na,jl===n&&null!==n&&(jl=n=n.return);continue}break}}function bc(){var e=Dl.current;return Dl.current=to,null===e?to:e}function wc(){0!==Ul&&3!==Ul&&2!==Ul||(Ul=4),null===Rl||0===(268435455&zl)&&0===(268435455&Bl)||dc(Rl,Ol)}function xc(e,t){var n=Pl;Pl|=2;var i=bc();for(Rl===e&&Ol===t||(Gl=null,vc(e,t));;)try{_c();break}catch(r){yc(e,r)}if(Ts(),Pl=n,Dl.current=i,null!==jl)throw Error(s(261));return Rl=null,Ol=0,Ul}function _c(){for(;null!==jl;)Sc(jl)}function kc(){for(;null!==jl&&!Ye();)Sc(jl)}function Sc(e){var t=Nl(e.alternate,e,Ll);e.memoizedProps=e.pendingProps,null===t?Ec(e):jl=t,Al.current=null}function Ec(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Jo(n,t,Ll)))return void(jl=n)}else{if(null!==(n=Zo(n,t)))return n.flags&=32767,void(jl=n);if(null===e)return Ul=6,void(jl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(jl=t);jl=t=e}while(null!==t);0===Ul&&(Ul=5)}function Tc(e,t,n){var i=bt,r=Ml.transition;try{Ml.transition=null,bt=1,function(e,t,n,i){do{Cc()}while(null!==Zl);if(0!==(6&Pl))throw Error(s(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-at(n),s=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~s}}(e,a),e===Rl&&(jl=Rl=null,Ol=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Jl||(Jl=!0,Rc(tt,(function(){return Cc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Ml.transition,Ml.transition=null;var o=bt;bt=1;var l=Pl;Pl|=4,Al.current=null,function(e,t){if(er=Wt,fi(e=di())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(To){n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==r&&3!==d.nodeType||(l=o+r),d!==a||0!==i&&3!==d.nodeType||(c=o+i),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===r&&(l=o),f===a&&++h===i&&(c=o),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Wt=!1,il=t;null!==il;)if(e=(t=il).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,il=e;else for(;null!==il;){t=il;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:so(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(To){Ic(t,t.return,To)}if(null!==(e=t.sibling)){e.return=t.return,il=e;break}il=t.return}g=al,al=!1}(e,n),xl(n,e),pi(tr),Wt=!!er,tr=er=null,e.current=n,kl(n,e,r),Qe(),Pl=l,bt=o,Ml.transition=a}else e.current=n;if(Jl&&(Jl=!1,Zl=e,ec=r),a=e.pendingLanes,0===a&&(Xl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),lc(e,Xe()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Yl)throw Yl=!1,e=Ql,Ql=null,e;0!==(1&ec)&&0!==e.tag&&Cc(),a=e.pendingLanes,0!==(1&a)?e===nc?tc++:(tc=0,nc=e):tc=0,Br()}(e,t,n,i)}finally{Ml.transition=r,bt=i}return null}function Cc(){if(null!==Zl){var e=wt(ec),t=Ml.transition,n=bt;try{if(Ml.transition=null,bt=16>e?16:e,null===Zl)var i=!1;else{if(e=Zl,Zl=null,ec=0,0!==(6&Pl))throw Error(s(331));var r=Pl;for(Pl|=4,il=e.current;null!==il;){var a=il,o=a.child;if(0!==(16&il.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(il=u;null!==il;){var h=il;switch(h.tag){case 0:case 11:case 15:ol(8,h,a)}var d=h.child;if(null!==d)d.return=h,il=d;else for(;null!==il;){var f=(h=il).sibling,p=h.return;if(ul(h),h===u){il=null;break}if(null!==f){f.return=p,il=f;break}il=p}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}il=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,il=o;else e:for(;null!==il;){if(0!==(2048&(a=il).flags))switch(a.tag){case 0:case 11:case 15:ol(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,il=y;break e}il=a.return}}var b=e.current;for(il=b;null!==il;){var w=(o=il).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,il=w;else e:for(o=b;null!==il;){if(0!==(2048&(l=il).flags))try{switch(l.tag){case 0:case 11:case 15:ll(9,l)}}catch(na){Ic(l,l.return,na)}if(l===o){il=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,il=x;break e}il=l.return}}if(Pl=r,Br(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(rt,e)}catch(na){}i=!0}return i}finally{bt=n,Ml.transition=t}}return!1}function Nc(e,t,n){e=Vs(e,t=vo(0,t=fo(n,t),1),1),t=sc(),null!==e&&(vt(e,1,t),lc(e,t))}function Ic(e,t,n){if(3===e.tag)Nc(e,e,n);else for(;null!==t;){if(3===t.tag){Nc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Xl||!Xl.has(i))){t=Vs(t,e=yo(t,e=fo(n,e),1),1),e=sc(),null!==t&&(vt(t,1,e),lc(t,e));break}}t=t.return}}function Dc(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=sc(),e.pingedLanes|=e.suspendedLanes&n,Rl===e&&(Ol&n)===n&&(4===Ul||3===Ul&&(130023424&Ol)===Ol&&500>Xe()-ql?vc(e,0):$l|=n),lc(e,t)}function Ac(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=sc();null!==(e=Rs(e,t))&&(vt(e,t,n),lc(e,n))}function Mc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ac(e,n)}function Pc(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(t),Ac(e,n)}function Rc(e,t){return Ke(e,t)}function jc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,i){return new jc(e,t,n,i)}function Lc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fc(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Uc(e,t,n,i,r,a){var o=2;if(i=e,"function"===typeof e)Lc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Vc(n.children,r,a,t);case S:o=8,r|=8;break;case E:return(e=Oc(12,n,t,2|r)).elementType=E,e.lanes=a,e;case I:return(e=Oc(13,n,t,r)).elementType=I,e.lanes=a,e;case D:return(e=Oc(19,n,t,r)).elementType=D,e.lanes=a,e;case P:return zc(n,r,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:o=10;break e;case C:o=9;break e;case N:o=11;break e;case A:o=14;break e;case M:o=16,i=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Oc(o,n,t,r)).elementType=e,t.type=i,t.lanes=a,t}function Vc(e,t,n,i){return(e=Oc(7,e,i,t)).lanes=n,e}function zc(e,t,n,i){return(e=Oc(22,e,i,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Bc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function $c(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wc(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Hc(e,t,n,i,r,s,a,o,l){return e=new Wc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Oc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Os(s),e}function qc(e){if(!e)return Cr;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Mr(n))return jr(e,n,t)}return t}function Kc(e,t,n,i,r,s,a,o,l){return(e=Hc(n,i,!0,e,0,s,0,o,l)).context=qc(null),n=e.current,(s=Fs(i=sc(),r=ac(n))).callback=void 0!==t&&null!==t?t:null,Vs(n,s,r),e.current.lanes=r,vt(e,r,i),lc(e,i),e}function Gc(e,t,n,i){var r=t.current,s=sc(),a=ac(r);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,a)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Vs(r,t,a))&&(oc(e,r,a,s),zs(e,r,a)),a}function Yc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xc(e,t){Qc(e,t),(e=e.alternate)&&Qc(e,t)}Nl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ir.current)ko=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ko=!1,function(e,t,n){switch(t.tag){case 3:Ro(t),fs();break;case 5:ea(t);break;case 1:Mr(t.type)&&Or(t);break;case 4:Xs(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Tr(_s,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Tr(ia,1&ia.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Bo(e,t,n):(Tr(ia,1&ia.current),null!==(e=Yo(e,t,n))?e.sibling:null);Tr(ia,1&ia.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Ko(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Tr(ia,ia.current),i)break;return null;case 22:case 23:return t.lanes=0,Io(e,t,n)}return Yo(e,t,n)}(e,t,n);ko=0!==(131072&e.flags)}else ko=!1,rs&&0!==(1048576&t.flags)&&Zr(t,qr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Go(e,t),e=t.pendingProps;var r=Ar(t,Nr.current);Is(t,n),r=ba(null,t,i,e,r,n);var a=wa();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mr(i)?(a=!0,Or(t)):a=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Os(t),r.updater=oo,t.stateNode=r,r._reactInternals=t,ho(t,i,e,n),t=Po(null,t,i,!0,a,n)):(t.tag=0,rs&&a&&es(t),So(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Go(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Lc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===A)return 14}return 2}(i),e=so(i,e),r){case 0:t=Ao(null,t,i,e,n);break e;case 1:t=Mo(null,t,i,e,n);break e;case 11:t=Eo(null,t,i,e,n);break e;case 14:t=Co(null,t,i,so(i.type,e),n);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Ao(e,t,i,r=t.elementType===i?r:so(i,r),n);case 1:return i=t.type,r=t.pendingProps,Mo(e,t,i,r=t.elementType===i?r:so(i,r),n);case 3:e:{if(Ro(t),null===e)throw Error(s(387));i=t.pendingProps,r=(a=t.memoizedState).element,Ls(e,t),Ws(t,i,null,n);var o=t.memoizedState;if(i=o.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=jo(e,t,i,n,r=fo(Error(s(423)),t));break e}if(i!==r){t=jo(e,t,i,n,r=fo(Error(s(424)),t));break e}for(is=cr(t.stateNode.containerInfo.firstChild),ns=t,rs=!0,ss=null,n=xs(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),i===r){t=Yo(e,t,n);break e}So(e,t,i,n)}t=t.child}return t;case 5:return ea(t),null===e&&cs(t),i=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,o=r.children,nr(i,r)?o=null:null!==a&&nr(i,a)&&(t.flags|=32),Do(e,t),So(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Bo(e,t,n);case 4:return Xs(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=ws(t,null,i,n):So(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,Eo(e,t,i,r=t.elementType===i?r:so(i,r),n);case 7:return So(e,t,t.pendingProps,n),t.child;case 8:case 12:return So(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,a=t.memoizedProps,o=r.value,Tr(_s,i._currentValue),i._currentValue=o,null!==a)if(oi(a.value,o)){if(a.children===r.children&&!Ir.current){t=Yo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===a.tag){(c=Fs(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ns(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ns(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}So(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Is(t,n),i=i(r=Ds(r)),t.flags|=1,So(e,t,i,n),t.child;case 14:return r=so(i=t.type,t.pendingProps),Co(e,t,i,r=so(i.type,r),n);case 15:return No(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:so(i,r),Go(e,t),t.tag=1,Mr(i)?(e=!0,Or(t)):e=!1,Is(t,n),co(t,i,r),ho(t,i,r,n),Po(null,t,i,!0,e,n);case 19:return Ko(e,t,n);case 22:return Io(e,t,n)}throw Error(s(156,t.tag))};var Jc="function"===typeof reportError?reportError:function(e){console.error(e)};function Zc(e){this._internalRoot=e}function eu(e){this._internalRoot=e}function tu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function nu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function iu(){}function ru(e,t,n,i,r){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof r){var o=r;r=function(){var e=Yc(a);o.call(e)}}Gc(t,a,e,r)}else a=function(e,t,n,i,r){if(r){if("function"===typeof i){var s=i;i=function(){var e=Yc(a);s.call(e)}}var a=Kc(t,i,e,0,null,!1,0,"",iu);return e._reactRootContainer=a,e[pr]=a.current,Bi(8===e.nodeType?e.parentNode:e),gc(),a}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var o=i;i=function(){var e=Yc(l);o.call(e)}}var l=Hc(e,0,!1,null,0,!1,0,"",iu);return e._reactRootContainer=l,e[pr]=l.current,Bi(8===e.nodeType?e.parentNode:e),gc((function(){Gc(t,l,n,i)})),l}(n,t,e,r,i);return Yc(a)}eu.prototype.render=Zc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Gc(e,t,null,null)},eu.prototype.unmount=Zc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;gc((function(){Gc(null,e,null,null)})),t[pr]=null}},eu.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Lt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),lc(t,Xe()),0===(6&Pl)&&(Kl=Xe()+500,Br()))}break;case 13:gc((function(){var t=Rs(e,1);if(null!==t){var n=sc();oc(t,e,1,n)}})),Xc(e,1)}},_t=function(e){if(13===e.tag){var t=Rs(e,134217728);if(null!==t)oc(t,e,134217728,sc());Xc(e,134217728)}},kt=function(e){if(13===e.tag){var t=ac(e),n=Rs(e,t);if(null!==n)oc(n,e,t,sc());Xc(e,t)}},St=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=xr(i);if(!r)throw Error(s(90));K(i),J(i,r)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ne=pc,Ie=gc;var su={usingClientEntryPoint:!1,Events:[br,wr,xr,Te,Ce,pc]},ou={findFiberByHostInstance:yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lu={bundleType:ou.bundleType,version:ou.version,rendererPackageName:ou.rendererPackageName,rendererConfig:ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:ou.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cu.isDisabled&&cu.supportsFiber)try{rt=cu.inject(lu),st=cu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=su,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!tu(t))throw Error(s(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!tu(e))throw Error(s(299));var n=!1,i="",r=Jc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Hc(e,1,!1,null,0,n,0,i,r),e[pr]=t.current,Bi(8===e.nodeType?e.parentNode:e),new Zc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return gc(e)},t.hydrate=function(e,t,n){if(!nu(t))throw Error(s(200));return ru(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!tu(e))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,a="",o=Jc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Kc(t,null,e,1,null!=n?n:null,r,0,a,o),e[pr]=t.current,Bi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new eu(t)},t.render=function(e,t,n){if(!nu(t))throw Error(s(200));return ru(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!nu(e))throw Error(s(40));return!!e._reactRootContainer&&(gc((function(){ru(null,null,e,!1,(function(){e._reactRootContainer=null,e[pr]=null}))})),!0)},t.unstable_batchedUpdates=pc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!nu(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return ru(e,t,n,!1,i)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var s=Object.create(null);n.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&r&&i;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>a[e]=()=>i[e]));return a.default=()=>i,n.d(s,a),s}})(),n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i,r=n(43),s=n.t(r,2),a=n(391);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(i||(i={}));const l="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function h(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t,n,i){return void 0===n&&(n=null),o({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?p(t):t,{state:n,key:t&&t.key||i||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function p(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function g(e,t,n,r){void 0===r&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,u=s.history,p=i.Pop,g=null,m=v();function v(){return(u.state||{idx:null}).idx}function y(){p=i.Pop;let e=v(),t=null==e?null:e-m;m=e,g&&g({action:p,location:w.location,delta:t})}function b(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:f(e);return n=n.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,u.replaceState(o({},u.state,{idx:m}),""));let w={get action(){return p},get location(){return e(s,u)},listen(e){if(g)throw new Error("A history only accepts one active listener");return s.addEventListener(l,y),g=e,()=>{s.removeEventListener(l,y),g=null}},createHref:e=>t(s,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){p=i.Push;let r=d(w.location,e,t);n&&n(r,e),m=v()+1;let o=h(r,m),l=w.createHref(r);try{u.pushState(o,"",l)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;s.location.assign(l)}a&&g&&g({action:p,location:w.location,delta:1})},replace:function(e,t){p=i.Replace;let r=d(w.location,e,t);n&&n(r,e),m=v();let s=h(r,m),o=w.createHref(r);u.replaceState(s,"",o),a&&g&&g({action:p,location:w.location,delta:0})},go:e=>u.go(e)};return w}var m;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(m||(m={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){return void 0===n&&(n="/"),y(e,t,n,!1)}function y(e,t,n,i){let r=M(("string"===typeof t?p(t):t).pathname||"/",n);if(null==r)return null;let s=b(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let a=null;for(let o=0;null==a&&o<s.length;++o){let e=A(r);a=I(s[o],e,i)}return a}function b(e,t,n,i){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===i&&(i="");let r=(e,r,s)=>{let a={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};a.relativePath.startsWith("/")&&(c(a.relativePath.startsWith(i),'Absolute route path "'+a.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(i.length));let o=L([i,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),b(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:N(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let i of w(e.path))r(e,t,i);else r(e,t)})),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[n,...i]=t,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===i.length)return r?[s,""]:[s];let a=w(i.join("/")),o=[];return o.push(...a.map((e=>""===e?s:[s,e].join("/")))),r&&o.push(...a),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const x=/^:[\w-]+$/,_=3,k=2,S=1,E=10,T=-2,C=e=>"*"===e;function N(e,t){let n=e.split("/"),i=n.length;return n.some(C)&&(i+=T),t&&(i+=k),n.filter((e=>!C(e))).reduce(((e,t)=>e+(x.test(t)?_:""===t?S:E)),i)}function I(e,t,n){void 0===n&&(n=!1);let{routesMeta:i}=e,r={},s="/",a=[];for(let o=0;o<i.length;++o){let e=i[o],l=o===i.length-1,c="/"===s?t:t.slice(s.length)||"/",u=D({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!i[i.length-1].route.index&&(u=D({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(r,u.params),a.push({params:r,pathname:L([s,u.pathname]),pathnameBase:F(L([s,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(s=L([s,u.pathnameBase]))}return a}function D(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(i.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(i.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))");let s=new RegExp(r,t?void 0:"i");return[s,i]}(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1),l=i.reduce(((e,t,n)=>{let{paramName:i,isOptional:r}=t;if("*"===i){let e=o[n]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[i]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:s,pathnameBase:a,pattern:e}}function A(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function M(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function P(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function R(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function j(e,t){let n=R(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function O(e,t,n,i){let r;void 0===i&&(i=!1),"string"===typeof e?r=p(e):(r=o({},e),c(!r.pathname||!r.pathname.includes("?"),P("?","pathname","search",r)),c(!r.pathname||!r.pathname.includes("#"),P("#","pathname","hash",r)),c(!r.search||!r.search.includes("#"),P("#","search","hash",r)));let s,a=""===e||""===r.pathname,l=a?"/":r.pathname;if(null==l)s=n;else{let e=t.length-1;if(!i&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}s=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:i="",hash:r=""}="string"===typeof e?p(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:U(i),hash:V(r)}}(r,s),h=l&&"/"!==l&&l.endsWith("/"),d=(a||"."===l)&&n.endsWith("/");return u.pathname.endsWith("/")||!h&&!d||(u.pathname+="/"),u}const L=e=>e.join("/").replace(/\/\/+/g,"/"),F=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),U=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",V=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],$=(new Set(B),["get",...B]);new Set($),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},W.apply(this,arguments)}const H=r.createContext(null);const q=r.createContext(null);const K=r.createContext(null);const G=r.createContext(null);const Y=r.createContext({outlet:null,matches:[],isDataRoute:!1});const Q=r.createContext(null);function X(){return null!=r.useContext(G)}function J(){return X()||c(!1),r.useContext(G).location}function Z(e){r.useContext(K).static||r.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=r.useContext(Y);return e?function(){let{router:e}=ue(le.UseNavigateStable),t=de(ce.UseNavigateStable),n=r.useRef(!1);Z((()=>{n.current=!0}));let i=r.useCallback((function(i,r){void 0===r&&(r={}),n.current&&("number"===typeof i?e.navigate(i):e.navigate(i,W({fromRouteId:t},r)))}),[e,t]);return i}():function(){X()||c(!1);let e=r.useContext(H),{basename:t,future:n,navigator:i}=r.useContext(K),{matches:s}=r.useContext(Y),{pathname:a}=J(),o=JSON.stringify(j(s,n.v7_relativeSplatPath)),l=r.useRef(!1);Z((()=>{l.current=!0}));let u=r.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let s=O(n,JSON.parse(o),a,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:L([t,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[t,i,o,a,e]);return u}()}function te(e,t){let{relative:n}=void 0===t?{}:t,{future:i}=r.useContext(K),{matches:s}=r.useContext(Y),{pathname:a}=J(),o=JSON.stringify(j(s,i.v7_relativeSplatPath));return r.useMemo((()=>O(e,JSON.parse(o),a,"path"===n)),[e,o,a,n])}function ne(e,t,n,s){X()||c(!1);let{navigator:a,static:o}=r.useContext(K),{matches:l}=r.useContext(Y),u=l[l.length-1],h=u?u.params:{},d=(u&&u.pathname,u?u.pathnameBase:"/");u&&u.route;let f,g=J();if(t){var m;let e="string"===typeof t?p(t):t;"/"===d||(null==(m=e.pathname)?void 0:m.startsWith(d))||c(!1),f=e}else f=g;let y=f.pathname||"/",b=y;if("/"!==d){let e=d.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=!o&&n&&n.matches&&n.matches.length>0?n.matches:v(e,{pathname:b});let x=oe(w&&w.map((e=>Object.assign({},e,{params:Object.assign({},h,e.params),pathname:L([d,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:L([d,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),l,n,s);return t&&x?r.createElement(G.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:i.Pop}},x):x}function ie(){let e=function(){var e;let t=r.useContext(Q),n=he(ce.UseRouteError),i=de(ce.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const re=r.createElement(ie,null);class se extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(Y.Provider,{value:this.props.routeContext},r.createElement(Q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ae(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(H);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(Y.Provider,{value:t},i)}function oe(e,t,n,i){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=i)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=o.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||c(!1),o=o.slice(0,Math.min(o.length,e+1))}let u=!1,h=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<o.length;r++){let e=o[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=r),e.route.id){let{loaderData:t,errors:i}=n,r=e.route.loader&&void 0===t[e.route.id]&&(!i||void 0===i[e.route.id]);if(e.route.lazy||r){u=!0,o=h>=0?o.slice(0,h+1):[o[0]];break}}}return o.reduceRight(((e,i,s)=>{let a,c=!1,d=null,f=null;var p;n&&(a=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||re,u&&(h<0&&0===s?(p="route-fallback",!1||fe[p]||(fe[p]=!0),c=!0,f=null):h===s&&(c=!0,f=i.route.hydrateFallbackElement||null)));let g=t.concat(o.slice(0,s+1)),m=()=>{let t;return t=a?d:c?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(ae,{match:i,routeContext:{outlet:e,matches:g,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?r.createElement(se,{location:n.location,revalidation:n.revalidation,component:d,error:a,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()}),null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),ce=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ce||{});function ue(e){let t=r.useContext(H);return t||c(!1),t}function he(e){let t=r.useContext(q);return t||c(!1),t}function de(e){let t=function(){let e=r.useContext(Y);return e||c(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||c(!1),n.route.id}const fe={};function pe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function ge(e){let{to:t,replace:n,state:i,relative:s}=e;X()||c(!1);let{future:a,static:o}=r.useContext(K),{matches:l}=r.useContext(Y),{pathname:u}=J(),h=ee(),d=O(t,j(l,a.v7_relativeSplatPath),u,"path"===s),f=JSON.stringify(d);return r.useEffect((()=>h(JSON.parse(f),{replace:n,state:i,relative:s})),[h,f,s,n,i]),null}function me(e){c(!1)}function ve(e){let{basename:t="/",children:n=null,location:s,navigationType:a=i.Pop,navigator:o,static:l=!1,future:u}=e;X()&&c(!1);let h=t.replace(/^\/*/,"/"),d=r.useMemo((()=>({basename:h,navigator:o,static:l,future:W({v7_relativeSplatPath:!1},u)})),[h,u,o,l]);"string"===typeof s&&(s=p(s));let{pathname:f="/",search:g="",hash:m="",state:v=null,key:y="default"}=s,b=r.useMemo((()=>{let e=M(f,h);return null==e?null:{location:{pathname:e,search:g,hash:m,state:v,key:y},navigationType:a}}),[h,f,g,m,v,y,a]);return null==b?null:r.createElement(K.Provider,{value:d},r.createElement(G.Provider,{children:n,value:b}))}function ye(e){let{children:t,location:n}=e;return ne(be(t),n)}new Promise((()=>{}));r.Component;function be(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,be(e.props.children,s));e.type!==me&&c(!1),e.props.index&&e.props.children&&c(!1);let a={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=be(e.props.children,s)),n.push(a)})),n}var we=n(950),xe=n.t(we,2);function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_e.apply(this,arguments)}function ke(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}function Se(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce(((t,n)=>{let i=e[n];return t.concat(Array.isArray(i)?i.map((e=>[n,e])):[[n,i]])}),[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ee=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(SI){}new Map;const Te=s.startTransition;xe.flushSync,s.useId;function Ce(e){let{basename:t,children:n,future:i,window:s}=e,a=r.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:s,v5Compat:!0})&&(o={}),g((function(e,t){let{pathname:n,search:i,hash:r}=e.location;return d("",{pathname:n,search:i,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:f(t)}),null,o)));let l=a.current,[c,u]=r.useState({action:l.action,location:l.location}),{v7_startTransition:h}=i||{},p=r.useCallback((e=>{h&&Te?Te((()=>u(e))):u(e)}),[u,h]);return r.useLayoutEffect((()=>l.listen(p)),[l,p]),r.useEffect((()=>pe(i)),[i]),r.createElement(ve,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:i})}const Ne="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ie=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,De=r.forwardRef((function(e,t){let n,{onClick:i,relative:s,reloadDocument:a,replace:o,state:l,target:u,to:h,preventScrollReset:d,viewTransition:p}=e,g=ke(e,Ee),{basename:m}=r.useContext(K),v=!1;if("string"===typeof h&&Ie.test(h)&&(n=h,Ne))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=M(t.pathname,m);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:v=!0}catch(SI){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;X()||c(!1);let{basename:i,navigator:s}=r.useContext(K),{hash:a,pathname:o,search:l}=te(e,{relative:n}),u=o;return"/"!==i&&(u="/"===o?i:L([i,o])),s.createHref({pathname:u,search:l,hash:a})}(h,{relative:s}),b=function(e,t){let{target:n,replace:i,state:s,preventScrollReset:a,relative:o,viewTransition:l}=void 0===t?{}:t,c=ee(),u=J(),h=te(e,{relative:o});return r.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:f(u)===f(h);c(e,{replace:n,state:s,preventScrollReset:a,relative:o,viewTransition:l})}}),[u,c,h,i,s,n,e,a,o,l])}(h,{replace:o,state:l,target:u,preventScrollReset:d,relative:s,viewTransition:p});return r.createElement("a",_e({},g,{href:n||y,onClick:v||a?i:function(e){i&&i(e),e.defaultPrevented||b(e)},ref:t,target:u}))}));var Ae,Me;function Pe(e){let t=r.useRef(Se(e)),n=r.useRef(!1),i=J(),s=r.useMemo((()=>function(e,t){let n=Se(e);return t&&t.forEach(((e,i)=>{n.has(i)||t.getAll(i).forEach((e=>{n.append(i,e)}))})),n}(i.search,n.current?null:t.current)),[i.search]),a=ee(),o=r.useCallback(((e,t)=>{const i=Se("function"===typeof e?e(s):e);n.current=!0,a("?"+i,t)}),[a,s]);return[s,o]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ae||(Ae={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Me||(Me={}));const Re=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296===(64512&r)&&i+1<e.length&&56320===(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},je={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const t=e[r],s=r+1<e.length,a=s?e[r+1]:0,o=r+2<e.length,l=o?e[r+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let h=(15&a)<<2|l>>6,d=63&l;o||(d=64,s||(h=64)),i.push(n[c],n[u],n[h],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Re(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],s=r<e.length?n[e.charAt(r)]:0;++r;const a=r<e.length?n[e.charAt(r)]:64;++r;const o=r<e.length?n[e.charAt(r)]:64;if(++r,null==t||null==s||null==a||null==o)throw new Oe;const l=t<<2|s>>4;if(i.push(l),64!==a){const e=s<<4&240|a>>2;if(i.push(e),64!==o){const e=a<<6&192|o;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Oe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Le=function(e){return function(e){const t=Re(e);return je.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Fe=function(e){try{return je.decodeString(e,!0)}catch(SI){console.error("base64Decode failed: ",SI)}return null};const Ue=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Ve=()=>{try{return Ue()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/GaitRehab",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(SI){return}const t=e&&Fe(e[1]);return t&&JSON.parse(t)})()}catch(SI){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${SI}`)}},ze=e=>{var t,n;return null===(n=null===(t=Ve())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Be=e=>{const t=ze(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),i]:[t.substring(0,n),i]},$e=()=>{var e;return null===(e=Ve())||void 0===e?void 0:e.config},We=e=>{var t;return null===(t=Ve())||void 0===t?void 0:t[`_${e}`]};class He{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function qe(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Le(JSON.stringify({alg:"none",type:"JWT"})),Le(JSON.stringify(s)),""].join(".")}function Ke(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ge(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Ye(){try{return"object"===typeof indexedDB}catch(SI){return!1}}function Qe(){return new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))}class Xe extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Xe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Je.prototype.create)}}class Je{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,i=this.errors[e],r=i?function(e,t){return e.replace(Ze,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(i,t):"Error",s=`${this.serviceName}: ${r} (${n}).`;return new Xe(n,s,t)}}const Ze=/\{\$([^}]+)}/g;function et(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(tt(n)&&tt(s)){if(!et(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function tt(e){return null!==e&&"object"===typeof e}function nt(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function it(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}})),t}function rt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class st{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=at),void 0===i.error&&(i.error=at),void 0===i.complete&&(i.complete=at);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(SI){}})),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(SI){"undefined"!==typeof console&&console.error&&console.error(SI)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function at(){}function ot(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),i=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+i)}function lt(e){return e&&e._delegate?e._delegate:e}class ct{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ut="[DEFAULT]";class ht{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new He;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(SI){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),i=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(SI){if(i)return null;throw SI}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ut})}catch(SI){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(SI){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&s.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(i){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===ut?void 0:r),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(s){}var r;return i||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut;return this.component?this.component.multipleInstances?e:ut:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class dt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ht(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ft=[];var pt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(pt||(pt={}));const gt={debug:pt.DEBUG,verbose:pt.VERBOSE,info:pt.INFO,warn:pt.WARN,error:pt.ERROR,silent:pt.SILENT},mt=pt.INFO,vt={[pt.DEBUG]:"log",[pt.VERBOSE]:"log",[pt.INFO]:"info",[pt.WARN]:"warn",[pt.ERROR]:"error"},yt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),i=vt[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a];console[i](`[${n}]  ${e.name}:`,...s)};class bt{constructor(e){this.name=e,this._logLevel=mt,this._logHandler=yt,this._userLogHandler=null,ft.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?gt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pt.DEBUG,...t),this._logHandler(this,pt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pt.VERBOSE,...t),this._logHandler(this,pt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pt.INFO,...t),this._logHandler(this,pt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pt.WARN,...t),this._logHandler(this,pt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pt.ERROR,...t),this._logHandler(this,pt.ERROR,...t)}}let wt,xt;const _t=new WeakMap,kt=new WeakMap,St=new WeakMap,Et=new WeakMap,Tt=new WeakMap;let Ct={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return kt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||St.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Nt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(xt||(xt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(At(this),n),Dt(_t.get(this))}:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Dt(e.apply(At(this),n))}:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];const s=e.call(At(this),t,...i);return St.set(s,t.sort?t.sort():[t]),Dt(s)}}function It(e){return"function"===typeof e?Nt(e):(e instanceof IDBTransaction&&function(e){if(kt.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)}));kt.set(e,t)}(e),t=e,(wt||(wt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Ct):e);var t}function Dt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(Dt(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&_t.set(t,e)})).catch((()=>{})),Tt.set(t,e),t}(e);if(Et.has(e))return Et.get(e);const t=It(e);return t!==e&&(Et.set(e,t),Tt.set(t,e)),t}const At=e=>Tt.get(e);const Mt=["get","getKey","getAll","getAllKeys","count"],Pt=["put","add","delete","clear"],Rt=new Map;function jt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Rt.get(t))return Rt.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=Pt.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!Mt.includes(n))return;const s=async function(e){const t=this.transaction(e,r?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return i&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),r&&t.done]))[0]};return Rt.set(t,s),s}!function(e){Ct=e(Ct)}((e=>({...e,get:(t,n,i)=>jt(t,n)||e.get(t,n,i),has:(t,n)=>!!jt(t,n)||e.has(t,n)})));class Ot{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Lt="@firebase/app",Ft="0.9.13",Ut=new bt("@firebase/app"),Vt="@firebase/app-compat",zt="@firebase/analytics-compat",Bt="@firebase/analytics",$t="@firebase/app-check-compat",Wt="@firebase/app-check",Ht="@firebase/auth",qt="@firebase/auth-compat",Kt="@firebase/database",Gt="@firebase/database-compat",Yt="@firebase/functions",Qt="@firebase/functions-compat",Xt="@firebase/installations",Jt="@firebase/installations-compat",Zt="@firebase/messaging",en="@firebase/messaging-compat",tn="@firebase/performance",nn="@firebase/performance-compat",rn="@firebase/remote-config",sn="@firebase/remote-config-compat",an="@firebase/storage",on="@firebase/storage-compat",ln="@firebase/firestore",cn="@firebase/firestore-compat",un="firebase",hn="[DEFAULT]",dn={[Lt]:"fire-core",[Vt]:"fire-core-compat",[Bt]:"fire-analytics",[zt]:"fire-analytics-compat",[Wt]:"fire-app-check",[$t]:"fire-app-check-compat",[Ht]:"fire-auth",[qt]:"fire-auth-compat",[Kt]:"fire-rtdb",[Gt]:"fire-rtdb-compat",[Yt]:"fire-fn",[Qt]:"fire-fn-compat",[Xt]:"fire-iid",[Jt]:"fire-iid-compat",[Zt]:"fire-fcm",[en]:"fire-fcm-compat",[tn]:"fire-perf",[nn]:"fire-perf-compat",[rn]:"fire-rc",[sn]:"fire-rc-compat",[an]:"fire-gcs",[on]:"fire-gcs-compat",[ln]:"fire-fst",[cn]:"fire-fst-compat","fire-js":"fire-js",[un]:"fire-js-all"},fn=new Map,pn=new Map;function gn(e,t){try{e.container.addComponent(t)}catch(SI){Ut.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,SI)}}function mn(e){const t=e.name;if(pn.has(t))return Ut.debug(`There were multiple attempts to register component ${t}.`),!1;pn.set(t,e);for(const n of fn.values())gn(n,e);return!0}function vn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const yn=new Je("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class bn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ct("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yn.create("app-deleted",{appName:this._name})}}const wn="9.23.0";function xn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i=Object.assign({name:hn,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!==typeof r||!r)throw yn.create("bad-app-name",{appName:String(r)});if(n||(n=$e()),!n)throw yn.create("no-options");const s=fn.get(r);if(s){if(et(n,s.options)&&et(i,s.config))return s;throw yn.create("duplicate-app",{appName:r})}const a=new dt(r);for(const l of pn.values())a.addComponent(l);const o=new bn(n,i,a);return fn.set(r,o),o}function _n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn;const t=fn.get(e);if(!t&&e===hn&&$e())return xn();if(!t)throw yn.create("no-app",{appName:e});return t}function kn(e,t,n){var i;let r=null!==(i=dn[e])&&void 0!==i?i:e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=[`Unable to register library "${r}" with version "${t}":`];return s&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Ut.warn(e.join(" "))}mn(new ct(`${r}-version`,(()=>({library:r,version:t})),"VERSION"))}const Sn="firebase-heartbeat-store";let En=null;function Tn(){return En||(En=function(e,t){let{blocked:n,upgrade:i,blocking:r,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=Dt(a);return i&&a.addEventListener("upgradeneeded",(e=>{i(Dt(a.result),e.oldVersion,e.newVersion,Dt(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{s&&e.addEventListener("close",(()=>s())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Sn)}}).catch((e=>{throw yn.create("idb-open",{originalErrorMessage:e.message})}))),En}async function Cn(e,t){try{const n=(await Tn()).transaction(Sn,"readwrite"),i=n.objectStore(Sn);await i.put(t,Nn(e)),await n.done}catch(SI){if(SI instanceof Xe)Ut.warn(SI.message);else{const t=yn.create("idb-set",{originalErrorMessage:null===SI||void 0===SI?void 0:SI.message});Ut.warn(t.message)}}}function Nn(e){return`${e.name}!${e.options.appId}`}class In{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new An(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=Dn();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Dn(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let i=e.slice();for(const r of e){const e=n.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),Mn(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Mn(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=Le(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Dn(){return(new Date).toISOString().substring(0,10)}class An{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Ye()&&Qe().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Tn();return await t.transaction(Sn).objectStore(Sn).get(Nn(e))}catch(SI){if(SI instanceof Xe)Ut.warn(SI.message);else{const t=yn.create("idb-get",{originalErrorMessage:null===SI||void 0===SI?void 0:SI.message});Ut.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Cn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Cn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Mn(e){return Le(JSON.stringify({version:2,heartbeats:e})).length}var Pn;Pn="",mn(new ct("platform-logger",(e=>new Ot(e)),"PRIVATE")),mn(new ct("heartbeat",(e=>new In(e)),"PRIVATE")),kn(Lt,Ft,Pn),kn(Lt,Ft,"esm2017"),kn("fire-js","");kn("firebase","9.23.0","app");function Rn(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function jn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const On=jn,Ln=new Je("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Fn=new bt("@firebase/auth");function Un(e){if(Fn.logLevel<=pt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];Fn.error(`Auth (${wn}): ${e}`,...n)}}function Vn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw $n(e,...n)}function zn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return $n(e,...n)}function Bn(e,t,n){const i=Object.assign(Object.assign({},On()),{[t]:n});return new Je("auth","Firebase",i).create(t,{appName:e.name})}function $n(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if("string"!==typeof e){const t=n[0],i=[...n.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(t,...i)}return Ln.create(e,...n)}function Wn(e,t){if(!e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];throw $n(t,...i)}}function Hn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Un(t),new Error(t)}function qn(e,t){e||Hn(t)}function Kn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Gn(){return"http:"===Yn()||"https:"===Yn()}function Yn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Qn{constructor(e,t){this.shortDelay=e,this.longDelay=t,qn(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Gn()||Ge()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Xn(e,t){qn(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Jn{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Hn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Hn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Hn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Zn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ei=new Qn(3e4,6e4);function ti(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function ni(e,t,n,i){return ii(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let r={},s={};i&&("GET"===t?s=i:r={body:JSON.stringify(i)});const a=nt(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode),Jn.fetch()(si(e,e.config.apiHost,n,a),Object.assign({method:t,headers:o,referrerPolicy:"no-referrer"},r))}))}async function ii(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},Zn),t);try{const t=new ai(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw oi(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=r.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw oi(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw oi(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw oi(e,"user-disabled",s);const o=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Bn(e,o,a);Vn(e,o)}}catch(SI){if(SI instanceof Xe)throw SI;Vn(e,"network-request-failed",{message:String(SI)})}}async function ri(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await ni(e,t,n,i,r);return"mfaPendingCredential"in s&&Vn(e,"multi-factor-auth-required",{_serverResponse:s}),s}function si(e,t,n,i){const r=`${t}${n}?${i}`;return e.config.emulator?Xn(e.config,r):`${e.config.apiScheme}://${r}`}class ai{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(zn(this.auth,"network-request-failed"))),ei.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function oi(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=zn(e,t,i);return r.customData._tokenResponse=n,r}function li(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(SI){}}function ci(e){return 1e3*Number(e)}function ui(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return Un("JWT malformed, contained fewer than 3 sections"),null;try{const e=Fe(n);return e?JSON.parse(e):(Un("Failed to decode base64 JWT payload"),null)}catch(SI){return Un("Caught error parsing JWT payload as JSON",null===SI||void 0===SI?void 0:SI.toString()),null}}async function hi(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(SI){throw SI instanceof Xe&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(SI)&&e.auth.currentUser===e&&await e.auth.signOut(),SI}}class di{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(SI){return void("auth/network-request-failed"===(null===SI||void 0===SI?void 0:SI.code)&&this.schedule(!0))}this.schedule()}}class fi{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=li(this.lastLoginAt),this.creationTime=li(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function pi(e){var t;const n=e.auth,i=await e.getIdToken(),r=await hi(e,async function(e,t){return ni(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:i}));Wn(null===r||void 0===r?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=Rn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const o=(l=e.providerData,c=a,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===o||void 0===o?void 0:o.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new fi(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class gi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Wn(e.idToken,"internal-error"),Wn("undefined"!==typeof e.idToken,"internal-error"),Wn("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=ui(e);return Wn(t,"internal-error"),Wn("undefined"!==typeof t.exp,"internal-error"),Wn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Wn(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(e,t){const n=await ii(e,{},(async()=>{const n=nt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,s=si(e,i,"/v1/token",`key=${r}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Jn.fetch()(s,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,s=new gi;return n&&(Wn("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),i&&(Wn("string"===typeof i,"internal-error",{appName:e}),s.accessToken=i),r&&(Wn("number"===typeof r,"internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new gi,this.toJSON())}_performRefresh(){return Hn("not implemented")}}function mi(e,t){Wn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class vi{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,r=Rn(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new di(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new fi(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await hi(this,this.stsTokenManager.getToken(this.auth,e));return Wn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=lt(e),i=await n.getIdToken(t),r=ui(i);Wn(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"===typeof r.firebase?r.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:li(ci(r.auth_time)),issuedAtTime:li(ci(r.iat)),expirationTime:li(ci(r.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=lt(e);await pi(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Wn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new vi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Wn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await pi(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await hi(this,async function(e,t){return ni(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,s,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,d=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,g=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:_}=t;Wn(y&&_,e,"internal-error");const k=gi.fromJSON(this.name,_);Wn("string"===typeof y,e,"internal-error"),mi(u,e.name),mi(h,e.name),Wn("boolean"===typeof b,e,"internal-error"),Wn("boolean"===typeof w,e,"internal-error"),mi(d,e.name),mi(f,e.name),mi(p,e.name),mi(g,e.name),mi(m,e.name),mi(v,e.name);const S=new vi({uid:y,auth:e,email:h,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:k,createdAt:m,lastLoginAt:v});return x&&Array.isArray(x)&&(S.providerData=x.map((e=>Object.assign({},e)))),g&&(S._redirectEventId=g),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=new gi;i.updateFromServerResponse(t);const r=new vi({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await pi(r),r}}const yi=new Map;function bi(e){qn(e instanceof Function,"Expected a class definition");let t=yi.get(e);return t?(qn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,yi.set(e,t),t)}class wi{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}wi.type="NONE";const xi=wi;function _i(e,t,n){return`firebase:${e}:${t}:${n}`}class ki{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=_i(this.userKey,i.apiKey,r),this.fullPersistenceKey=_i("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?vi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ki(bi(xi),e,n);const i=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let r=i[0]||bi(xi);const s=_i(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){const n=vi._fromJSON(e,t);c!==r&&(a=n),r=c;break}}catch(l){}const o=i.filter((e=>e._shouldAllowMigration));return r._shouldAllowMigration&&o.length?(r=o[0],a&&await r._set(s,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==r)try{await e._remove(s)}catch(l){}}))),new ki(r,e,n)):new ki(r,e,n)}}function Si(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ni(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ei(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Di(t))return"Blackberry";if(Ai(t))return"Webos";if(Ti(t))return"Safari";if((t.includes("chrome/")||Ci(t))&&!t.includes("edge/"))return"Chrome";if(Ii(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Ei(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/firefox\//i.test(e)}function Ti(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ci(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/crios\//i.test(e)}function Ni(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/iemobile/i.test(e)}function Ii(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/android/i.test(e)}function Di(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/blackberry/i.test(e)}function Ai(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/webos/i.test(e)}function Mi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Pi(){return function(){const e=Ke();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Ri(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return Mi(e)||Ii(e)||Ai(e)||Di(e)||/windows phone/i.test(e)||Ni(e)}function ji(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Si(Ke());break;case"Worker":t=`${Si(Ke())}-${e}`;break;default:t=e}const i=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${wn}/${i}`}async function Oi(e,t){return ni(e,"GET","/v2/recaptchaConfig",ti(e,t))}function Li(e){return void 0!==e&&void 0!==e.enterprise}class Fi{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some((e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState))}}function Ui(e){return new Promise(((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=e=>{const t=zn("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(i)}))}function Vi(e){return`__${e}${Math.floor(1e6*Math.random())}`}class zi{constructor(e){this.type="recaptcha-enterprise",this.auth=Hi(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,i){const r=window.grecaptcha;Li(r)?r.enterprise.ready((()=>{r.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,i)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Oi(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((i=>{if(void 0!==i.recaptchaKey){const n=new Fi(i);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((r=>{if(!t&&Li(window.grecaptcha))n(r,e,i);else{if("undefined"===typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));Ui("https://www.google.com/recaptcha/enterprise.js?render="+r).then((()=>{n(r,e,i)})).catch((e=>{i(e)}))}})).catch((e=>{i(e)}))}))}}async function Bi(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=new zi(e);let s;try{s=await r.verify(n)}catch(o){s=await r.verify(n,!0)}const a=Object.assign({},t);return i?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}class $i{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,i)=>{try{n(e(t))}catch(SI){i(SI)}}));n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(SI){t.reverse();for(const i of t)try{i()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===SI||void 0===SI?void 0:SI.message})}}}class Wi{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qi(this),this.idTokenSubscription=new qi(this),this.beforeStateQueue=new $i(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ln,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=bi(t)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await ki.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(SI){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null===a||void 0===a?void 0:a.user)||(i=a.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(SI){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(SI)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Wn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(SI){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await pi(e)}catch(SI){if("auth/network-request-failed"!==(null===SI||void 0===SI?void 0:SI.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?lt(e):null;return t&&Wn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Wn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(bi(e))}))}async initializeRecaptchaConfig(){const e=await Oi(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new Fi(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new zi(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Je("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&bi(e)||this._popupRedirectResolver;Wn(t,this,"argument-error"),this.redirectPersistenceManager=await ki.create(this,[bi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"===typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return Wn(s,this,"internal-error"),s.then((()=>r(this.currentUser))),"function"===typeof t?e.addObserver(t,n,i):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Wn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ji(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Fn.logLevel<=pt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];Fn.warn(`Auth (${wn}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function Hi(e){return lt(e)}class qi{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new st(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Wn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ki(e,t,n){const i=Hi(e);Wn(i._canInitEmulator,i,"emulator-config-failed"),Wn(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Gi(t),{host:a,port:o}=function(e){const t=Gi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const e=r[1];return{host:e,port:Yi(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:Yi(t)}}}(t),l=null===o?"":`:${o}`;i.config.emulator={url:`${s}//${a}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Gi(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Yi(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Qi{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Hn("not implemented")}_getIdTokenResponse(e){return Hn("not implemented")}_linkToIdToken(e,t){return Hn("not implemented")}_getReauthenticationResolver(e){return Hn("not implemented")}}async function Xi(e,t){return ni(e,"POST","/v1/accounts:update",t)}async function Ji(e,t){return ri(e,"POST","/v1/accounts:signInWithPassword",ti(e,t))}class Zi extends Qi{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Zi(e,t,"password")}static _fromEmailAndCode(e,t){return new Zi(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await Bi(e,n,"signInWithPassword");return Ji(e,t)}return Ji(e,n).catch((async t=>{if("auth/missing-recaptcha-token"===t.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await Bi(e,n,"signInWithPassword");return Ji(e,t)}return Promise.reject(t)}));case"emailLink":return async function(e,t){return ri(e,"POST","/v1/accounts:signInWithEmailLink",ti(e,t))}(e,{email:this._email,oobCode:this._password});default:Vn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Xi(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return ri(e,"POST","/v1/accounts:signInWithEmailLink",ti(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Vn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function er(e,t){return ri(e,"POST","/v1/accounts:signInWithIdp",ti(e,t))}class tr extends Qi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new tr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Vn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,r=Rn(t,["providerId","signInMethod"]);if(!n||!i)return null;const s=new tr(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(e){return er(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,er(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,er(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=nt(t)}return e}}const nr={USER_NOT_FOUND:"user-not-found"};class ir extends Qi{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ir({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ir({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return ri(e,"POST","/v1/accounts:signInWithPhoneNumber",ti(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await ri(e,"POST","/v1/accounts:signInWithPhoneNumber",ti(e,t));if(n.temporaryProof)throw oi(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return ri(e,"POST","/v1/accounts:signInWithPhoneNumber",ti(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),nr)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new ir({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class rr{constructor(e){var t,n,i,r,s,a;const o=it(rt(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=o.mode)&&void 0!==i?i:null);Wn(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(r=o.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=o.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=it(rt(e)).link,n=t?it(rt(t)).deep_link_id:null,i=it(rt(e)).deep_link_id;return(i?it(rt(i)).link:null)||i||n||t||e}(e);try{return new rr(t)}catch(n){return null}}}class sr{constructor(){this.providerId=sr.PROVIDER_ID}static credential(e,t){return Zi._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=rr.parseLink(t);return Wn(n,"argument-error"),Zi._fromEmailAndCode(e,n.code,n.tenantId)}}sr.PROVIDER_ID="password",sr.EMAIL_PASSWORD_SIGN_IN_METHOD="password",sr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ar{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class or extends ar{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class lr extends or{constructor(){super("facebook.com")}static credential(e){return tr._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return lr.credential(t.oauthAccessToken)}catch(n){return null}}}lr.FACEBOOK_SIGN_IN_METHOD="facebook.com",lr.PROVIDER_ID="facebook.com";class cr extends or{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return tr._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return cr.credential(n,i)}catch(r){return null}}}cr.GOOGLE_SIGN_IN_METHOD="google.com",cr.PROVIDER_ID="google.com";class ur extends or{constructor(){super("github.com")}static credential(e){return tr._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ur.credential(t.oauthAccessToken)}catch(n){return null}}}ur.GITHUB_SIGN_IN_METHOD="github.com",ur.PROVIDER_ID="github.com";class hr extends or{constructor(){super("twitter.com")}static credential(e,t){return tr._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return hr.credential(n,i)}catch(r){return null}}}async function dr(e,t){return ri(e,"POST","/v1/accounts:signUp",ti(e,t))}hr.TWITTER_SIGN_IN_METHOD="twitter.com",hr.PROVIDER_ID="twitter.com";class fr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=await vi._fromIdTokenResponse(e,n,i),s=pr(n);return new fr({user:r,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=pr(n);return new fr({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function pr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class gr extends Xe{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,gr.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new gr(e,t,n,i)}}function mr(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw gr._fromErrorAndOperation(e,n,t,i);throw n}))}async function vr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=await hi(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return fr._forOperation(e,"link",i)}async function yr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:i}=e,r="reauthenticate";try{const s=await hi(e,mr(i,r,t,e),n);Wn(s.idToken,i,"internal-error");const a=ui(s.idToken);Wn(a,i,"internal-error");const{sub:o}=a;return Wn(e.uid===o,i,"user-mismatch"),fr._forOperation(e,r,s)}catch(SI){throw"auth/user-not-found"===(null===SI||void 0===SI?void 0:SI.code)&&Vn(i,"user-mismatch"),SI}}async function br(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i="signIn",r=await mr(e,i,t),s=await fr._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}async function wr(e,t){return br(Hi(e),t)}async function xr(e,t,n){var i;const r=Hi(e),s={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let a;if(null===(i=r._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){const e=await Bi(r,s,"signUpPassword");a=dr(r,e)}else a=dr(r,s).catch((async e=>{if("auth/missing-recaptcha-token"===e.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await Bi(r,s,"signUpPassword");return dr(r,e)}return Promise.reject(e)}));const o=await a.catch((e=>Promise.reject(e))),l=await fr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}async function _r(e,t){let{displayName:n,photoURL:i}=t;if(void 0===n&&void 0===i)return;const r=lt(e),s={idToken:await r.getIdToken(),displayName:n,photoUrl:i,returnSecureToken:!0},a=await hi(r,async function(e,t){return ni(e,"POST","/v1/accounts:update",t)}(r.auth,s));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const o=r.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}async function kr(e,t,n){const{auth:i}=e,r={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(r.email=t),n&&(r.password=n);const s=await hi(e,Xi(i,r));await e._updateTokensIfNecessary(s,!0)}new WeakMap;const Sr="__sak";class Er{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sr,"1"),this.storage.removeItem(Sr),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Tr extends Er{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Ke();return Ti(e)||Mi(e)}()&&function(){try{return!(!window||window===window.top)}catch(SI){return!1}}(),this.fallbackToPolling=Ri(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);Pi()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Tr.type="LOCAL";const Cr=Tr;class Nr extends Er{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Nr.type="SESSION";const Ir=Nr;class Dr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Dr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:r}=t.data,s=this.handlersMap[i];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const a=Array.from(s).map((async e=>e(t.origin,r))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ar(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let i=0;i<t;i++)n+=Math.floor(10*Math.random());return e+n}Dr.receivers=[];class Mr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const i="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((a,o)=>{const l=Ar("",20);i.port1.start();const c=setTimeout((()=>{o(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),r=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),a(t.data.response);break;default:clearTimeout(c),clearTimeout(r),o(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Pr(){return window}function Rr(){return"undefined"!==typeof Pr().WorkerGlobalScope&&"function"===typeof Pr().importScripts}const jr="firebaseLocalStorageDb",Or="firebaseLocalStorage",Lr="fbase_key";class Fr{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Ur(e,t){return e.transaction([Or],t?"readwrite":"readonly").objectStore(Or)}function Vr(){const e=indexedDB.open(jr,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Or,{keyPath:Lr})}catch(SI){n(SI)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Or)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(jr);return new Fr(e).toPromise()}(),t(await Vr()))}))}))}async function zr(e,t,n){const i=Ur(e,!0).put({[Lr]:t,value:n});return new Fr(i).toPromise()}function Br(e,t){const n=Ur(e,!0).delete(t);return new Fr(n).toPromise()}class $r{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Vr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(SI){if(t++>3)throw SI;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Rr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dr._getInstance(Rr()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Mr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vr();return await zr(e,Sr,"1"),await Br(e,Sr),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>zr(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Ur(e,!1).get(t),i=await new Fr(n).toPromise();return void 0===i?null:i.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Br(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Ur(e,!1).getAll();return new Fr(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}$r.type="LOCAL";const Wr=$r;Vi("rcb"),new Qn(3e4,6e4);const Hr="recaptcha";async function qr(e,t,n){var i;const r=await n.verify();try{let s;if(Wn("string"===typeof r,e,"argument-error"),Wn(n.type===Hr,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Wn("enroll"===t.type,e,"internal-error");const n=await function(e,t){return ni(e,"POST","/v2/accounts/mfaEnrollment:start",ti(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{Wn("signin"===t.type,e,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;Wn(n,e,"missing-multi-factor-info");const a=await function(e,t){return ni(e,"POST","/v2/accounts/mfaSignIn:start",ti(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return ni(e,"POST","/v1/accounts:sendVerificationCode",ti(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:r});return t}}finally{n._reset()}}class Kr{constructor(e){this.providerId=Kr.PROVIDER_ID,this.auth=Hi(e)}verifyPhoneNumber(e,t){return qr(this.auth,e,lt(t))}static credential(e,t){return ir._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Kr.credentialFromTaggedObject(t)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:i}=t;return n&&i?ir._fromTokenResponse(n,i):null}}function Gr(e,t){return t?bi(t):(Wn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Kr.PROVIDER_ID="phone",Kr.PHONE_SIGN_IN_METHOD="phone";class Yr extends Qi{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return er(e,this._buildIdpRequest())}_linkToIdToken(e,t){return er(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return er(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Qr(e){return br(e.auth,new Yr(e),e.bypassAuthState)}function Xr(e){const{auth:t,user:n}=e;return Wn(n,t,"internal-error"),yr(n,new Yr(e),e.bypassAuthState)}async function Jr(e){const{auth:t,user:n}=e;return Wn(n,t,"internal-error"),vr(n,new Yr(e),e.bypassAuthState)}class Zr{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(SI){this.reject(SI)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(SI){this.reject(SI)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Qr;case"linkViaPopup":case"linkViaRedirect":return Jr;case"reauthViaPopup":case"reauthViaRedirect":return Xr;default:Vn(this.auth,"internal-error")}}resolve(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const es=new Qn(2e3,1e4);class ts extends Zr{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,ts.currentPopupAction&&ts.currentPopupAction.cancel(),ts.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Wn(e,this.auth,"internal-error"),e}async onExecution(){qn(1===this.filter.length,"Popup operations only handle one event");const e=Ar();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(zn(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ts.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(zn(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,es.get())};e()}}ts.currentPopupAction=null;const ns=new Map;class is extends Zr{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=ns.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=as(t),i=ss(e);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(SI){e=()=>Promise.reject(SI)}ns.set(this.auth._key(),e)}return this.bypassAuthState||ns.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function rs(e,t){ns.set(e._key(),t)}function ss(e){return bi(e._redirectPersistence)}function as(e){return _i("pendingRedirect",e.config.apiKey,e.name)}async function os(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=Hi(e),r=Gr(i,t),s=new is(i,r,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}class ls{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return us(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!us(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(zn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(cs(e))}saveEventToCache(e){this.cachedEventUids.add(cs(e)),this.lastProcessedEventTime=Date.now()}}function cs(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function us(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const hs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ds=/^https?/;async function fs(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return ni(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const i of t)try{if(ps(i))return}catch(n){}Vn(e,"unauthorized-domain")}function ps(e){const t=Kn(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!ds.test(n))return!1;if(hs.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const gs=new Qn(3e4,6e4);function ms(){const e=Pr().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let vs=null;function ys(e){return vs=vs||function(e){return new Promise(((t,n)=>{var i,r,s;function a(){ms(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ms(),n(zn(e,"network-request-failed"))},timeout:gs.get()})}if(null===(r=null===(i=Pr().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Pr().gapi)||void 0===s?void 0:s.load)){const t=Vi("iframefcb");return Pr()[t]=()=>{gapi.load?a():n(zn(e,"network-request-failed"))},Ui(`https://apis.google.com/js/api.js?onload=${t}`).catch((e=>n(e)))}a()}})).catch((e=>{throw vs=null,e}))}(e),vs}const bs=new Qn(5e3,15e3),ws={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _s(e){const t=e.config;Wn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Xn(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,i={apiKey:t.apiKey,appName:e.name,v:wn},r=xs.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${nt(i).slice(1)}`}const ks={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ss{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(SI){}}}function Es(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let o="";const l=Object.assign(Object.assign({},ks),{width:i.toString(),height:r.toString(),top:s,left:a}),c=Ke().toLowerCase();n&&(o=Ci(c)?"_blank":n),Ei(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,i]=t;return`${e}${n}=${i},`}),"");if(function(){var e;return Mi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",o),new Ss(null);const h=window.open(t||"",o,u);Wn(h,e,"popup-blocked");try{h.focus()}catch(SI){}return new Ss(h)}const Ts="__/auth/handler",Cs="emulator/auth/handler",Ns=encodeURIComponent("fac");async function Is(e,t,n,i,r,s){Wn(e.config.authDomain,e,"auth-domain-config-required"),Wn(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:wn,eventId:r};if(t instanceof ar){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof or){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?`#${Ns}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${Ts}`;return Xn(t,Cs)}(e)}?${nt(o).slice(1)}${c}`}const Ds="webStorageSupport";const As=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ir,this._completeRedirectFn=os,this._overrideRedirectResult=rs}async _openPopup(e,t,n,i){var r;qn(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");return Es(e,await Is(e,t,n,Kn(),i),Ar())}async _openRedirect(e,t,n,i){await this._originValidation(e);return function(e){Pr().location.href=e}(await Is(e,t,n,Kn(),i)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(qn(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await ys(e),n=Pr().gapi;return Wn(n,e,"internal-error"),t.open({where:document.body,url:_s(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ws,dontclear:!0},(t=>new Promise((async(n,i)=>{await t.restyle({setHideOnLeave:!1});const r=zn(e,"network-request-failed"),s=Pr().setTimeout((()=>{i(r)}),bs.get());function a(){Pr().clearTimeout(s),n(t)}t.ping(a).then(a,(()=>{i(r)}))}))))}(e),n=new ls(e);return t.register("authEvent",(t=>{Wn(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ds,{type:Ds},(n=>{var i;const r=null===(i=null===n||void 0===n?void 0:n[0])||void 0===i?void 0:i[Ds];void 0!==r&&t(!!r),Vn(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=fs(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ri()||Ti()||Mi()}};var Ms="@firebase/auth",Ps="0.23.2";class Rs{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Wn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const js=We("authIdTokenMaxAge")||300;let Os=null;function Ls(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_n();const t=vn(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=vn(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(et(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Vn(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:As,persistence:[Wr,Cr,Ir]}),i=We("authTokenSyncURL");if(i){const e=(r=i,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>js)return;const i=null===t||void 0===t?void 0:t.token;Os!==i&&(Os=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});!function(e,t,n){lt(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(e,t,n,i){lt(e).onIdTokenChanged(t,n,i)}(n,(t=>e(t)))}var r;const s=ze("auth");return s&&Ki(n,`http://${s}`),n}var Fs;Fs="Browser",mn(new ct("auth",((e,t)=>{let{options:n}=t;const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=i.options;Wn(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:a,authDomain:o,clientPlatform:Fs,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ji(Fs)},c=new Wi(i,r,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(bi);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),mn(new ct("auth-internal",(e=>(e=>new Rs(e))(Hi(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),kn(Ms,Ps,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Fs)),kn(Ms,Ps,"esm2017");var Us,Vs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},zs={},Bs=Bs||{},$s=Vs||self;function Ws(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Hs(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var qs="closure_uid_"+(1e9*Math.random()>>>0),Ks=0;function Gs(e,t,n){return e.call.apply(e.bind,arguments)}function Ys(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Qs(e,t,n){return(Qs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Gs:Ys).apply(null,arguments)}function Xs(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Js(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return t.prototype[n].apply(e,r)}}function Zs(){this.s=this.s,this.o=this.o}Zs.prototype.s=!1,Zs.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,qs)&&e[qs]||(e[qs]=++Ks))},Zs.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ea=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function ta(e){const t=e.length;if(0<t){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function na(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Ws(t)){const n=e.length||0,i=t.length||0;e.length=n+i;for(let r=0;r<i;r++)e[n+r]=t[r]}else e.push(t)}}function ia(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ia.prototype.h=function(){this.defaultPrevented=!0};var ra=function(){if(!$s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{$s.addEventListener("test",(()=>{}),t),$s.removeEventListener("test",(()=>{}),t)}catch(n){}return e}();function sa(e){return/^[\s\xa0]*$/.test(e)}function aa(){var e=$s.navigator;return e&&(e=e.userAgent)?e:""}function oa(e){return-1!=aa().indexOf(e)}function la(e){return la[" "](e),e}la[" "]=function(){};var ca,ua,ha=oa("Opera"),da=oa("Trident")||oa("MSIE"),fa=oa("Edge"),pa=fa||da,ga=oa("Gecko")&&!(-1!=aa().toLowerCase().indexOf("webkit")&&!oa("Edge"))&&!(oa("Trident")||oa("MSIE"))&&!oa("Edge"),ma=-1!=aa().toLowerCase().indexOf("webkit")&&!oa("Edge");function va(){var e=$s.document;return e?e.documentMode:void 0}e:{var ya="",ba=function(){var e=aa();return ga?/rv:([^\);]+)(\)|;)/.exec(e):fa?/Edge\/([\d\.]+)/.exec(e):da?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):ma?/WebKit\/(\S+)/.exec(e):ha?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(ba&&(ya=ba?ba[1]:""),da){var wa=va();if(null!=wa&&wa>parseFloat(ya)){ca=String(wa);break e}}ca=ya}if($s.document&&da){var xa=va();ua=xa||(parseInt(ca,10)||void 0)}else ua=void 0;var _a=ua;function ka(e,t){if(ia.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ga){e:{try{la(t.nodeName);var r=!0;break e}catch(s){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Sa[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ka.$.h.call(this)}}Js(ka,ia);var Sa={2:"touch",3:"pen",4:"mouse"};ka.prototype.h=function(){ka.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ea="closure_listenable_"+(1e6*Math.random()|0),Ta=0;function Ca(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.la=r,this.key=++Ta,this.fa=this.ia=!1}function Na(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Ia(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function Da(e){const t={};for(const n in e)t[n]=e[n];return t}const Aa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ma(e,t){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)e[n]=i[n];for(let t=0;t<Aa.length;t++)n=Aa[t],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function Pa(e){this.src=e,this.g={},this.h=0}function Ra(e,t){var n=t.type;if(n in e.g){var i,r=e.g[n],s=ea(r,t);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Na(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ja(e,t,n,i){for(var r=0;r<e.length;++r){var s=e[r];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==i)return r}return-1}Pa.prototype.add=function(e,t,n,i,r){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=ja(e,t,i,r);return-1<a?(t=e[a],n||(t.ia=!1)):((t=new Ca(t,this.src,s,!!i,r)).ia=n,e.push(t)),t};var Oa="closure_lm_"+(1e6*Math.random()|0),La={};function Fa(e,t,n,i,r){if(i&&i.once)return Va(e,t,n,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Fa(e,t[s],n,i,r);return null}return n=Ka(n),e&&e[Ea]?e.O(t,n,Hs(i)?!!i.capture:!!i,r):Ua(e,t,n,!1,i,r)}function Ua(e,t,n,i,r,s){if(!t)throw Error("Invalid event type");var a=Hs(r)?!!r.capture:!!r,o=Ha(e);if(o||(e[Oa]=o=new Pa(e)),(n=o.add(t,n,i,a,s)).proxy)return n;if(i=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Wa;return e}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)ra||(r=a),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent($a(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function Va(e,t,n,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Va(e,t[s],n,i,r);return null}return n=Ka(n),e&&e[Ea]?e.P(t,n,Hs(i)?!!i.capture:!!i,r):Ua(e,t,n,!0,i,r)}function za(e,t,n,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)za(e,t[s],n,i,r);else i=Hs(i)?!!i.capture:!!i,n=Ka(n),e&&e[Ea]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ja(s=e.g[t],n,i,r))&&(Na(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Ha(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ja(t,n,i,r)),(n=-1<e?t[e]:null)&&Ba(n))}function Ba(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Ea])Ra(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent($a(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=Ha(t))?(Ra(n,e),0==n.h&&(n.src=null,t[Oa]=null)):Na(e)}}}function $a(e){return e in La?La[e]:La[e]="on"+e}function Wa(e,t){if(e.fa)e=!0;else{t=new ka(t,this);var n=e.listener,i=e.la||e.src;e.ia&&Ba(e),e=n.call(i,t)}return e}function Ha(e){return(e=e[Oa])instanceof Pa?e:null}var qa="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ka(e){return"function"===typeof e?e:(e[qa]||(e[qa]=function(t){return e.handleEvent(t)}),e[qa])}function Ga(){Zs.call(this),this.i=new Pa(this),this.S=this,this.J=null}function Ya(e,t){var n,i=e.J;if(i)for(n=[];i;i=i.J)n.push(i);if(e=e.S,i=t.type||t,"string"===typeof t)t=new ia(t,e);else if(t instanceof ia)t.target=t.target||e;else{var r=t;Ma(t=new ia(i,e),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];r=Qa(a,i,!0,t)&&r}if(r=Qa(a=t.g=e,i,!0,t)&&r,r=Qa(a,i,!1,t)&&r,n)for(s=0;s<n.length;s++)r=Qa(a=t.g=n[s],i,!1,t)&&r}function Qa(e,t,n,i){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.fa&&a.capture==n){var o=a.listener,l=a.la||a.src;a.ia&&Ra(e.i,a),r=!1!==o.call(l,i)&&r}}return r&&!i.defaultPrevented}Js(Ga,Zs),Ga.prototype[Ea]=!0,Ga.prototype.removeEventListener=function(e,t,n,i){za(this,e,t,n,i)},Ga.prototype.N=function(){if(Ga.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)Na(n[i]);delete t.g[e],t.h--}}this.J=null},Ga.prototype.O=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)},Ga.prototype.P=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};var Xa=$s.JSON.stringify;function Ja(){var e=so;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Za=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new eo),(e=>e.reset()));class eo{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function to(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function no(e){$s.setTimeout((()=>{throw e}),0)}let io,ro=!1,so=new class{constructor(){this.h=this.g=null}add(e,t){const n=Za.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},ao=()=>{const e=$s.Promise.resolve(void 0);io=()=>{e.then(oo)}};var oo=()=>{for(var e;e=Ja();){try{e.h.call(e.g)}catch(n){no(n)}var t=Za;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ro=!1};function lo(e,t){Ga.call(this),this.h=e||1,this.g=t||$s,this.j=Qs(this.qb,this),this.l=Date.now()}function co(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function uo(e,t,n){if("function"===typeof e)n&&(e=Qs(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Qs(e.handleEvent,e)}return 2147483647<Number(t)?-1:$s.setTimeout(e,t||0)}function ho(e){e.g=uo((()=>{e.g=null,e.i&&(e.i=!1,ho(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Js(lo,Ga),(Us=lo.prototype).ga=!1,Us.T=null,Us.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ya(this,"tick"),this.ga&&(co(this),this.start()))}},Us.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Us.N=function(){lo.$.N.call(this),co(this),delete this.g};class fo extends Zs{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ho(this)}N(){super.N(),this.g&&($s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function po(e){Zs.call(this),this.h=e,this.g={}}Js(po,Zs);var go=[];function mo(e,t,n,i){Array.isArray(n)||(n&&(go[0]=n.toString()),n=go);for(var r=0;r<n.length;r++){var s=Fa(t,n[r],i||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function vo(e){Ia(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Ba(e)}),e),e.g={}}function yo(){this.g=!0}function bo(e,t,n,i){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<r.length;a++)r[a]=""}}}return Xa(n)}catch(o){return t}}(e,n)+(i?" "+i:"")}))}po.prototype.N=function(){po.$.N.call(this),vo(this)},po.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},yo.prototype.Ea=function(){this.g=!1},yo.prototype.info=function(){};var wo={},xo=null;function _o(){return xo=xo||new Ga}function ko(e){ia.call(this,wo.Ta,e)}function So(e){const t=_o();Ya(t,new ko(t))}function Eo(e,t){ia.call(this,wo.STAT_EVENT,e),this.stat=t}function To(e){const t=_o();Ya(t,new Eo(t,e))}function Co(e,t){ia.call(this,wo.Ua,e),this.size=t}function No(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return $s.setTimeout((function(){e()}),t)}wo.Ta="serverreachability",Js(ko,ia),wo.STAT_EVENT="statevent",Js(Eo,ia),wo.Ua="timingevent",Js(Co,ia);var Io={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Do={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ao(){}function Mo(e){return e.h||(e.h=e.i())}function Po(){}Ao.prototype.h=null;var Ro,jo={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Oo(){ia.call(this,"d")}function Lo(){ia.call(this,"c")}function Fo(){}function Uo(e,t,n,i){this.l=e,this.j=t,this.m=n,this.W=i||1,this.U=new po(this),this.P=zo,e=pa?125:void 0,this.V=new lo(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Vo}function Vo(){this.i=null,this.g="",this.h=!1}Js(Oo,ia),Js(Lo,ia),Js(Fo,Ao),Fo.prototype.g=function(){return new XMLHttpRequest},Fo.prototype.i=function(){return{}},Ro=new Fo;var zo=45e3,Bo={},$o={};function Wo(e,t,n){e.L=1,e.v=cl(rl(t)),e.s=n,e.S=!0,Ho(e,null)}function Ho(e,t){e.G=Date.now(),Yo(e),e.A=rl(e.v);var n=e.A,i=e.W;Array.isArray(i)||(i=[String(i)]),_l(n.i,"t",i),e.C=0,n=e.l.J,e.h=new Vo,e.g=kc(e.l,n?t:null,!e.s),0<e.O&&(e.M=new fo(Qs(e.Pa,e,e.g),e.O)),mo(e.U,e.g,"readystatechange",e.nb),t=e.I?Da(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),So(),function(e,t,n,i,r,s){e.info((function(){if(e.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");a=2<=h.length&&"type"==h[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+n+"\n"+a}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function qo(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Ko(e,t,n){let i,r=!0;for(;!e.J&&e.C<n.length;){if(i=Go(e,n),i==$o){4==t&&(e.o=4,To(14),r=!1),bo(e.j,e.m,null,"[Incomplete Response]");break}if(i==Bo){e.o=4,To(15),bo(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}bo(e.j,e.m,i,null),el(e,i)}qo(e)&&i!=$o&&i!=Bo&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,To(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),gc(t),t.M=!0,To(11))):(bo(e.j,e.m,n,"[Invalid Chunked Response]"),Zo(e),Jo(e))}function Go(e,t){var n=e.C,i=t.indexOf("\n",n);return-1==i?$o:(n=Number(t.substring(n,i)),isNaN(n)?Bo:(i+=1)+n>t.length?$o:(t=t.slice(i,i+n),e.C=i+n,t))}function Yo(e){e.Y=Date.now()+e.P,Qo(e,e.P)}function Qo(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=No(Qs(e.lb,e),t)}function Xo(e){e.B&&($s.clearTimeout(e.B),e.B=null)}function Jo(e){0==e.l.H||e.J||yc(e.l,e)}function Zo(e){Xo(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,co(e.V),vo(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function el(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Il(n.i,e)))if(!e.K&&Il(n.i,e)&&3==n.H){try{var i=n.Ja.g.parse(t)}catch(c){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;vc(n),oc(n)}pc(n),To(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&0==n.A&&!n.v&&(n.v=No(Qs(n.ib,n),6e3));if(1>=Nl(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else wc(n,11)}else if((e.K||n.g==e)&&vc(n),!sa(t))for(r=n.Ja.g.parse(t),t=0;t<r.length;t++){let c=r[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const r=c[4];null!=r&&(n.Ga=r,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(i=1.5*u,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=i.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Dl(s,s.h),s.h=null))}if(i.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(i.Da=e,ll(i.I,i.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var a=e;if((i=n).wa=_c(i,i.J?i.pa:null,i.Y),a.K){Al(i.i,a);var o=a,l=i.L;l&&o.setTimeout(l),o.B&&(Xo(o),Yo(o)),i.g=a}else fc(i);0<n.j.length&&cc(n)}else"stop"!=c[0]&&"close"!=c[0]||wc(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?wc(n,7):ac(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}So()}catch(c){}}function tl(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Ws(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Ws(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const i in e)t[n++]=i;return t}}}(e),i=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Ws(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}(e),r=i.length,s=0;s<r;s++)t.call(void 0,i[s],n&&n[s],e)}(Us=Uo.prototype).setTimeout=function(e){this.P=e},Us.nb=function(e){e=e.target;const t=this.M;t&&3==ec(e)?t.l():this.Pa(e)},Us.Pa=function(e){try{if(e==this.g)e:{const u=ec(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||pa||this.g&&(this.h.h||this.g.ja()||tc(this.g)))){this.J||4!=u||7==t||So(),Xo(this);var n=this.g.da();this.ca=n;t:if(qo(this)){var i=tc(this.g);e="";var r=i.length,s=4==ec(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Zo(this),Jo(this);var a="";break t}this.h.i=new $s.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.ja();if(this.i=200==n,function(e,t,n,i,r,s,a){e.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+s+" "+a}))}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var o,l=this.g;if((o=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!sa(o)){var c=o;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,To(12),Zo(this),Jo(this);break e}bo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,el(this,n)}this.S?(Ko(this,u,a),pa&&this.i&&3==u&&(mo(this.U,this.V,"tick",this.mb),this.V.start())):(bo(this.j,this.m,a,null),el(this,a)),4==u&&Zo(this),this.i&&!this.J&&(4==u?yc(this.l,this):(this.i=!1,Yo(this)))}else(function(e){const t={};e=(e.g&&2<=ec(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<e.length;i++){if(sa(e[i]))continue;var n=to(e[i]);const r=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[r]||[];t[r]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.o=3,To(12)):(this.o=0,To(13)),Zo(this),Jo(this)}}}catch(u){}},Us.mb=function(){if(this.g){var e=ec(this.g),t=this.g.ja();this.C<t.length&&(Xo(this),Ko(this,e,t),this.i&&4!=e&&Yo(this))}},Us.cancel=function(){this.J=!0,Zo(this)},Us.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(So(),To(17)),Zo(this),this.o=2,Jo(this)):Qo(this,this.Y-e)};var nl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function il(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof il){this.h=e.h,sl(this,e.j),this.s=e.s,this.g=e.g,al(this,e.m),this.l=e.l;var t=e.i,n=new yl;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ol(this,n),this.o=e.o}else e&&(t=String(e).match(nl))?(this.h=!1,sl(this,t[1]||"",!0),this.s=ul(t[2]||""),this.g=ul(t[3]||"",!0),al(this,t[4]),this.l=ul(t[5]||"",!0),ol(this,t[6]||"",!0),this.o=ul(t[7]||"")):(this.h=!1,this.i=new yl(null,this.h))}function rl(e){return new il(e)}function sl(e,t,n){e.j=n?ul(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function al(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ol(e,t,n){t instanceof yl?(e.i=t,function(e,t){t&&!e.j&&(bl(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(wl(this,t),_l(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=hl(t,ml)),e.i=new yl(t,e.h))}function ll(e,t,n){e.i.set(t,n)}function cl(e){return ll(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ul(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function hl(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,dl),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function dl(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}il.prototype.toString=function(){var e=[],t=this.j;t&&e.push(hl(t,fl,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(hl(t,fl,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(hl(n,"/"==n.charAt(0)?gl:pl,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",hl(n,vl)),e.join("")};var fl=/[#\/\?@]/g,pl=/[#\?:]/g,gl=/[#\?]/g,ml=/[#\?@]/g,vl=/#/g;function yl(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function bl(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var s=e[n].substring(0,i);r=e[n].substring(i+1)}else s=e[n];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function wl(e,t){bl(e),t=kl(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function xl(e,t){return bl(e),t=kl(e,t),e.g.has(t)}function _l(e,t,n){wl(e,t),0<n.length&&(e.i=null,e.g.set(kl(e,t),ta(n)),e.h+=n.length)}function kl(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Us=yl.prototype).add=function(e,t){bl(this),this.i=null,e=kl(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Us.forEach=function(e,t){bl(this),this.g.forEach((function(n,i){n.forEach((function(n){e.call(t,n,i,this)}),this)}),this)},Us.ta=function(){bl(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let i=0;i<t.length;i++){const r=e[i];for(let e=0;e<r.length;e++)n.push(t[i])}return n},Us.Z=function(e){bl(this);let t=[];if("string"===typeof e)xl(this,e)&&(t=t.concat(this.g.get(kl(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Us.set=function(e,t){return bl(this),this.i=null,xl(this,e=kl(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Us.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Us.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var i=t[n];const s=encodeURIComponent(String(i)),a=this.Z(i);for(i=0;i<a.length;i++){var r=s;""!==a[i]&&(r+="="+encodeURIComponent(String(a[i]))),e.push(r)}}return this.i=e.join("&")};var Sl=class{constructor(e,t){this.g=e,this.map=t}};function El(e){this.l=e||Tl,$s.PerformanceNavigationTiming?e=0<(e=$s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!($s.g&&$s.g.Ka&&$s.g.Ka()&&$s.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Tl=10;function Cl(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Nl(e){return e.h?1:e.g?e.g.size:0}function Il(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Dl(e,t){e.g?e.g.add(t):e.h=t}function Al(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ml(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return ta(e.i)}El.prototype.cancel=function(){if(this.i=Ml(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Pl,Rl=class{stringify(e){return $s.JSON.stringify(e,void 0)}parse(e){return $s.JSON.parse(e,void 0)}};function jl(){this.g=new Rl}function Ol(e,t,n){const i=n||"";try{tl(e,(function(e,n){let r=e;Hs(e)&&(r=Xa(e)),t.push(i+n+"="+encodeURIComponent(r))}))}catch(SI){throw t.push(i+"type="+encodeURIComponent("_badmap")),SI}}function Ll(e,t,n,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch(s){}}function Fl(e){this.l=e.fc||null,this.j=e.ob||!1}function Ul(e,t){Ga.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Vl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Js(Fl,Ao),Fl.prototype.g=function(){return new Ul(this.l,this.j)},Fl.prototype.i=(Pl={},function(){return Pl}),Js(Ul,Ga);var Vl=0;function zl(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Bl(e){e.readyState=4,e.l=null,e.j=null,e.A=null,$l(e)}function $l(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Us=Ul.prototype).open=function(e,t){if(this.readyState!=Vl)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,$l(this)},Us.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||$s).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Us.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bl(this)),this.readyState=Vl},Us.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,$l(this)),this.g&&(this.readyState=3,$l(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof $s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;zl(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Us.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Bl(this):$l(this),3==this.readyState&&zl(this)}},Us.Za=function(e){this.g&&(this.response=this.responseText=e,Bl(this))},Us.Ya=function(e){this.g&&(this.response=e,Bl(this))},Us.ka=function(){this.g&&Bl(this)},Us.setRequestHeader=function(e,t){this.v.append(e,t)},Us.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Us.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ul.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Wl=$s.JSON.parse;function Hl(e){Ga.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ql,this.L=this.M=!1}Js(Hl,Ga);var ql="",Kl=/^https?$/i,Gl=["POST","PUT"];function Yl(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ql(e),Jl(e)}function Ql(e){e.F||(e.F=!0,Ya(e,"complete"),Ya(e,"error"))}function Xl(e){if(e.h&&"undefined"!=typeof Bs&&(!e.C[1]||4!=ec(e)||2!=e.da()))if(e.v&&4==ec(e))uo(e.La,0,e);else if(Ya(e,"readystatechange"),4==ec(e)){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===o){var r=String(e.I).match(nl)[1]||null;!r&&$s.self&&$s.self.location&&(r=$s.self.location.protocol.slice(0,-1)),i=!Kl.test(r?r.toLowerCase():"")}n=i}if(n)Ya(e,"complete"),Ya(e,"success");else{e.m=6;try{var s=2<ec(e)?e.g.statusText:""}catch(a){s=""}e.j=s+" ["+e.da()+"]",Ql(e)}}finally{Jl(e)}}}function Jl(e,t){if(e.g){Zl(e);const n=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Ya(e,"ready");try{n.onreadystatechange=i}catch(SI){}}}function Zl(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&($s.clearTimeout(e.A),e.A=null)}function ec(e){return e.g?e.g.readyState:0}function tc(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case ql:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(au){return null}}function nc(e){let t="";return Ia(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function ic(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=nc(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ll(e,t,n))}function rc(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function sc(e){this.Ga=0,this.j=[],this.l=new yo,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=rc("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=rc("baseRetryDelayMs",5e3,e),this.hb=rc("retryDelaySeedMs",1e4,e),this.eb=rc("forwardChannelMaxRetries",2,e),this.xa=rc("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new El(e&&e.concurrentRequestLimit),this.Ja=new jl,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function ac(e){if(lc(e),3==e.H){var t=e.W++,n=rl(e.I);if(ll(n,"SID",e.K),ll(n,"RID",t),ll(n,"TYPE","terminate"),hc(e,n),(t=new Uo(e,e.l,t)).L=2,t.v=cl(rl(n)),n=!1,$s.navigator&&$s.navigator.sendBeacon)try{n=$s.navigator.sendBeacon(t.v.toString(),"")}catch(i){}!n&&$s.Image&&((new Image).src=t.v,n=!0),n||(t.g=kc(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Yo(t)}xc(e)}function oc(e){e.g&&(gc(e),e.g.cancel(),e.g=null)}function lc(e){oc(e),e.u&&($s.clearTimeout(e.u),e.u=null),vc(e),e.i.cancel(),e.m&&("number"===typeof e.m&&$s.clearTimeout(e.m),e.m=null)}function cc(e){if(!Cl(e.i)&&!e.m){e.m=!0;var t=e.Na;io||ao(),ro||(io(),ro=!0),so.add(t,e),e.C=0}}function uc(e,t){var n;n=t?t.m:e.W++;const i=rl(e.I);ll(i,"SID",e.K),ll(i,"RID",n),ll(i,"AID",e.V),hc(e,i),e.o&&e.s&&ic(i,e.o,e.s),n=new Uo(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=dc(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Dl(e.i,n),Wo(n,i,t)}function hc(e,t){e.na&&Ia(e.na,(function(e,n){ll(t,n,e)})),e.h&&tl({},(function(e,n){ll(t,n,e)}))}function dc(e,t,n){n=Math.min(e.j.length,n);var i=e.h?Qs(e.h.Va,e.h,e):null;e:{var r=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=r[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let a=0;a<n;a++){let n=r[a].g;const o=r[a].map;if(n-=t,0>n)t=Math.max(0,r[a].g-100),s=!1;else try{Ol(o,e,"req"+n+"_")}catch(vu){i&&i(o)}}if(s){i=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,i}function fc(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;io||ao(),ro||(io(),ro=!0),so.add(t,e),e.A=0}}function pc(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=No(Qs(e.Ma,e),bc(e,e.A)),e.A++,!0)}function gc(e){null!=e.B&&($s.clearTimeout(e.B),e.B=null)}function mc(e){e.g=new Uo(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=rl(e.wa);ll(t,"RID","rpc"),ll(t,"SID",e.K),ll(t,"AID",e.V),ll(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&ll(t,"TO",e.qa),ll(t,"TYPE","xmlhttp"),hc(e,t),e.o&&e.s&&ic(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=cl(rl(t)),n.s=null,n.S=!0,Ho(n,e)}function vc(e){null!=e.v&&($s.clearTimeout(e.v),e.v=null)}function yc(e,t){var n=null;if(e.g==t){vc(e),gc(e),e.g=null;var i=2}else{if(!Il(e.i,t))return;n=t.F,Al(e.i,t),i=1}if(0!=e.H)if(t.i)if(1==i){n=t.s?t.s.length:0,t=Date.now()-t.G;var r=e.C;Ya(i=_o(),new Co(i,n)),cc(e)}else fc(e);else if(3==(r=t.o)||0==r&&0<t.ca||!(1==i&&function(e,t){return!(Nl(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=No(Qs(e.Na,e,t),bc(e,e.C)),e.C++,!0))}(e,t)||2==i&&pc(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),r){case 1:wc(e,5);break;case 4:wc(e,10);break;case 3:wc(e,6);break;default:wc(e,2)}}function bc(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function wc(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var i=Qs(e.pb,e);n||(n=new il("//www.google.com/images/cleardot.gif"),$s.location&&"http"==$s.location.protocol||sl(n,"https"),cl(n)),function(e,t){const n=new yo;if($s.Image){const i=new Image;i.onload=Xs(Ll,n,i,"TestLoadImage: loaded",!0,t),i.onerror=Xs(Ll,n,i,"TestLoadImage: error",!1,t),i.onabort=Xs(Ll,n,i,"TestLoadImage: abort",!1,t),i.ontimeout=Xs(Ll,n,i,"TestLoadImage: timeout",!1,t),$s.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=e}else t(!1)}(n.toString(),i)}else To(2);e.H=0,e.h&&e.h.za(t),xc(e),lc(e)}function xc(e){if(e.H=0,e.ma=[],e.h){const t=Ml(e.i);0==t.length&&0==e.j.length||(na(e.ma,t),na(e.ma,e.j),e.i.i.length=0,ta(e.j),e.j.length=0),e.h.ya()}}function _c(e,t,n){var i=n instanceof il?rl(n):new il(n);if(""!=i.g)t&&(i.g=t+"."+i.g),al(i,i.m);else{var r=$s.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var s=new il(null);i&&sl(s,i),t&&(s.g=t),r&&al(s,r),n&&(s.l=n),i=s}return n=e.F,t=e.Da,n&&t&&ll(i,n,t),ll(i,"VER",e.ra),hc(e,i),i}function kc(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Hl(new Fl({ob:!0})):new Hl(e.va)).Oa(e.J),t}function Sc(){}function Ec(){if(da&&!(10<=Number(_a)))throw Error("Environmental error: no available transport.")}function Tc(e,t){Ga.call(this),this.g=new sc(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!sa(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!sa(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ic(this)}function Cc(e){Oo.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Nc(){Lo.call(this),this.status=1}function Ic(e){this.g=e}function Dc(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Ac(e,t,n){n||(n=0);var i=Array(16);if("string"===typeof t)for(var r=0;16>r;++r)i[r]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],r=e.g[2];var s=e.g[3],a=t+(s^n&(r^s))+i[0]+3614090360&4294967295;a=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(r^t&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=r+(n^s&(t^n))+i[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^r&(s^t))+i[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(r^t&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=r+(n^s&(t^n))+i[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^r&(s^t))+i[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(r^t&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=r+(n^s&(t^n))+i[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^r&(s^t))+i[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(r^t&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=r+(n^s&(t^n))+i[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^r&(s^t))+i[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^r&(t^n))+i[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^n&(s^t))+i[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^r&(t^n))+i[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^n&(s^t))+i[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^r&(t^n))+i[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^n&(s^t))+i[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^r&(t^n))+i[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^n&(s^t))+i[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=r+(s^t^n)+i[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(r^s^t)+i[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=r+(s^t^n)+i[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(r^s^t)+i[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=r+(s^t^n)+i[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(r^s^t)+i[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=r+(s^t^n)+i[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(r^s^t)+i[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~r))+i[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=r+(t^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(r|~t))+i[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~r))+i[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=r+(t^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(r|~t))+i[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~r))+i[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=r+(t^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(r|~t))+i[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~r))+i[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((r=s+((a=r+(t^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+i[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+s&4294967295}function Mc(e,t){this.h=t;for(var n=[],i=!0,r=e.length-1;0<=r;r--){var s=0|e[r];i&&s==t||(n[r]=s,i=!1)}this.g=n}(Us=Hl.prototype).Oa=function(e){this.M=e},Us.ha=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ro.g(),this.C=this.u?Mo(this.u):Mo(Ro),this.g.onreadystatechange=Qs(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void Yl(this,s)}if(e=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const e of i.keys())n.set(e,i.get(e))}i=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),r=$s.FormData&&e instanceof $s.FormData,!(0<=ea(Gl,t))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,o]of n)this.g.setRequestHeader(a,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Zl(this),0<this.B&&((this.L=function(e){return da&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Qs(this.ua,this)):this.A=uo(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Yl(this,s)}},Us.ua=function(){"undefined"!=typeof Bs&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ya(this,"timeout"),this.abort(8))},Us.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ya(this,"complete"),Ya(this,"abort"),Jl(this))},Us.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Jl(this,!0)),Hl.$.N.call(this)},Us.La=function(){this.s||(this.G||this.v||this.l?Xl(this):this.kb())},Us.kb=function(){Xl(this)},Us.isActive=function(){return!!this.g},Us.da=function(){try{return 2<ec(this)?this.g.status:-1}catch(Pl){return-1}},Us.ja=function(){try{return this.g?this.g.responseText:""}catch(Pl){return""}},Us.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Wl(t)}},Us.Ia=function(){return this.m},Us.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Us=sc.prototype).ra=8,Us.H=1,Us.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const r=new Uo(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Da(s),Ma(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var i=this.j[n];if(void 0===(i="__data__"in i.map&&"string"===typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=dc(this,r,t),ll(n=rl(this.I),"RID",e),ll(n,"CVER",22),this.F&&ll(n,"X-HTTP-Session-Id",this.F),hc(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(nc(s)))+"&"+t:this.o&&ic(n,this.o,s)),Dl(this.i,r),this.bb&&ll(n,"TYPE","init"),this.P?(ll(n,"$req",t),ll(n,"SID","null"),r.aa=!0,Wo(r,n,null)):Wo(r,n,t),this.H=2}}else 3==this.H&&(e?uc(this,e):0==this.j.length||Cl(this.i)||uc(this))},Us.Ma=function(){if(this.u=null,mc(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=No(Qs(this.jb,this),e)}},Us.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,To(10),oc(this),mc(this))},Us.ib=function(){null!=this.v&&(this.v=null,oc(this),pc(this),To(19))},Us.pb=function(e){e?(this.l.info("Successfully pinged google.com"),To(2)):(this.l.info("Failed to ping google.com"),To(1))},Us.isActive=function(){return!!this.h&&this.h.isActive(this)},(Us=Sc.prototype).Ba=function(){},Us.Aa=function(){},Us.za=function(){},Us.ya=function(){},Us.isActive=function(){return!0},Us.Va=function(){},Ec.prototype.g=function(e,t){return new Tc(e,t)},Js(Tc,Ga),Tc.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;To(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=_c(e,null,e.Y),cc(e)},Tc.prototype.close=function(){ac(this.g)},Tc.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Xa(e),e=n);t.j.push(new Sl(t.fb++,e)),3==t.H&&cc(t)},Tc.prototype.N=function(){this.g.h=null,delete this.j,ac(this.g),delete this.g,Tc.$.N.call(this)},Js(Cc,Oo),Js(Nc,Lo),Js(Ic,Sc),Ic.prototype.Ba=function(){Ya(this.g,"a")},Ic.prototype.Aa=function(e){Ya(this.g,new Cc(e))},Ic.prototype.za=function(e){Ya(this.g,new Nc)},Ic.prototype.ya=function(){Ya(this.g,"b")},Js(Dc,(function(){this.blockSize=-1})),Dc.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Dc.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,i=this.m,r=this.h,s=0;s<t;){if(0==r)for(;s<=n;)Ac(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(i[r++]=e.charCodeAt(s++),r==this.blockSize){Ac(this,i),r=0;break}}else for(;s<t;)if(i[r++]=e[s++],r==this.blockSize){Ac(this,i),r=0;break}}this.h=r,this.i+=t},Dc.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var i=0;32>i;i+=8)e[n++]=this.g[t]>>>i&255;return e};var Pc={};function Rc(e){return-128<=e&&128>e?function(e,t){var n=Pc;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Mc([0|e],0>e?-1:0)})):new Mc([0|e],0>e?-1:0)}function jc(e){if(isNaN(e)||!isFinite(e))return Lc;if(0>e)return Bc(jc(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=Oc;return new Mc(t,0)}var Oc=4294967296,Lc=Rc(0),Fc=Rc(1),Uc=Rc(16777216);function Vc(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function zc(e){return-1==e.h}function Bc(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new Mc(n,~e.h).add(Fc)}function $c(e,t){return e.add(Bc(t))}function Wc(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Hc(e,t){this.g=e,this.h=t}function qc(e,t){if(Vc(t))throw Error("division by zero");if(Vc(e))return new Hc(Lc,Lc);if(zc(e))return t=qc(Bc(e),t),new Hc(Bc(t.g),Bc(t.h));if(zc(t))return t=qc(e,Bc(t)),new Hc(Bc(t.g),t.h);if(30<e.g.length){if(zc(e)||zc(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Fc,i=t;0>=i.X(e);)n=Kc(n),i=Kc(i);var r=Gc(n,1),s=Gc(i,1);for(i=Gc(i,2),n=Gc(n,2);!Vc(i);){var a=s.add(i);0>=a.X(e)&&(r=r.add(n),s=a),i=Gc(i,1),n=Gc(n,1)}return t=$c(e,r.R(t)),new Hc(r,t)}for(r=Lc;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),a=(s=jc(n)).R(t);zc(a)||0<a.X(e);)a=(s=jc(n-=i)).R(t);Vc(s)&&(s=Fc),r=r.add(s),e=$c(e,a)}return new Hc(r,e)}function Kc(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.D(i)<<1|e.D(i-1)>>>31;return new Mc(n,e.h)}function Gc(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,r=[],s=0;s<i;s++)r[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Mc(r,e.h)}(Us=Mc.prototype).ea=function(){if(zc(this))return-Bc(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var i=this.D(n);e+=(0<=i?i:Oc+i)*t,t*=Oc}return e},Us.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Vc(this))return"0";if(zc(this))return"-"+Bc(this).toString(e);for(var t=jc(Math.pow(e,6)),n=this,i="";;){var r=qc(n,t).g,s=((0<(n=$c(n,r.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Vc(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},Us.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Us.X=function(e){return zc(e=$c(this,e))?-1:Vc(e)?0:1},Us.abs=function(){return zc(this)?Bc(this):this},Us.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,r=0;r<=t;r++){var s=i+(65535&this.D(r))+(65535&e.D(r)),a=(s>>>16)+(this.D(r)>>>16)+(e.D(r)>>>16);i=a>>>16,s&=65535,a&=65535,n[r]=a<<16|s}return new Mc(n,-2147483648&n[n.length-1]?-1:0)},Us.R=function(e){if(Vc(this)||Vc(e))return Lc;if(zc(this))return zc(e)?Bc(this).R(Bc(e)):Bc(Bc(this).R(e));if(zc(e))return Bc(this.R(Bc(e)));if(0>this.X(Uc)&&0>e.X(Uc))return jc(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<e.g.length;r++){var s=this.D(i)>>>16,a=65535&this.D(i),o=e.D(r)>>>16,l=65535&e.D(r);n[2*i+2*r]+=a*l,Wc(n,2*i+2*r),n[2*i+2*r+1]+=s*l,Wc(n,2*i+2*r+1),n[2*i+2*r+1]+=a*o,Wc(n,2*i+2*r+1),n[2*i+2*r+2]+=s*o,Wc(n,2*i+2*r+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new Mc(n,0)},Us.gb=function(e){return qc(this,e).h},Us.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)&e.D(i);return new Mc(n,this.h&e.h)},Us.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)|e.D(i);return new Mc(n,this.h|e.h)},Us.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)^e.D(i);return new Mc(n,this.h^e.h)},Ec.prototype.createWebChannel=Ec.prototype.g,Tc.prototype.send=Tc.prototype.u,Tc.prototype.open=Tc.prototype.m,Tc.prototype.close=Tc.prototype.close,Io.NO_ERROR=0,Io.TIMEOUT=8,Io.HTTP_ERROR=6,Do.COMPLETE="complete",Po.EventType=jo,jo.OPEN="a",jo.CLOSE="b",jo.ERROR="c",jo.MESSAGE="d",Ga.prototype.listen=Ga.prototype.O,Hl.prototype.listenOnce=Hl.prototype.P,Hl.prototype.getLastError=Hl.prototype.Sa,Hl.prototype.getLastErrorCode=Hl.prototype.Ia,Hl.prototype.getStatus=Hl.prototype.da,Hl.prototype.getResponseJson=Hl.prototype.Wa,Hl.prototype.getResponseText=Hl.prototype.ja,Hl.prototype.send=Hl.prototype.ha,Hl.prototype.setWithCredentials=Hl.prototype.Oa,Dc.prototype.digest=Dc.prototype.l,Dc.prototype.reset=Dc.prototype.reset,Dc.prototype.update=Dc.prototype.j,Mc.prototype.add=Mc.prototype.add,Mc.prototype.multiply=Mc.prototype.R,Mc.prototype.modulo=Mc.prototype.gb,Mc.prototype.compare=Mc.prototype.X,Mc.prototype.toNumber=Mc.prototype.ea,Mc.prototype.toString=Mc.prototype.toString,Mc.prototype.getBits=Mc.prototype.D,Mc.fromNumber=jc,Mc.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Bc(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=jc(Math.pow(n,8)),r=Lc,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+a),n);8>a?(a=jc(Math.pow(n,a)),r=r.R(a).add(jc(o))):r=(r=r.R(i)).add(jc(o))}return r};var Yc=zs.createWebChannelTransport=function(){return new Ec},Qc=zs.getStatEventTarget=function(){return _o()},Xc=zs.ErrorCode=Io,Jc=zs.EventType=Do,Zc=zs.Event=wo,eu=zs.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},tu=zs.FetchXmlHttpFactory=Fl,nu=zs.WebChannel=Po,iu=zs.XhrIo=Hl,ru=zs.Md5=Dc,su=zs.Integer=Mc;const au="@firebase/firestore";class ou{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ou.UNAUTHENTICATED=new ou(null),ou.GOOGLE_CREDENTIALS=new ou("google-credentials-uid"),ou.FIRST_PARTY=new ou("first-party-uid"),ou.MOCK_USER=new ou("mock-user");let lu="9.23.0";const cu=new bt("@firebase/firestore");function uu(){return cu.logLevel}function hu(e){if(cu.logLevel<=pt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(pu);cu.debug(`Firestore (${lu}): ${e}`,...r)}}function du(e){if(cu.logLevel<=pt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(pu);cu.error(`Firestore (${lu}): ${e}`,...r)}}function fu(e){if(cu.logLevel<=pt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(pu);cu.warn(`Firestore (${lu}): ${e}`,...r)}}function pu(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function gu(){const e=`FIRESTORE (${lu}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw du(e),new Error(e)}function mu(e,t){e||gu()}function vu(e,t){return e}const yu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bu extends Xe{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class wu{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class xu{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _u{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ou.UNAUTHENTICATED)))}shutdown(){}}class ku{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Su{constructor(e){this.t=e,this.currentUser=ou.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const i=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new wu;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new wu,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const t=r;e.enqueueRetryable((async()=>{await t.promise,await i(this.currentUser)}))},a=e=>{hu("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(hu("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new wu)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(hu("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(mu("string"==typeof t.accessToken),new xu(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return mu(null===e||"string"==typeof e),new ou(e)}}class Eu{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=ou.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Tu{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Eu(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(ou.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Cu{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Nu{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&hu("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.T;return this.T=e.token,hu("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const i=e=>{hu("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit((e=>i(e))),setTimeout((()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?i(e):hu("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(mu("string"==typeof e.token),this.T=e.token,new Cu(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Iu(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}class Du{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const i=Iu(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<t&&(n+=e.charAt(i[r]%62))}return n}}function Au(e,t){return e<t?-1:e>t?1:0}function Mu(e,t,n){return e.length===t.length&&e.every(((e,i)=>n(e,t[i])))}class Pu{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new bu(yu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new bu(yu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new bu(yu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new bu(yu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pu.fromMillis(Date.now())}static fromDate(e){return Pu.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Pu(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Au(this.nanoseconds,e.nanoseconds):Au(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ru{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ru(e)}static min(){return new Ru(new Pu(0,0))}static max(){return new Ru(new Pu(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ju{constructor(e,t,n){void 0===t?t=0:t>e.length&&gu(),void 0===n?n=e.length-t:n>e.length-t&&gu(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ju.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ju?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=e.get(i),r=t.get(i);if(n<r)return-1;if(n>r)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ou extends ju{construct(e,t,n){return new Ou(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n){if(r.indexOf("//")>=0)throw new bu(yu.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter((e=>e.length>0)))}return new Ou(e)}static emptyPath(){return new Ou([])}}const Lu=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fu extends ju{construct(e,t,n){return new Fu(e,t,n)}static isValidIdentifier(e){return Lu.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fu.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Fu(["__name__"])}static fromServerFormat(e){const t=[];let n="",i=0;const r=()=>{if(0===n.length)throw new bu(yu.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;i<e.length;){const t=e[i];if("\\"===t){if(i+1===e.length)throw new bu(yu.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[i+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new bu(yu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,i+=2}else"`"===t?(s=!s,i++):"."!==t||s?(n+=t,i++):(r(),i++)}if(r(),s)throw new bu(yu.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fu(t)}static emptyPath(){return new Fu([])}}class Uu{constructor(e){this.path=e}static fromPath(e){return new Uu(Ou.fromString(e))}static fromName(e){return new Uu(Ou.fromString(e).popFirst(5))}static empty(){return new Uu(Ou.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ou.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ou.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Uu(new Ou(e.slice()))}}class Vu{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}Vu.UNKNOWN_ID=-1;function zu(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=Ru.fromTimestamp(1e9===i?new Pu(n+1,0):new Pu(n,i));return new $u(r,Uu.empty(),t)}function Bu(e){return new $u(e.readTime,e.key,-1)}class $u{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new $u(Ru.min(),Uu.empty(),-1)}static max(){return new $u(Ru.max(),Uu.empty(),-1)}}function Wu(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Uu.comparator(e.documentKey,t.documentKey),0!==n?n:Au(e.largestBatchId,t.largestBatchId))}const Hu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ku(e){if(e.code!==yu.FAILED_PRECONDITION||e.message!==Hu)throw e;hu("LocalStore","Unexpectedly lost primary lease")}class Gu{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&gu(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Gu(((n,i)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,i)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Gu?t:Gu.resolve(t)}catch(e){return Gu.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Gu.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Gu.reject(t)}static resolve(e){return new Gu(((t,n)=>{t(e)}))}static reject(e){return new Gu(((t,n)=>{n(e)}))}static waitFor(e){return new Gu(((t,n)=>{let i=0,r=0,s=!1;e.forEach((e=>{++i,e.next((()=>{++r,s&&r===i&&t()}),(e=>n(e)))})),s=!0,r===i&&t()}))}static or(e){let t=Gu.resolve(!1);for(const n of e)t=t.next((e=>e?Gu.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,i)=>{n.push(t.call(this,e,i))})),this.waitFor(n)}static mapArray(e,t){return new Gu(((n,i)=>{const r=e.length,s=new Array(r);let a=0;for(let o=0;o<r;o++){const l=o;t(e[l]).next((e=>{s[l]=e,++a,a===r&&n(s)}),(e=>i(e)))}}))}static doWhile(e,t){return new Gu(((n,i)=>{const r=()=>{!0===e()?t().next((()=>{r()}),i):n()};r()}))}}function Yu(e){return"IndexedDbTransactionError"===e.name}class Qu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function Xu(e){return null==e}function Ju(e){return 0===e&&1/e==-1/0}function Zu(e){return"number"==typeof e&&Number.isInteger(e)&&!Ju(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Qu.ct=-1;const eh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],th=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],nh=th;function ih(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function rh(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function sh(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ah{constructor(e,t){this.comparator=e,this.root=t||lh.EMPTY}insert(e,t){return new ah(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,lh.BLACK,null,null))}remove(e){return new ah(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lh.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oh(this.root,e,this.comparator,!0)}}class oh{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class lh{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:lh.RED,this.left=null!=i?i:lh.EMPTY,this.right=null!=r?r:lh.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,r){return new lh(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return lh.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return lh.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,lh.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,lh.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw gu();if(this.right.isRed())throw gu();const e=this.left.check();if(e!==this.right.check())throw gu();return e+(this.isRed()?0:1)}}lh.EMPTY=null,lh.RED=!0,lh.BLACK=!1,lh.EMPTY=new class{constructor(){this.size=0}get key(){throw gu()}get value(){throw gu()}get color(){throw gu()}get left(){throw gu()}get right(){throw gu()}copy(e,t,n,i,r){return this}insert(e,t,n){return new lh(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ch{constructor(e){this.comparator=e,this.data=new ah(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new uh(this.data.getIterator())}getIteratorFrom(e){return new uh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof ch))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ch(this.comparator);return t.data=e,t}}class uh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class hh{constructor(e){this.fields=e,e.sort(Fu.comparator)}static empty(){return new hh([])}unionWith(e){let t=new ch(Fu.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new hh(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Mu(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class dh extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class fh{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new dh("Invalid base64 string: "+e):e}}(e);return new fh(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new fh(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Au(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fh.EMPTY_BYTE_STRING=new fh("");const ph=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gh(e){if(mu(!!e),"string"==typeof e){let t=0;const n=ph.exec(e);if(mu(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:mh(e.seconds),nanos:mh(e.nanos)}}function mh(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function vh(e){return"string"==typeof e?fh.fromBase64String(e):fh.fromUint8Array(e)}function yh(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function bh(e){const t=e.mapValue.fields.__previous_value__;return yh(t)?bh(t):t}function wh(e){const t=gh(e.mapValue.fields.__local_write_time__.timestampValue);return new Pu(t.seconds,t.nanos)}class xh{constructor(e,t,n,i,r,s,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class _h{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new _h("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof _h&&e.projectId===this.projectId&&e.database===this.database}}const kh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Sh(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?yh(e)?4:Fh(e)?9007199254740991:10:gu()}function Eh(e,t){if(e===t)return!0;const n=Sh(e);if(n!==Sh(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return wh(e).isEqual(wh(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=gh(e.timestampValue),i=gh(t.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return vh(e.bytesValue).isEqual(vh(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return mh(e.geoPointValue.latitude)===mh(t.geoPointValue.latitude)&&mh(e.geoPointValue.longitude)===mh(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return mh(e.integerValue)===mh(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=mh(e.doubleValue),i=mh(t.doubleValue);return n===i?Ju(n)===Ju(i):isNaN(n)&&isNaN(i)}return!1}(e,t);case 9:return Mu(e.arrayValue.values||[],t.arrayValue.values||[],Eh);case 10:return function(e,t){const n=e.mapValue.fields||{},i=t.mapValue.fields||{};if(ih(n)!==ih(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!Eh(n[r],i[r])))return!1;return!0}(e,t);default:return gu()}}function Th(e,t){return void 0!==(e.values||[]).find((e=>Eh(e,t)))}function Ch(e,t){if(e===t)return 0;const n=Sh(e),i=Sh(t);if(n!==i)return Au(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Au(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=mh(e.integerValue||e.doubleValue),i=mh(t.integerValue||t.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(e,t);case 3:return Nh(e.timestampValue,t.timestampValue);case 4:return Nh(wh(e),wh(t));case 5:return Au(e.stringValue,t.stringValue);case 6:return function(e,t){const n=vh(e),i=vh(t);return n.compareTo(i)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),i=t.split("/");for(let r=0;r<n.length&&r<i.length;r++){const e=Au(n[r],i[r]);if(0!==e)return e}return Au(n.length,i.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Au(mh(e.latitude),mh(t.latitude));return 0!==n?n:Au(mh(e.longitude),mh(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const e=Ch(n[r],i[r]);if(e)return e}return Au(n.length,i.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===kh.mapValue&&t===kh.mapValue)return 0;if(e===kh.mapValue)return 1;if(t===kh.mapValue)return-1;const n=e.fields||{},i=Object.keys(n),r=t.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let a=0;a<i.length&&a<s.length;++a){const e=Au(i[a],s[a]);if(0!==e)return e;const t=Ch(n[i[a]],r[s[a]]);if(0!==t)return t}return Au(i.length,s.length)}(e.mapValue,t.mapValue);default:throw gu()}}function Nh(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Au(e,t);const n=gh(e),i=gh(t),r=Au(n.seconds,i.seconds);return 0!==r?r:Au(n.nanos,i.nanos)}function Ih(e){return Dh(e)}function Dh(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=gh(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?vh(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Uu.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const i of e.values||[])n?n=!1:t+=",",t+=Dh(i);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",i=!0;for(const r of t)i?i=!1:n+=",",n+=`${r}:${Dh(e.fields[r])}`;return n+"}"}(e.mapValue):gu();var t,n}function Ah(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Mh(e){return!!e&&"integerValue"in e}function Ph(e){return!!e&&"arrayValue"in e}function Rh(e){return!!e&&"nullValue"in e}function jh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Oh(e){return!!e&&"mapValue"in e}function Lh(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return rh(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Lh(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Lh(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Fh(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class Uh{constructor(e){this.value=e}static empty(){return new Uh({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Oh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lh(t)}setAll(e){let t=Fu.emptyPath(),n={},i=[];e.forEach(((e,r)=>{if(!t.isImmediateParentOf(r)){const e=this.getFieldsMap(t);this.applyChanges(e,n,i),n={},i=[],t=r.popLast()}e?n[r.lastSegment()]=Lh(e):i.push(r.lastSegment())}));const r=this.getFieldsMap(t);this.applyChanges(r,n,i)}delete(e){const t=this.field(e.popLast());Oh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Eh(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];Oh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){rh(t,((t,n)=>e[t]=n));for(const i of n)delete e[i]}clone(){return new Uh(Lh(this.value))}}function Vh(e){const t=[];return rh(e.fields,((e,n)=>{const i=new Fu([e]);if(Oh(n)){const e=Vh(n.mapValue).fields;if(0===e.length)t.push(i);else for(const n of e)t.push(i.child(n))}else t.push(i)})),new hh(t)}class zh{constructor(e,t,n,i,r,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=a}static newInvalidDocument(e){return new zh(e,0,Ru.min(),Ru.min(),Ru.min(),Uh.empty(),0)}static newFoundDocument(e,t,n,i){return new zh(e,1,t,Ru.min(),n,i,0)}static newNoDocument(e,t){return new zh(e,2,t,Ru.min(),Ru.min(),Uh.empty(),0)}static newUnknownDocument(e,t){return new zh(e,3,t,Ru.min(),Ru.min(),Uh.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ru.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Uh.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Uh.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ru.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof zh&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zh(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Bh{constructor(e,t){this.position=e,this.inclusive=t}}function $h(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],a=e.position[r];if(i=s.field.isKeyField()?Uu.comparator(Uu.fromName(a.referenceValue),n.key):Ch(a,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function Wh(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Eh(e.position[n],t.position[n]))return!1;return!0}class Hh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function qh(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Kh{}class Gh extends Kh{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new nd(e,t,n):"array-contains"===t?new ad(e,n):"in"===t?new od(e,n):"not-in"===t?new ld(e,n):"array-contains-any"===t?new cd(e,n):new Gh(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new id(e,n):new rd(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ch(t,this.value)):null!==t&&Sh(this.value)===Sh(t)&&this.matchesComparison(Ch(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return gu()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Yh extends Kh{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Yh(e,t)}matches(e){return Qh(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft((e=>e.isInequality()));return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Qh(e){return"and"===e.op}function Xh(e){return Jh(e)&&Qh(e)}function Jh(e){for(const t of e.filters)if(t instanceof Yh)return!1;return!0}function Zh(e){if(e instanceof Gh)return e.field.canonicalString()+e.op.toString()+Ih(e.value);if(Xh(e))return e.filters.map((e=>Zh(e))).join(",");{const t=e.filters.map((e=>Zh(e))).join(",");return`${e.op}(${t})`}}function ed(e,t){return e instanceof Gh?function(e,t){return t instanceof Gh&&e.op===t.op&&e.field.isEqual(t.field)&&Eh(e.value,t.value)}(e,t):e instanceof Yh?function(e,t){return t instanceof Yh&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,i)=>e&&ed(n,t.filters[i])),!0)}(e,t):void gu()}function td(e){return e instanceof Gh?function(e){return`${e.field.canonicalString()} ${e.op} ${Ih(e.value)}`}(e):e instanceof Yh?function(e){return e.op.toString()+" {"+e.getFilters().map(td).join(" ,")+"}"}(e):"Filter"}class nd extends Gh{constructor(e,t,n){super(e,t,n),this.key=Uu.fromName(n.referenceValue)}matches(e){const t=Uu.comparator(e.key,this.key);return this.matchesComparison(t)}}class id extends Gh{constructor(e,t){super(e,"in",t),this.keys=sd("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class rd extends Gh{constructor(e,t){super(e,"not-in",t),this.keys=sd("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function sd(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Uu.fromName(e.referenceValue)))}class ad extends Gh{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ph(t)&&Th(t.arrayValue,this.value)}}class od extends Gh{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Th(this.value.arrayValue,t)}}class ld extends Gh{constructor(e,t){super(e,"not-in",t)}matches(e){if(Th(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Th(this.value.arrayValue,t)}}class cd extends Gh{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ph(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Th(this.value.arrayValue,e)))}}class ud{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=a,this.dt=null}}function hd(e){return new ud(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function dd(e){const t=vu(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Zh(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Xu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Ih(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Ih(e))).join(",")),t.dt=e}return t.dt}function fd(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!qh(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ed(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Wh(e.startAt,t.startAt)&&Wh(e.endAt,t.endAt)}function pd(e){return Uu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class gd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=a,this.endAt=o,this.wt=null,this._t=null,this.startAt,this.endAt}}function md(e,t,n,i,r,s,a,o){return new gd(e,t,n,i,r,s,a,o)}function vd(e){return new gd(e)}function yd(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function bd(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function wd(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function xd(e){return null!==e.collectionGroup}function _d(e){const t=vu(e);if(null===t.wt){t.wt=[];const e=wd(t),n=bd(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new Hh(e)),t.wt.push(new Hh(Fu.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Hh(Fu.keyField(),e))}}}return t.wt}function kd(e){const t=vu(e);if(!t._t)if("F"===t.limitType)t._t=hd(t.path,t.collectionGroup,_d(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const r of _d(t)){const t="desc"===r.dir?"asc":"desc";e.push(new Hh(r.field,t))}const n=t.endAt?new Bh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Bh(t.startAt.position,t.startAt.inclusive):null;t._t=hd(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}return t._t}function Sd(e,t){t.getFirstInequalityField(),wd(e);const n=e.filters.concat([t]);return new gd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ed(e,t,n){return new gd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Td(e,t){return fd(kd(e),kd(t))&&e.limitType===t.limitType}function Cd(e){return`${dd(kd(e))}|lt:${e.limitType}`}function Nd(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>td(e))).join(", ")}]`),Xu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Ih(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Ih(e))).join(",")),`Target(${t})`}(kd(e))}; limitType=${e.limitType})`}function Id(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Uu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of _d(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const i=$h(e,t,n);return e.inclusive?i<=0:i<0}(e.startAt,_d(e),t))&&!(e.endAt&&!function(e,t,n){const i=$h(e,t,n);return e.inclusive?i>=0:i>0}(e.endAt,_d(e),t))}(e,t)}function Dd(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ad(e){return(t,n)=>{let i=!1;for(const r of _d(e)){const e=Md(r,t,n);if(0!==e)return e;i=i||r.field.isKeyField()}return 0}}function Md(e,t,n){const i=e.field.isKeyField()?Uu.comparator(t.key,n.key):function(e,t,n){const i=t.data.field(e),r=n.data.field(e);return null!==i&&null!==r?Ch(i,r):gu()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return gu()}}class Pd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(void 0===i)return this.inner[n]=[[e,t]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return 1===n.length?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){rh(this.inner,((t,n)=>{for(const[i,r]of n)e(i,r)}))}isEmpty(){return sh(this.inner)}size(){return this.innerSize}}const Rd=new ah(Uu.comparator);function jd(){return Rd}const Od=new ah(Uu.comparator);function Ld(){let e=Od;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n)e=e.insert(r.key,r);return e}function Fd(e){let t=Od;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Ud(){return zd()}function Vd(){return zd()}function zd(){return new Pd((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Bd=new ah(Uu.comparator),$d=new ch(Uu.comparator);function Wd(){let e=$d;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n)e=e.add(r);return e}const Hd=new ch(Au);function qd(){return Hd}function Kd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ju(t)?"-0":t}}function Gd(e){return{integerValue:""+e}}function Yd(e,t){return Zu(t)?Gd(t):Kd(e,t)}class Qd{constructor(){this._=void 0}}function Xd(e,t,n){return e instanceof ef?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&yh(t)&&(t=bh(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof tf?nf(e,t):e instanceof rf?sf(e,t):function(e,t){const n=Zd(e,t),i=of(n)+of(e.gt);return Mh(n)&&Mh(e.gt)?Gd(i):Kd(e.serializer,i)}(e,t)}function Jd(e,t,n){return e instanceof tf?nf(e,t):e instanceof rf?sf(e,t):n}function Zd(e,t){return e instanceof af?Mh(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class ef extends Qd{}class tf extends Qd{constructor(e){super(),this.elements=e}}function nf(e,t){const n=lf(t);for(const i of e.elements)n.some((e=>Eh(e,i)))||n.push(i);return{arrayValue:{values:n}}}class rf extends Qd{constructor(e){super(),this.elements=e}}function sf(e,t){let n=lf(t);for(const i of e.elements)n=n.filter((e=>!Eh(e,i)));return{arrayValue:{values:n}}}class af extends Qd{constructor(e,t){super(),this.serializer=e,this.gt=t}}function of(e){return mh(e.integerValue||e.doubleValue)}function lf(e){return Ph(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class cf{constructor(e,t){this.field=e,this.transform=t}}class uf{constructor(e,t){this.version=e,this.transformResults=t}}class hf{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hf}static exists(e){return new hf(void 0,e)}static updateTime(e){return new hf(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function df(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class ff{}function pf(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Sf(e.key,hf.none()):new bf(e.key,e.data,hf.none());{const n=e.data,i=Uh.empty();let r=new ch(Fu.comparator);for(let e of t.fields)if(!r.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?i.delete(e):i.set(e,t),r=r.add(e)}return new wf(e.key,i,new hh(r.toArray()),hf.none())}}function gf(e,t,n){e instanceof bf?function(e,t,n){const i=e.value.clone(),r=_f(e.fieldTransforms,t,n.transformResults);i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):e instanceof wf?function(e,t,n){if(!df(e.precondition,t))return void t.convertToUnknownDocument(n.version);const i=_f(e.fieldTransforms,t,n.transformResults),r=t.data;r.setAll(xf(e)),r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function mf(e,t,n,i){return e instanceof bf?function(e,t,n,i){if(!df(e.precondition,t))return n;const r=e.value.clone(),s=kf(e.fieldTransforms,i,t);return r.setAll(s),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null}(e,t,n,i):e instanceof wf?function(e,t,n,i){if(!df(e.precondition,t))return n;const r=kf(e.fieldTransforms,i,t),s=t.data;return s.setAll(xf(e)),s.setAll(r),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,i):function(e,t,n){return df(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function vf(e,t){let n=null;for(const i of e.fieldTransforms){const e=t.data.field(i.field),r=Zd(i.transform,e||null);null!=r&&(null===n&&(n=Uh.empty()),n.set(i.field,r))}return n||null}function yf(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Mu(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof tf&&t instanceof tf||e instanceof rf&&t instanceof rf?Mu(e.elements,t.elements,Eh):e instanceof af&&t instanceof af?Eh(e.gt,t.gt):e instanceof ef&&t instanceof ef}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class bf extends ff{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class wf extends ff{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function xf(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}})),t}function _f(e,t,n){const i=new Map;mu(e.length===n.length);for(let r=0;r<n.length;r++){const s=e[r],a=s.transform,o=t.data.field(s.field);i.set(s.field,Jd(a,o,n[r]))}return i}function kf(e,t,n){const i=new Map;for(const r of e){const e=r.transform,s=n.data.field(r.field);i.set(r.field,Xd(e,s,t))}return i}class Sf extends ff{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ef extends ff{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Tf{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const t=this.mutations[i];t.key.isEqual(e.key)&&gf(t,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=mf(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=mf(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Vd();return this.mutations.forEach((i=>{const r=e.get(i.key),s=r.overlayedDocument;let a=this.applyToLocalView(s,r.mutatedFields);a=t.has(i.key)?null:a;const o=pf(s,a);null!==o&&n.set(i.key,o),s.isValidDocument()||s.convertToNoDocument(Ru.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Wd())}isEqual(e){return this.batchId===e.batchId&&Mu(this.mutations,e.mutations,((e,t)=>yf(e,t)))&&Mu(this.baseMutations,e.baseMutations,((e,t)=>yf(e,t)))}}class Cf{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){mu(e.mutations.length===n.length);let i=Bd;const r=e.mutations;for(let s=0;s<r.length;s++)i=i.insert(r[s].key,n[s].version);return new Cf(e,t,n,i)}}class Nf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class If{constructor(e,t){this.count=e,this.unchangedNames=t}}var Df,Af;function Mf(e){switch(e){default:return gu();case yu.CANCELLED:case yu.UNKNOWN:case yu.DEADLINE_EXCEEDED:case yu.RESOURCE_EXHAUSTED:case yu.INTERNAL:case yu.UNAVAILABLE:case yu.UNAUTHENTICATED:return!1;case yu.INVALID_ARGUMENT:case yu.NOT_FOUND:case yu.ALREADY_EXISTS:case yu.PERMISSION_DENIED:case yu.FAILED_PRECONDITION:case yu.ABORTED:case yu.OUT_OF_RANGE:case yu.UNIMPLEMENTED:case yu.DATA_LOSS:return!0}}function Pf(e){if(void 0===e)return du("GRPC error has no .code"),yu.UNKNOWN;switch(e){case Df.OK:return yu.OK;case Df.CANCELLED:return yu.CANCELLED;case Df.UNKNOWN:return yu.UNKNOWN;case Df.DEADLINE_EXCEEDED:return yu.DEADLINE_EXCEEDED;case Df.RESOURCE_EXHAUSTED:return yu.RESOURCE_EXHAUSTED;case Df.INTERNAL:return yu.INTERNAL;case Df.UNAVAILABLE:return yu.UNAVAILABLE;case Df.UNAUTHENTICATED:return yu.UNAUTHENTICATED;case Df.INVALID_ARGUMENT:return yu.INVALID_ARGUMENT;case Df.NOT_FOUND:return yu.NOT_FOUND;case Df.ALREADY_EXISTS:return yu.ALREADY_EXISTS;case Df.PERMISSION_DENIED:return yu.PERMISSION_DENIED;case Df.FAILED_PRECONDITION:return yu.FAILED_PRECONDITION;case Df.ABORTED:return yu.ABORTED;case Df.OUT_OF_RANGE:return yu.OUT_OF_RANGE;case Df.UNIMPLEMENTED:return yu.UNIMPLEMENTED;case Df.DATA_LOSS:return yu.DATA_LOSS;default:return gu()}}(Af=Df||(Df={}))[Af.OK=0]="OK",Af[Af.CANCELLED=1]="CANCELLED",Af[Af.UNKNOWN=2]="UNKNOWN",Af[Af.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Af[Af.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Af[Af.NOT_FOUND=5]="NOT_FOUND",Af[Af.ALREADY_EXISTS=6]="ALREADY_EXISTS",Af[Af.PERMISSION_DENIED=7]="PERMISSION_DENIED",Af[Af.UNAUTHENTICATED=16]="UNAUTHENTICATED",Af[Af.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Af[Af.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Af[Af.ABORTED=10]="ABORTED",Af[Af.OUT_OF_RANGE=11]="OUT_OF_RANGE",Af[Af.UNIMPLEMENTED=12]="UNIMPLEMENTED",Af[Af.INTERNAL=13]="INTERNAL",Af[Af.UNAVAILABLE=14]="UNAVAILABLE",Af[Af.DATA_LOSS=15]="DATA_LOSS";class Rf{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return jf}static getOrCreateInstance(){return null===jf&&(jf=new Rf),jf}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach((t=>t(e)))}}let jf=null;function Of(){return new TextEncoder}const Lf=new su([4294967295,4294967295],0);function Ff(e){const t=Of().encode(e),n=new ru;return n.update(t),new Uint8Array(n.digest())}function Uf(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new su([n,i],0),new su([r,s],0)]}class Vf{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new zf(`Invalid padding: ${t}`);if(n<0)throw new zf(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new zf(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new zf(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=su.fromNumber(this.It)}Et(e,t,n){let i=e.add(t.multiply(su.fromNumber(n)));return 1===i.compare(Lf)&&(i=new su([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Ff(e),[n,i]=Uf(t);for(let r=0;r<this.hashCount;r++){const e=this.Et(n,i,r);if(!this.At(e))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),s=new Vf(r,i,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.It)return;const t=Ff(e),[n,i]=Uf(t);for(let r=0;r<this.hashCount;r++){const e=this.Et(n,i,r);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class zf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Bf{constructor(e,t,n,i,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,$f.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Bf(Ru.min(),i,new ah(Au),jd(),Wd())}}class $f{constructor(e,t,n,i,r){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new $f(n,t,Wd(),Wd(),Wd())}}class Wf{constructor(e,t,n,i){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=i}}class Hf{constructor(e,t){this.targetId=e,this.Vt=t}}class qf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fh.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class Kf{constructor(){this.St=0,this.Dt=Qf(),this.Ct=fh.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Wd(),t=Wd(),n=Wd();return this.Dt.forEach(((i,r)=>{switch(r){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:gu()}})),new $f(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=Qf()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Gf{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=jd(),this.zt=Yf(),this.Wt=new ah(Au)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,(t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:gu()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach(((e,n)=>{this.te(n)&&t(n)}))}ne(e){var t;const n=e.targetId,i=e.Vt.count,r=this.se(n);if(r){const s=r.target;if(pd(s))if(0===i){const e=new Uu(s.path);this.Yt(n,e,zh.newNoDocument(e,Ru.min()))}else mu(1===i);else{const r=this.ie(n);if(r!==i){const i=this.re(e,r);if(0!==i){this.ee(n);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=Rf.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var i,r,s,a,o,l;const c={localCacheCount:t,existenceFilterCount:n.count},u=n.unchangedNames;return u&&(c.bloomFilter={applied:0===e,hashCount:null!==(i=null==u?void 0:u.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(a=null===(s=null===(r=null==u?void 0:u.bits)||void 0===r?void 0:r.bitmap)||void 0===s?void 0:s.length)&&void 0!==a?a:0,padding:null!==(l=null===(o=null==u?void 0:u.bits)||void 0===o?void 0:o.padding)&&void 0!==l?l:0}),c}(i,r,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:i}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let o,l;try{o=vh(r).toUint8Array()}catch(e){if(e instanceof dh)return fu("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{l=new Vf(o,s,a)}catch(e){return fu(e instanceof zf?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===l.It?1:i!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let i=0;return n.forEach((n=>{const r=this.Gt.ue(),s=`projects/${r.projectId}/databases/${r.database}/documents/${n.path.canonicalString()}`;t.vt(s)||(this.Yt(e,n,null),i++)})),i}ce(e){const t=new Map;this.Qt.forEach(((n,i)=>{const r=this.se(i);if(r){if(n.current&&pd(r.target)){const t=new Uu(r.target.path);null!==this.jt.get(t)||this.ae(i,t)||this.Yt(i,t,zh.newNoDocument(t,e))}n.Mt&&(t.set(i,n.Ot()),n.Ft())}}));let n=Wd();this.zt.forEach(((e,t)=>{let i=!0;t.forEachWhile((e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(i=!1,!1)})),i&&(n=n.add(e))})),this.jt.forEach(((t,n)=>n.setReadTime(e)));const i=new Bf(e,t,this.Wt,this.jt,n);return this.jt=jd(),this.zt=Yf(),this.Wt=new ah(Au),i}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Kf,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new ch(Au),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||hu("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Kf),this.Gt.getRemoteKeysForTarget(e).forEach((t=>{this.Yt(e,t,null)}))}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Yf(){return new ah(Uu.comparator)}function Qf(){return new ah(Uu.comparator)}const Xf={asc:"ASCENDING",desc:"DESCENDING"},Jf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Zf={and:"AND",or:"OR"};class ep{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function tp(e,t){return e.useProto3Json||Xu(t)?t:{value:t}}function np(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ip(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function rp(e,t){return np(e,t.toTimestamp())}function sp(e){return mu(!!e),Ru.fromTimestamp(function(e){const t=gh(e);return new Pu(t.seconds,t.nanos)}(e))}function ap(e,t){return function(e){return new Ou(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function op(e){const t=Ou.fromString(e);return mu(Cp(t)),t}function lp(e,t){return ap(e.databaseId,t.path)}function cp(e,t){const n=op(t);if(n.get(1)!==e.databaseId.projectId)throw new bu(yu.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new bu(yu.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Uu(fp(n))}function up(e,t){return ap(e.databaseId,t)}function hp(e){const t=op(e);return 4===t.length?Ou.emptyPath():fp(t)}function dp(e){return new Ou(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function fp(e){return mu(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function pp(e,t,n){return{name:lp(e,t),fields:n.value.mapValue.fields}}function gp(e,t){let n;if(t instanceof bf)n={update:pp(e,t.key,t.value)};else if(t instanceof Sf)n={delete:lp(e,t.key)};else if(t instanceof wf)n={update:pp(e,t.key,t.data),updateMask:Tp(t.fieldMask)};else{if(!(t instanceof Ef))return gu();n={verify:lp(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof ef)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof tf)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof rf)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof af)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw gu()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:rp(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:gu()}(e,t.precondition)),n}function mp(e,t){return{documents:[up(e,t.path)]}}function vp(e,t){const n={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(n.parent=up(e,i),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=up(e,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(e){if(0!==e.length)return Ep(Yh.create(e,"and"))}(t.filters);r&&(n.structuredQuery.where=r);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:kp(e.field),direction:wp(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=tp(e,t.limit);var o;return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function yp(e){let t=hp(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){mu(1===i);const e=n.from[0];e.allDescendants?r=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=bp(e);return t instanceof Yh&&Xh(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=n.orderBy.map((e=>function(e){return new Hh(Sp(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Xu(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Bh(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Bh(n,t)}(n.endAt)),md(t,r,a,s,o,"F",l,c)}function bp(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Sp(e.unaryFilter.field);return Gh.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Sp(e.unaryFilter.field);return Gh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Sp(e.unaryFilter.field);return Gh.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Sp(e.unaryFilter.field);return Gh.create(r,"!=",{nullValue:"NULL_VALUE"});default:return gu()}}(e):void 0!==e.fieldFilter?function(e){return Gh.create(Sp(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gu()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Yh.create(e.compositeFilter.filters.map((e=>bp(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return gu()}}(e.compositeFilter.op))}(e):gu()}function wp(e){return Xf[e]}function xp(e){return Jf[e]}function _p(e){return Zf[e]}function kp(e){return{fieldPath:e.canonicalString()}}function Sp(e){return Fu.fromServerFormat(e.fieldPath)}function Ep(e){return e instanceof Gh?function(e){if("=="===e.op){if(jh(e.value))return{unaryFilter:{field:kp(e.field),op:"IS_NAN"}};if(Rh(e.value))return{unaryFilter:{field:kp(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(jh(e.value))return{unaryFilter:{field:kp(e.field),op:"IS_NOT_NAN"}};if(Rh(e.value))return{unaryFilter:{field:kp(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kp(e.field),op:xp(e.op),value:e.value}}}(e):e instanceof Yh?function(e){const t=e.getFilters().map((e=>Ep(e)));return 1===t.length?t[0]:{compositeFilter:{op:_p(e.op),filters:t}}}(e):gu()}function Tp(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Cp(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Np{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ru.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ru.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:fh.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Np(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Np(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Np(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Np(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ip{constructor(e){this.fe=e}}function Dp(e){const t=yp({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ed(t,t.limit,"L"):t}class Ap{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(mh(e.integerValue));else if("doubleValue"in e){const n=mh(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),Ju(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie(`${n.seconds||""}`),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(vh(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?Fh(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):gu()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const i of Object.keys(n))this.Te(i,t),this.me(n[i],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const i of n)this.me(i,t)}ve(e,t){this.ye(t,37),Uu.fromName(e).path.forEach((e=>{this.ye(t,60),this.be(e,t)}))}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}Ap.Ve=new Ap;class Mp{constructor(){this.rn=new Pp}addToCollectionParentIndex(e,t){return this.rn.add(t),Gu.resolve()}getCollectionParents(e,t){return Gu.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return Gu.resolve()}deleteFieldIndex(e,t){return Gu.resolve()}getDocumentsMatchingTarget(e,t){return Gu.resolve(null)}getIndexType(e,t){return Gu.resolve(0)}getFieldIndexes(e,t){return Gu.resolve([])}getNextCollectionGroupToUpdate(e){return Gu.resolve(null)}getMinOffset(e,t){return Gu.resolve($u.min())}getMinOffsetFromCollectionGroup(e,t){return Gu.resolve($u.min())}updateCollectionGroup(e,t,n){return Gu.resolve()}updateIndexEntries(e,t){return Gu.resolve()}}class Pp{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new ch(Ou.comparator),r=!i.has(n);return this.index[t]=i.add(n),r}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new ch(Ou.comparator)).toArray()}}new Uint8Array(0);class Rp{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Rp(e,Rp.DEFAULT_COLLECTION_PERCENTILE,Rp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Rp.DEFAULT_COLLECTION_PERCENTILE=10,Rp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rp.DEFAULT=new Rp(41943040,Rp.DEFAULT_COLLECTION_PERCENTILE,Rp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rp.DISABLED=new Rp(-1,0,0);class jp{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new jp(0)}static Mn(){return new jp(-1)}}class Op{constructor(){this.changes=new Pd((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zh.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Gu.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Lp{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Fp{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&mf(n.mutation,e,hh.empty(),Pu.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Wd()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wd();const i=Ud();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,n).next((e=>{let t=Ld();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Ud();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Wd())))}populateOverlays(e,t,n){const i=[];return n.forEach((e=>{t.has(e)||i.push(e)})),this.documentOverlayCache.getOverlays(e,i).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,i){let r=jd();const s=zd(),a=zd();return t.forEach(((e,t)=>{const a=n.get(t.key);i.has(t.key)&&(void 0===a||a.mutation instanceof wf)?r=r.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),mf(a.mutation,t,a.mutation.getFieldMask(),Pu.now())):s.set(t.key,hh.empty())})),this.recalculateAndSaveOverlays(e,r).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new Lp(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=zd();let i=new ah(((e,t)=>e-t)),r=Wd();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const r of e)r.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||hh.empty();a=r.applyToLocalView(s,a),n.set(e,a);const o=(i.get(r.batchId)||Wd()).add(e);i=i.insert(r.batchId,o)}))})).next((()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const i=a.getNext(),o=i.key,l=i.value,c=Vd();l.forEach((e=>{if(!r.has(e)){const i=pf(t.get(e),n.get(e));null!==i&&c.set(e,i),r=r.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Gu.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return Uu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):xd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-r.size):Gu.resolve(Ud());let a=-1,o=r;return s.next((t=>Gu.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),r.get(t)?Gu.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{o=o.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,r))).next((()=>this.computeViews(e,o,t,Wd()))).next((e=>({batchId:a,changes:Fd(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Uu(t)).next((e=>{let t=Ld();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const i=t.collectionGroup;let r=Ld();return this.indexManager.getCollectionParents(e,i).next((s=>Gu.forEach(s,(s=>{const a=function(e,t){return new gd(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n).next((e=>{e.forEach(((e,t)=>{r=r.insert(e,t)}))}))})).next((()=>r))))}getDocumentsMatchingCollectionQuery(e,t,n){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((r=>(i=r,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i)))).next((e=>{i.forEach(((t,n)=>{const i=n.getKey();null===e.get(i)&&(e=e.insert(i,zh.newInvalidDocument(i)))}));let n=Ld();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&mf(s.mutation,r,hh.empty(),Pu.now()),Id(t,r)&&(n=n.insert(e,r))})),n}))}}class Up{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return Gu.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:sp(n.createTime)}),Gu.resolve()}getNamedQuery(e,t){return Gu.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:Dp(e.bundledQuery),readTime:sp(e.readTime)}}(t)),Gu.resolve()}}class Vp{constructor(){this.overlays=new ah(Uu.comparator),this.ls=new Map}getOverlay(e,t){return Gu.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Ud();return Gu.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,i)=>{this.we(e,t,i)})),Gu.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.ls.get(n);return void 0!==i&&(i.forEach((e=>this.overlays=this.overlays.remove(e))),this.ls.delete(n)),Gu.resolve()}getOverlaysForCollection(e,t,n){const i=Ud(),r=t.length+1,s=new Uu(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===r&&e.largestBatchId>n&&i.set(e.getKey(),e)}return Gu.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let r=new ah(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=r.get(e.largestBatchId);null===t&&(t=Ud(),r=r.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Ud(),o=r.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=i)););return Gu.resolve(a)}we(e,t,n){const i=this.overlays.get(n.key);if(null!==i){const e=this.ls.get(i.largestBatchId).delete(n.key);this.ls.set(i.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Nf(t,n));let r=this.ls.get(t);void 0===r&&(r=Wd(),this.ls.set(t,r)),this.ls.set(t,r.add(n.key))}}class zp{constructor(){this.fs=new ch(Bp.ds),this.ws=new ch(Bp._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new Bp(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.ys(new Bp(e,t))}ps(e,t){e.forEach((e=>this.removeReference(e,t)))}Is(e){const t=new Uu(new Ou([])),n=new Bp(t,e),i=new Bp(t,e+1),r=[];return this.ws.forEachInRange([n,i],(e=>{this.ys(e),r.push(e.key)})),r}Ts(){this.fs.forEach((e=>this.ys(e)))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Uu(new Ou([])),n=new Bp(t,e),i=new Bp(t,e+1);let r=Wd();return this.ws.forEachInRange([n,i],(e=>{r=r.add(e.key)})),r}containsKey(e){const t=new Bp(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Bp{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Uu.comparator(e.key,t.key)||Au(e.As,t.As)}static _s(e,t){return Au(e.As,t.As)||Uu.comparator(e.key,t.key)}}class $p{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new ch(Bp.ds)}checkEmpty(e){return Gu.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,i){const r=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Tf(r,t,n,i);this.mutationQueue.push(s);for(const a of i)this.Rs=this.Rs.add(new Bp(a.key,r)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Gu.resolve(s)}lookupMutationBatch(e,t){return Gu.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.bs(n),r=i<0?0:i;return Gu.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Gu.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Gu.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Bp(t,0),i=new Bp(t,Number.POSITIVE_INFINITY),r=[];return this.Rs.forEachInRange([n,i],(e=>{const t=this.Ps(e.As);r.push(t)})),Gu.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ch(Au);return t.forEach((e=>{const t=new Bp(e,0),i=new Bp(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,i],(e=>{n=n.add(e.As)}))})),Gu.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let r=n;Uu.isDocumentKey(r)||(r=r.child(""));const s=new Bp(new Uu(r),0);let a=new ch(Au);return this.Rs.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===i&&(a=a.add(e.As)),!0)}),s),Gu.resolve(this.Vs(a))}Vs(e){const t=[];return e.forEach((e=>{const n=this.Ps(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){mu(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return Gu.forEach(t.mutations,(i=>{const r=new Bp(i.key,t.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Rs=n}))}Cn(e){}containsKey(e,t){const n=new Bp(t,0),i=this.Rs.firstAfterOrEqual(n);return Gu.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Gu.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Wp{constructor(e){this.Ds=e,this.docs=new ah(Uu.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),r=i?i.size:0,s=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Gu.resolve(n?n.document.mutableCopy():zh.newInvalidDocument(t))}getEntries(e,t){let n=jd();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():zh.newInvalidDocument(e))})),Gu.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let r=jd();const s=t.path,a=new Uu(s.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Wu(Bu(a),n)<=0||(i.has(a.key)||Id(t,a))&&(r=r.insert(a.key,a.mutableCopy()))}return Gu.resolve(r)}getAllFromCollectionGroup(e,t,n,i){gu()}Cs(e,t){return Gu.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Hp(this)}getSize(e){return Gu.resolve(this.size)}}class Hp extends Op{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(n)})),Gu.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class qp{constructor(e){this.persistence=e,this.xs=new Pd((e=>dd(e)),fd),this.lastRemoteSnapshotVersion=Ru.min(),this.highestTargetId=0,this.Ns=0,this.ks=new zp,this.targetCount=0,this.Ms=jp.kn()}forEachTarget(e,t){return this.xs.forEach(((e,n)=>t(n))),Gu.resolve()}getLastRemoteSnapshotVersion(e){return Gu.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Gu.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Gu.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),Gu.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new jp(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,Gu.resolve()}updateTargetData(e,t){return this.Fn(t),Gu.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Gu.resolve()}removeTargets(e,t,n){let i=0;const r=[];return this.xs.forEach(((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.xs.delete(s),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)})),Gu.waitFor(r).next((()=>i))}getTargetCount(e){return Gu.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return Gu.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),Gu.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const i=this.persistence.referenceDelegate,r=[];return i&&t.forEach((t=>{r.push(i.markPotentiallyOrphaned(e,t))})),Gu.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),Gu.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return Gu.resolve(n)}containsKey(e,t){return Gu.resolve(this.ks.containsKey(t))}}class Kp{constructor(e,t){this.$s={},this.overlays={},this.Os=new Qu(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new qp(this),this.indexManager=new Mp,this.remoteDocumentCache=function(e){return new Wp(e)}((e=>this.referenceDelegate.Ls(e))),this.serializer=new Ip(t),this.qs=new Up(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Vp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new $p(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){hu("MemoryPersistence","Starting transaction:",e);const i=new Gp(this.Os.next());return this.referenceDelegate.Us(),n(i).next((e=>this.referenceDelegate.Ks(i).next((()=>e)))).toPromise().then((e=>(i.raiseOnCommittedEvent(),e)))}Gs(e,t){return Gu.or(Object.values(this.$s).map((n=>()=>n.containsKey(e,t))))}}class Gp extends qu{constructor(e){super(),this.currentSequenceNumber=e}}class Yp{constructor(e){this.persistence=e,this.Qs=new zp,this.js=null}static zs(e){return new Yp(e)}get Ws(){if(this.js)return this.js;throw gu()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),Gu.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),Gu.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),Gu.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach((e=>this.Ws.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Ws.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Gu.forEach(this.Ws,(n=>{const i=Uu.fromPath(n);return this.Hs(e,i).next((e=>{e||t.removeEntry(i,Ru.min())}))})).next((()=>(this.js=null,t.apply(e))))}updateLimboDocument(e,t){return this.Hs(e,t).next((e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())}))}Ls(e){return 0}Hs(e,t){return Gu.or([()=>Gu.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Qp{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=i}static Li(e,t){let n=Wd(),i=Wd();for(const r of t.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Qp(e,t.fromCache,n,i)}}class Xp{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,i){return this.Ki(e,t).next((r=>r||this.Gi(e,t,i,n))).next((n=>n||this.Qi(e,t)))}Ki(e,t){if(yd(t))return Gu.resolve(null);let n=kd(t);return this.indexManager.getIndexType(e,n).next((i=>0===i?null:(null!==t.limit&&1===i&&(t=Ed(t,null,"F"),n=kd(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const r=Wd(...i);return this.Ui.getDocuments(e,r).next((i=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.ji(t,i);return this.zi(t,s,r,n.readTime)?this.Ki(e,Ed(t,null,"F")):this.Wi(e,s,t,n)}))))})))))}Gi(e,t,n,i){return yd(t)||i.isEqual(Ru.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((r=>{const s=this.ji(t,r);return this.zi(t,s,n,i)?this.Qi(e,t):(uu()<=pt.DEBUG&&hu("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Nd(t)),this.Wi(e,s,t,zu(i,-1)))}))}ji(e,t){let n=new ch(Ad(e));return t.forEach(((t,i)=>{Id(e,i)&&(n=n.add(i))})),n}zi(e,t,n,i){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Qi(e,t){return uu()<=pt.DEBUG&&hu("QueryEngine","Using full collection scan to execute query:",Nd(t)),this.Ui.getDocumentsMatchingQuery(e,t,$u.min())}Wi(e,t,n,i){return this.Ui.getDocumentsMatchingQuery(e,n,i).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Jp{constructor(e,t,n,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new ah(Au),this.Yi=new Pd((e=>dd(e)),fd),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Fp(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ji)))}}function Zp(e,t,n,i){return new Jp(e,t,n,i)}async function eg(e,t){const n=vu(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let i;return n.mutationQueue.getAllMutationBatches(e).next((r=>(i=r,n.tr(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const r=[],s=[];let a=Wd();for(const e of i){r.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({er:e,removedBatchIds:r,addedBatchIds:s})))}))}))}function tg(e){const t=vu(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Bs.getLastRemoteSnapshotVersion(e)))}function ng(e,t,n){let i=Wd(),r=Wd();return n.forEach((e=>i=i.add(e))),t.getEntries(e,i).next((e=>{let i=jd();return n.forEach(((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(r=r.add(n)),s.isNoDocument()&&s.version.isEqual(Ru.min())?(t.removeEntry(n,s.readTime),i=i.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),i=i.insert(n,s)):hu("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),{nr:i,sr:r}}))}function ig(e,t){const n=vu(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function rg(e,t){const n=vu(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let i;return n.Bs.getTargetData(e,t).next((r=>r?(i=r,Gu.resolve(i)):n.Bs.allocateTargetId(e).next((r=>(i=new Np(t,r,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,i).next((()=>i)))))))})).then((e=>{const i=n.Ji.get(e.targetId);return(null===i||e.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}async function sg(e,t,n){const i=vu(e),r=i.Ji.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,(e=>i.persistence.referenceDelegate.removeTarget(e,r)))}catch(e){if(!Yu(e))throw e;hu("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}i.Ji=i.Ji.remove(t),i.Yi.delete(r.target)}function ag(e,t,n){const i=vu(e);let r=Ru.min(),s=Wd();return i.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const i=vu(e),r=i.Yi.get(n);return void 0!==r?Gu.resolve(i.Ji.get(r)):i.Bs.getTargetData(t,n)}(i,e,kd(t)).next((t=>{if(t)return r=t.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>i.Hi.getDocumentsMatchingQuery(e,t,n?r:Ru.min(),n?s:Wd()))).next((e=>(og(i,Dd(t),e),{documents:e,ir:s})))))}function og(e,t,n){let i=e.Xi.get(t)||Ru.min();n.forEach(((e,t)=>{t.readTime.compareTo(i)>0&&(i=t.readTime)})),e.Xi.set(t,i)}class lg{constructor(){this.activeTargetIds=qd()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cg{constructor(){this.Hr=new lg,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new lg,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ug{Yr(e){}shutdown(){}}class hg{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){hu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){hu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let dg=null;function fg(){return null===dg?dg=268435456+Math.round(2147483648*Math.random()):dg++,"0x"+dg.toString(16)}const pg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gg{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const mg="WebChannelConnection";class vg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,i,r){const s=fg(),a=this.To(e,t);hu("RestConnection",`Sending RPC '${e}' ${s}:`,a,n);const o={};return this.Eo(o,i,r),this.Ao(e,a,o,n).then((t=>(hu("RestConnection",`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw fu("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",a,"request:",n),t}))}vo(e,t,n,i,r,s){return this.Io(e,t,n,i,r)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+lu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}To(e,t){const n=pg[e];return`${this.mo}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,i){const r=fg();return new Promise(((s,a)=>{const o=new iu;o.setWithCredentials(!0),o.listenOnce(Jc.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case Xc.NO_ERROR:const t=o.getResponseJson();hu(mg,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(t)),s(t);break;case Xc.TIMEOUT:hu(mg,`RPC '${e}' ${r} timed out`),a(new bu(yu.DEADLINE_EXCEEDED,"Request time out"));break;case Xc.HTTP_ERROR:const n=o.getStatus();if(hu(mg,`RPC '${e}' ${r} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(yu).indexOf(t)>=0?t:yu.UNKNOWN}(t.status);a(new bu(e,t.message))}else a(new bu(yu.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new bu(yu.UNAVAILABLE,"Connection failed."));break;default:gu()}}finally{hu(mg,`RPC '${e}' ${r} completed.`)}}));const l=JSON.stringify(i);hu(mg,`RPC '${e}' ${r} sending request:`,i),o.send(t,"POST",l,n,15)}))}Ro(e,t,n){const i=fg(),r=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Yc(),a=Qc(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.xmlHttpFactory=new tu({})),this.Eo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=r.join("");hu(mg,`Creating RPC '${e}' stream ${i}: ${c}`,o);const u=s.createWebChannel(c,o);let h=!1,d=!1;const f=new gg({ro:t=>{d?hu(mg,`Not sending because RPC '${e}' stream ${i} is closed:`,t):(h||(hu(mg,`Opening RPC '${e}' stream ${i} transport.`),u.open(),h=!0),hu(mg,`RPC '${e}' stream ${i} sending:`,t),u.send(t))},oo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,nu.EventType.OPEN,(()=>{d||hu(mg,`RPC '${e}' stream ${i} transport opened.`)})),p(u,nu.EventType.CLOSE,(()=>{d||(d=!0,hu(mg,`RPC '${e}' stream ${i} transport closed`),f.wo())})),p(u,nu.EventType.ERROR,(t=>{d||(d=!0,fu(mg,`RPC '${e}' stream ${i} transport errored:`,t),f.wo(new bu(yu.UNAVAILABLE,"The operation could not be completed")))})),p(u,nu.EventType.MESSAGE,(t=>{var n;if(!d){const r=t.data[0];mu(!!r);const s=r,a=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){hu(mg,`RPC '${e}' stream ${i} received error:`,a);const t=a.status;let n=function(e){const t=Df[e];if(void 0!==t)return Pf(t)}(t),r=a.message;void 0===n&&(n=yu.INTERNAL,r="Unknown error status: "+t+" with message "+a.message),d=!0,f.wo(new bu(n,r)),u.close()}else hu(mg,`RPC '${e}' stream ${i} received:`,r),f._o(r)}})),p(a,Zc.STAT_EVENT,(t=>{t.stat===eu.PROXY?hu(mg,`RPC '${e}' stream ${i} detected buffering proxy`):t.stat===eu.NOPROXY&&hu(mg,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{f.fo()}),0),f}}function yg(){return"undefined"!=typeof document?document:null}function bg(e){return new ep(e,!0)}class wg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=i,this.Vo=r,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-n);i>0&&hu("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,(()=>(this.Co=Date.now(),e()))),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class xg{constructor(e,t,n,i,r,s,a,o){this.ii=e,this.$o=n,this.Oo=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new wg(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(()=>this.zo())))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===yu.RESOURCE_EXHAUSTED?(du(t.toString()),du("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===yu.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,i]=e;this.Fo===t&&this.Zo(n,i)}),(t=>{e((()=>{const e=new bu(yu.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)}))}))}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((()=>{n((()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,(()=>(this.Ko()&&(this.state=3),Promise.resolve()))),this.listener.uo())))})),this.stream.ao((e=>{n((()=>this.tu(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Go(){this.state=5,this.qo.No((async()=>{this.state=0,this.start()}))}tu(e){return hu("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget((()=>this.Fo===e?t():(hu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class _g extends xg{constructor(e,t,n,i,r,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,s),this.serializer=r}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:gu()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(mu(void 0===t||"string"==typeof t),fh.fromBase64String(t||"")):(mu(void 0===t||t instanceof Uint8Array),fh.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?yu.UNKNOWN:Pf(e.code);return new bu(t,e.message||"")}(a);n=new qf(i,r,s,o||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=cp(e,i.document.name),s=sp(i.document.updateTime),a=i.document.createTime?sp(i.document.createTime):Ru.min(),o=new Uh({mapValue:{fields:i.document.fields}}),l=zh.newFoundDocument(r,s,a,o),c=i.targetIds||[],u=i.removedTargetIds||[];n=new Wf(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=cp(e,i.document),s=i.readTime?sp(i.readTime):Ru.min(),a=zh.newNoDocument(r,s),o=i.removedTargetIds||[];n=new Wf([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=cp(e,i.document),s=i.removedTargetIds||[];n=new Wf([],s,r,null)}else{if(!("filter"in t))return gu();{t.filter;const e=t.filter;e.targetId;const{count:i=0,unchangedNames:r}=e,s=new If(i,r),a=e.targetId;n=new Hf(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Ru.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Ru.min():t.readTime?sp(t.readTime):Ru.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=dp(this.serializer),t.addTarget=function(e,t){let n;const i=t.target;if(n=pd(i)?{documents:mp(e,i)}:{query:vp(e,i)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=ip(e,t.resumeToken);const i=tp(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Ru.min())>0){n.readTime=np(e,t.snapshotVersion.toTimestamp());const i=tp(e,t.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gu()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=dp(this.serializer),t.removeTarget=e,this.Wo(t)}}class kg extends xg{constructor(e,t,n,i,r,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,s),this.serializer=r,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(mu(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(mu(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?sp(e.updateTime):sp(t);return n.isEqual(Ru.min())&&(n=sp(t)),new uf(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=sp(e.commitTime);return this.listener.cu(n,t)}return mu(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=dp(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>gp(this.serializer,e)))};this.Wo(t)}}class Sg extends class{}{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new bu(yu.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[r,s]=i;return this.connection.Io(e,t,n,r,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===yu.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new bu(yu.UNKNOWN,e.toString())}))}vo(e,t,n,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[s,a]=r;return this.connection.vo(e,t,n,s,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===yu.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new bu(yu.UNKNOWN,e.toString())}))}terminate(){this.lu=!0}}class Eg{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve()))))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(du(t),this.mu=!1):hu("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Tg{constructor(e,t,n,i,r){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=r,this.Pu.Yr((e=>{n.enqueueAndForget((async()=>{jg(this)&&(hu("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=vu(e);t.vu.add(4),await Ng(t),t.bu.set("Unknown"),t.vu.delete(4),await Cg(t)}(this))}))})),this.bu=new Eg(n,i)}}async function Cg(e){if(jg(e))for(const t of e.Ru)await t(!0)}async function Ng(e){for(const t of e.Ru)await t(!1)}function Ig(e,t){const n=vu(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),Rg(n)?Pg(n):Zg(n).Ko()&&Ag(n,t))}function Dg(e,t){const n=vu(e),i=Zg(n);n.Au.delete(t),i.Ko()&&Mg(n,t),0===n.Au.size&&(i.Ko()?i.jo():jg(n)&&n.bu.set("Unknown"))}function Ag(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ru.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Zg(e).su(t)}function Mg(e,t){e.Vu.qt(t),Zg(e).iu(t)}function Pg(e){e.Vu=new Gf({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),Zg(e).start(),e.bu.gu()}function Rg(e){return jg(e)&&!Zg(e).Uo()&&e.Au.size>0}function jg(e){return 0===vu(e).vu.size}function Og(e){e.Vu=void 0}async function Lg(e){e.Au.forEach(((t,n)=>{Ag(e,t)}))}async function Fg(e,t){Og(e),Rg(e)?(e.bu.Iu(t),Pg(e)):e.bu.set("Unknown")}async function Ug(e,t,n){if(e.bu.set("Online"),t instanceof qf&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const i of t.targetIds)e.Au.has(i)&&(await e.remoteSyncer.rejectListen(i,n),e.Au.delete(i),e.Vu.removeTarget(i))}(e,t)}catch(n){hu("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Vg(e,n)}else if(t instanceof Wf?e.Vu.Ht(t):t instanceof Hf?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(Ru.min()))try{const t=await tg(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=e.Au.get(i);r&&e.Au.set(i,r.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const i=e.Au.get(t);if(!i)return;e.Au.set(t,i.withResumeToken(fh.EMPTY_BYTE_STRING,i.snapshotVersion)),Mg(e,t);const r=new Np(i.target,t,n,i.sequenceNumber);Ag(e,r)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){hu("RemoteStore","Failed to raise snapshot:",t),await Vg(e,t)}}async function Vg(e,t,n){if(!Yu(t))throw t;e.vu.add(1),await Ng(e),e.bu.set("Offline"),n||(n=()=>tg(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{hu("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await Cg(e)}))}function zg(e,t){return t().catch((n=>Vg(e,n,t)))}async function Bg(e){const t=vu(e),n=em(t);let i=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;$g(t);)try{const e=await ig(t.localStore,i);if(null===e){0===t.Eu.length&&n.jo();break}i=e.batchId,Wg(t,e)}catch(e){await Vg(t,e)}Hg(t)&&qg(t)}function $g(e){return jg(e)&&e.Eu.length<10}function Wg(e,t){e.Eu.push(t);const n=em(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function Hg(e){return jg(e)&&!em(e).Uo()&&e.Eu.length>0}function qg(e){em(e).start()}async function Kg(e){em(e).hu()}async function Gg(e){const t=em(e);for(const n of e.Eu)t.uu(n.mutations)}async function Yg(e,t,n){const i=e.Eu.shift(),r=Cf.from(i,t,n);await zg(e,(()=>e.remoteSyncer.applySuccessfulWrite(r))),await Bg(e)}async function Qg(e,t){t&&em(e).ou&&await async function(e,t){if(Mf(n=t.code)&&n!==yu.ABORTED){const n=e.Eu.shift();em(e).Qo(),await zg(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Bg(e)}var n}(e,t),Hg(e)&&qg(e)}async function Xg(e,t){const n=vu(e);n.asyncQueue.verifyOperationInProgress(),hu("RemoteStore","RemoteStore received new credentials");const i=jg(n);n.vu.add(3),await Ng(n),i&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await Cg(n)}async function Jg(e,t){const n=vu(e);t?(n.vu.delete(2),await Cg(n)):t||(n.vu.add(2),await Ng(n),n.bu.set("Unknown"))}function Zg(e){return e.Su||(e.Su=function(e,t,n){const i=vu(e);return i.fu(),new _g(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{uo:Lg.bind(null,e),ao:Fg.bind(null,e),nu:Ug.bind(null,e)}),e.Ru.push((async t=>{t?(e.Su.Qo(),Rg(e)?Pg(e):e.bu.set("Unknown")):(await e.Su.stop(),Og(e))}))),e.Su}function em(e){return e.Du||(e.Du=function(e,t,n){const i=vu(e);return i.fu(),new kg(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{uo:Kg.bind(null,e),ao:Qg.bind(null,e),au:Gg.bind(null,e),cu:Yg.bind(null,e)}),e.Ru.push((async t=>{t?(e.Du.Qo(),await Bg(e)):(await e.Du.stop(),e.Eu.length>0&&(hu("RemoteStore",`Stopping write stream with ${e.Eu.length} pending writes`),e.Eu=[]))}))),e.Du}class tm{constructor(e,t,n,i,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new wu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,i,r){const s=Date.now()+n,a=new tm(e,t,s,i,r);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new bu(yu.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nm(e,t){if(du("AsyncQueue",`${t}: ${e}`),Yu(e))return new bu(yu.UNAVAILABLE,`${t}: ${e}`);throw e}class im{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Uu.comparator(t.key,n.key):(e,t)=>Uu.comparator(e.key,t.key),this.keyedMap=Ld(),this.sortedSet=new ah(this.comparator)}static emptySet(e){return new im(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof im))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(!e.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new im;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class rm{constructor(){this.Cu=new ah(Uu.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):gu():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class sm{constructor(e,t,n,i,r,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,i,r){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new sm(e,t,im.emptySet(t),s,n,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Td(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}class am{constructor(){this.Nu=void 0,this.listeners=[]}}class om{constructor(){this.queries=new Pd((e=>Cd(e)),Td),this.onlineState="Unknown",this.ku=new Set}}async function lm(e,t){const n=vu(e),i=t.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new am),r)try{s.Nu=await n.onListen(i)}catch(e){const n=nm(e,`Initialization of query '${Nd(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.listeners.push(t),t.Mu(n.onlineState),s.Nu&&t.$u(s.Nu)&&dm(n)}async function cm(e,t){const n=vu(e),i=t.query;let r=!1;const s=n.queries.get(i);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),r=0===s.listeners.length)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function um(e,t){const n=vu(e);let i=!1;for(const r of t){const e=r.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(r)&&(i=!0);t.Nu=r}}i&&dm(n)}function hm(e,t,n){const i=vu(e),r=i.queries.get(t);if(r)for(const s of r.listeners)s.onError(n);i.queries.delete(t)}function dm(e){e.ku.forEach((e=>{e.next()}))}class fm{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new sm(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=sm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class pm{constructor(e){this.key=e}}class gm{constructor(e){this.key=e}}class mm{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Wd(),this.mutatedKeys=Wd(),this.tc=Ad(e),this.ec=new im(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new rm,i=t?t.ec:this.ec;let r=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1;const o="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((e,t)=>{const c=i.get(e),u=Id(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.rc(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.tc(u,o)>0||l&&this.tc(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(s=s.add(u),r=d?r.add(e):r.delete(e)):(s=s.delete(e),r=r.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),r=r.delete(e.key),n.track({type:1,doc:e})}return{ec:s,ic:n,zi:a,mutatedKeys:r}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const r=e.ic.xu();r.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gu()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc))),this.oc(n);const s=t?this.uc():[],a=0===this.Zu.size&&this.current?1:0,o=a!==this.Xu;return this.Xu=a,0!==r.length||o?{snapshot:new sm(this.query,e.ec,i,r,e.mutatedKeys,0===a,o,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:s}:{cc:s}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new rm,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach((e=>this.Yu=this.Yu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Yu=this.Yu.delete(e))),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Wd(),this.ec.forEach((e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))}));const t=[];return e.forEach((e=>{this.Zu.has(e)||t.push(new gm(e))})),this.Zu.forEach((n=>{e.has(n)||t.push(new pm(n))})),t}hc(e){this.Yu=e.ir,this.Zu=Wd();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return sm.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class vm{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class ym{constructor(e){this.key=e,this.fc=!1}}class bm{constructor(e,t,n,i,r,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.dc={},this.wc=new Pd((e=>Cd(e)),Td),this._c=new Map,this.mc=new Set,this.gc=new ah(Uu.comparator),this.yc=new Map,this.Ic=new zp,this.Tc={},this.Ec=new Map,this.Ac=jp.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function wm(e,t){const n=Fm(e);let i,r;const s=n.wc.get(t);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.lc();else{const e=await rg(n.localStore,kd(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);i=e.targetId,r=await xm(n,t,i,"current"===s,e.resumeToken),n.isPrimaryClient&&Ig(n.remoteStore,e)}return r}async function xm(e,t,n,i,r){e.Rc=(t,n,i)=>async function(e,t,n,i){let r=t.view.sc(n);r.zi&&(r=await ag(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.sc(n,r)})));const s=i&&i.targetChanges.get(t.targetId),a=t.view.applyChanges(r,e.isPrimaryClient,s);return Mm(e,t.targetId,a.cc),a.snapshot}(e,t,n,i);const s=await ag(e.localStore,t,!0),a=new mm(t,s.ir),o=a.sc(s.documents),l=$f.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==e.onlineState,r),c=a.applyChanges(o,e.isPrimaryClient,l);Mm(e,n,c.cc);const u=new vm(t,n,a);return e.wc.set(t,u),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),c.snapshot}async function _m(e,t){const n=vu(e),i=n.wc.get(t),r=n._c.get(i.targetId);if(r.length>1)return n._c.set(i.targetId,r.filter((e=>!Td(e,t)))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await sg(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),Dg(n.remoteStore,i.targetId),Dm(n,i.targetId)})).catch(Ku)):(Dm(n,i.targetId),await sg(n.localStore,i.targetId,!0))}async function km(e,t){const n=vu(e);try{const e=await function(e,t){const n=vu(e),i=t.snapshotVersion;let r=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Zi.newChangeBuffer({trackRemovals:!0});r=n.Ji;const a=[];t.targetChanges.forEach(((s,o)=>{const l=r.get(o);if(!l)return;a.push(n.Bs.removeMatchingKeys(e,s.removedDocuments,o).next((()=>n.Bs.addMatchingKeys(e,s.addedDocuments,o))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(fh.EMPTY_BYTE_STRING,Ru.min()).withLastLimboFreeSnapshotVersion(Ru.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,i)),r=r.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&a.push(n.Bs.updateTargetData(e,c))}));let o=jd(),l=Wd();if(t.documentUpdates.forEach((i=>{t.resolvedLimboDocuments.has(i)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,i))})),a.push(ng(e,s,t.documentUpdates).next((e=>{o=e.nr,l=e.sr}))),!i.isEqual(Ru.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next((t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,i)));a.push(t)}return Gu.waitFor(a).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,o,l))).next((()=>o))})).then((e=>(n.Ji=r,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const i=n.yc.get(t);i&&(mu(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?i.fc=!0:e.modifiedDocuments.size>0?mu(i.fc):e.removedDocuments.size>0&&(mu(i.fc),i.fc=!1))})),await jm(n,e,t)}catch(e){await Ku(e)}}function Sm(e,t,n){const i=vu(e);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const e=[];i.wc.forEach(((n,i)=>{const r=i.view.Mu(t);r.snapshot&&e.push(r.snapshot)})),function(e,t){const n=vu(e);n.onlineState=t;let i=!1;n.queries.forEach(((e,n)=>{for(const r of n.listeners)r.Mu(t)&&(i=!0)})),i&&dm(n)}(i.eventManager,t),e.length&&i.dc.nu(e),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function Em(e,t,n){const i=vu(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.yc.get(t),s=r&&r.key;if(s){let e=new ah(Uu.comparator);e=e.insert(s,zh.newNoDocument(s,Ru.min()));const n=Wd().add(s),r=new Bf(Ru.min(),new Map,new ah(Au),e,n);await km(i,r),i.gc=i.gc.remove(s),i.yc.delete(t),Rm(i)}else await sg(i.localStore,t,!1).then((()=>Dm(i,t,n))).catch(Ku)}async function Tm(e,t){const n=vu(e),i=t.batch.batchId;try{const e=await function(e,t){const n=vu(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const i=t.batch.keys(),r=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,i){const r=n.batch,s=r.keys();let a=Gu.resolve();return s.forEach((e=>{a=a.next((()=>i.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);mu(null!==s),t.version.compareTo(s)<0&&(r.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),i.addEntry(t)))}))})),a.next((()=>e.mutationQueue.removeMutationBatch(t,r)))}(n,e,t,r).next((()=>r.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Wd();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,i)))}))}(n.localStore,t);Im(n,i,null),Nm(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await jm(n,e)}catch(e){await Ku(e)}}async function Cm(e,t,n){const i=vu(e);try{const e=await function(e,t){const n=vu(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let i;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(mu(null!==t),i=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,i))).next((()=>n.localDocuments.getDocuments(e,i)))}))}(i.localStore,t);Im(i,t,n),Nm(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await jm(i,e)}catch(n){await Ku(n)}}function Nm(e,t){(e.Ec.get(t)||[]).forEach((e=>{e.resolve()})),e.Ec.delete(t)}function Im(e,t,n){const i=vu(e);let r=i.Tc[i.currentUser.toKey()];if(r){const e=r.get(t);e&&(n?e.reject(n):e.resolve(),r=r.remove(t)),i.Tc[i.currentUser.toKey()]=r}}function Dm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const i of e._c.get(t))e.wc.delete(i),n&&e.dc.Pc(i,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((t=>{e.Ic.containsKey(t)||Am(e,t)}))}function Am(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(Dg(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),Rm(e))}function Mm(e,t,n){for(const i of n)i instanceof pm?(e.Ic.addReference(i.key,t),Pm(e,i)):i instanceof gm?(hu("SyncEngine","Document no longer in limbo: "+i.key),e.Ic.removeReference(i.key,t),e.Ic.containsKey(i.key)||Am(e,i.key)):gu()}function Pm(e,t){const n=t.key,i=n.path.canonicalString();e.gc.get(n)||e.mc.has(i)||(hu("SyncEngine","New document in limbo: "+n),e.mc.add(i),Rm(e))}function Rm(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new Uu(Ou.fromString(t)),i=e.Ac.next();e.yc.set(i,new ym(n)),e.gc=e.gc.insert(n,i),Ig(e.remoteStore,new Np(kd(vd(n.path)),i,"TargetPurposeLimboResolution",Qu.ct))}}async function jm(e,t,n){const i=vu(e),r=[],s=[],a=[];i.wc.isEmpty()||(i.wc.forEach(((e,o)=>{a.push(i.Rc(o,t,n).then((e=>{if((e||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(o.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){r.push(e);const t=Qp.Li(o.targetId,e);s.push(t)}})))})),await Promise.all(a),i.dc.nu(r),await async function(e,t){const n=vu(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Gu.forEach(t,(t=>Gu.forEach(t.Fi,(i=>n.persistence.referenceDelegate.addReference(e,t.targetId,i))).next((()=>Gu.forEach(t.Bi,(i=>n.persistence.referenceDelegate.removeReference(e,t.targetId,i)))))))))}catch(e){if(!Yu(e))throw e;hu("LocalStore","Failed to update sequence numbers: "+e)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.Ji.get(e),i=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(i);n.Ji=n.Ji.insert(e,r)}}}(i.localStore,s))}async function Om(e,t){const n=vu(e);if(!n.currentUser.isEqual(t)){hu("SyncEngine","User change. New user:",t.toKey());const e=await eg(n.localStore,t);n.currentUser=t,function(e){e.Ec.forEach((e=>{e.forEach((e=>{e.reject(new bu(yu.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await jm(n,e.er)}}function Lm(e,t){const n=vu(e),i=n.yc.get(t);if(i&&i.fc)return Wd().add(i.key);{let e=Wd();const i=n._c.get(t);if(!i)return e;for(const t of i){const i=n.wc.get(t);e=e.unionWith(i.view.nc)}return e}}function Fm(e){const t=vu(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=km.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Lm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Em.bind(null,t),t.dc.nu=um.bind(null,t.eventManager),t.dc.Pc=hm.bind(null,t.eventManager),t}function Um(e){const t=vu(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Tm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Cm.bind(null,t),t}class Vm{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=bg(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Zp(this.persistence,new Xp,e.initialUser,this.serializer)}createPersistence(e){return new Kp(Yp.zs,this.serializer)}createSharedClientState(e){return new cg}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class zm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Sm(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Om.bind(null,this.syncEngine),await Jg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new om}createDatastore(e){const t=bg(e.databaseInfo.databaseId),n=(i=e.databaseInfo,new vg(i));var i;return function(e,t,n,i){return new Sg(e,t,n,i)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,i=e.asyncQueue,r=e=>Sm(this.syncEngine,e,0),s=hg.D()?new hg:new ug,new Tg(t,n,i,r,s);var t,n,i,r,s}createSyncEngine(e,t){return function(e,t,n,i,r,s,a){const o=new bm(e,t,n,i,r,s);return a&&(o.vc=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=vu(e);hu("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await Ng(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}class Bm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):du("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class $m{constructor(e,t,n,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=ou.UNAUTHENTICATED,this.clientId=Du.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{hu("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(hu("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new bu(yu.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(SI){const n=nm(SI,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Wm(e,t){e.asyncQueue.verifyOperationInProgress(),hu("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener((async e=>{i.isEqual(e)||(await eg(t.localStore,e),i=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Hm(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Km(e);hu("FirestoreClient","Initializing OnlineComponentProvider");const i=await e.getConfiguration();await t.initialize(n,i),e.setCredentialChangeListener((e=>Xg(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Xg(t.remoteStore,n))),e._onlineComponents=t}function qm(e){return"FirebaseError"===e.name?e.code===yu.FAILED_PRECONDITION||e.code===yu.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Km(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){hu("FirestoreClient","Using user provided OfflineComponentProvider");try{await Wm(e,e._uninitializedComponentsProvider._offline)}catch(SI){const n=SI;if(!qm(n))throw n;fu("Error using user provided cache. Falling back to memory cache: "+n),await Wm(e,new Vm)}}else hu("FirestoreClient","Using default OfflineComponentProvider"),await Wm(e,new Vm);return e._offlineComponents}async function Gm(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(hu("FirestoreClient","Using user provided OnlineComponentProvider"),await Hm(e,e._uninitializedComponentsProvider._online)):(hu("FirestoreClient","Using default OnlineComponentProvider"),await Hm(e,new zm))),e._onlineComponents}function Ym(e){return Gm(e).then((e=>e.syncEngine))}async function Qm(e){const t=await Gm(e),n=t.eventManager;return n.onListen=wm.bind(null,t.syncEngine),n.onUnlisten=_m.bind(null,t.syncEngine),n}function Xm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new wu;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,i,r){const s=new Bm({next:s=>{t.enqueueAndForget((()=>cm(e,a)));const o=s.docs.has(n);!o&&s.fromCache?r.reject(new bu(yu.UNAVAILABLE,"Failed to get document because the client is offline.")):o&&s.fromCache&&i&&"server"===i.source?r.reject(new bu(yu.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(s)},error:e=>r.reject(e)}),a=new fm(vd(n.path),s,{includeMetadataChanges:!0,Ku:!0});return lm(e,a)}(await Qm(e),e.asyncQueue,t,n,i))),i.promise}function Jm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new wu;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,i,r){const s=new Bm({next:n=>{t.enqueueAndForget((()=>cm(e,a))),n.fromCache&&"server"===i.source?r.reject(new bu(yu.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:e=>r.reject(e)}),a=new fm(n,s,{includeMetadataChanges:!0,Ku:!0});return lm(e,a)}(await Qm(e),e.asyncQueue,t,n,i))),i.promise}function Zm(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const ev=new Map;function tv(e,t,n){if(!n)throw new bu(yu.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function nv(e){if(!Uu.isDocumentKey(e))throw new bu(yu.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function iv(e){if(Uu.isDocumentKey(e))throw new bu(yu.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function rv(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":gu()}function sv(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new bu(yu.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rv(e);throw new bu(yu.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function av(e,t){if(t<=0)throw new bu(yu.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class ov{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new bu(yu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new bu(yu.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,i){if(!0===t&&!0===i)throw new bu(yu.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Zm(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new bu(yu.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new bu(yu.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new bu(yu.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class lv{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ov({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new bu(yu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new bu(yu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ov(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new _u;switch(e.type){case"firstParty":return new Tu(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new bu(yu.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ev.get(e);t&&(hu("ComponentProvider","Removing Datastore"),ev.delete(e),t.terminate())}(this),Promise.resolve()}}class cv{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hv(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cv(this.firestore,e,this._key)}}class uv{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new uv(this.firestore,e,this._query)}}class hv extends uv{constructor(e,t,n){super(e,t,vd(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cv(this.firestore,null,new Uu(e))}withConverter(e){return new hv(this.firestore,e,this._path)}}function dv(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(e=lt(e),tv("collection","path",t),e instanceof lv){const n=Ou.fromString(t,...i);return iv(n),new hv(e,null,n)}{if(!(e instanceof cv||e instanceof hv))throw new bu(yu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ou.fromString(t,...i));return iv(n),new hv(e.firestore,null,n)}}function fv(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(e=lt(e),1===arguments.length&&(t=Du.A()),tv("doc","path",t),e instanceof lv){const n=Ou.fromString(t,...i);return nv(n),new cv(e,null,new Uu(n))}{if(!(e instanceof cv||e instanceof hv))throw new bu(yu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ou.fromString(t,...i));return nv(n),new cv(e.firestore,e instanceof hv?e.converter:null,new Uu(n))}}class pv{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new wg(this,"async_queue_retry"),this.Xc=()=>{const e=yg();e&&hu("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=yg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=yg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise((()=>{}));const t=new wu;return this.ta((()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qc.push(e),this.ea())))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!Yu(e))throw e;hu("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No((()=>this.ea()))}}ta(e){const t=this.Gc.then((()=>(this.Hc=!0,e().catch((e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw du("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Hc=!1,e))))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=tm.createAndSchedule(this,e,t,n,(e=>this.na(e)));return this.zc.push(i),i}Zc(){this.Wc&&gu()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then((()=>{this.zc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()}))}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function gv(e){return function(e){if("object"!=typeof e||null===e)return!1;const t=e;for(const n of["next","error","complete"])if(n in t&&"function"==typeof t[n])return!0;return!1}(e)}class mv extends lv{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new pv,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||yv(this),this._firestoreClient.terminate()}}function vv(e){return e._firestoreClient||yv(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function yv(e){var t,n,i;const r=e._freezeSettings(),s=function(e,t,n,i){return new xh(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,Zm(i.experimentalLongPollingOptions),i.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,r);e._firestoreClient=new $m(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=r.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.cache)||void 0===i?void 0:i._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}class bv{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bv(fh.fromBase64String(e))}catch(e){throw new bu(yu.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new bv(fh.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class wv{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let i=0;i<t.length;++i)if(0===t[i].length)throw new bu(yu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fu(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xv{constructor(e){this._methodName=e}}class _v{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new bu(yu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new bu(yu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Au(this._lat,e._lat)||Au(this._long,e._long)}}const kv=/^__.*__$/;class Sv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new wf(e,this.data,this.fieldMask,t,this.fieldTransforms):new bf(e,this.data,t,this.fieldTransforms)}}class Ev{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new wf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Tv(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gu()}}class Cv{constructor(e,t,n,i,r,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.ua(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Cv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:n,la:!1});return i.fa(e),i}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:n,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Hv(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Tv(this.ca)&&kv.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Nv{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||bg(e)}ya(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Cv({ca:e,methodName:t,ga:n,path:Fu.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Iv(e){const t=e._freezeSettings(),n=bg(e._databaseId);return new Nv(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Dv(e,t,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.ya(s.merge||s.mergeFields?2:0,t,n,r);zv("Data must be an object, but it was:",a,i);const o=Uv(i,a);let l,c;if(s.merge)l=new hh(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const i of s.mergeFields){const r=Bv(t,i,n);if(!a.contains(r))throw new bu(yu.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);qv(e,r)||e.push(r)}l=new hh(e),c=a.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=a.fieldTransforms;return new Sv(new Uh(o),l,c)}class Av extends xv{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Av}}function Mv(e,t,n){return new Cv({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Pv extends xv{_toFieldTransform(e){return new cf(e.path,new ef)}isEqual(e){return e instanceof Pv}}class Rv extends xv{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Mv(this,e,!0),n=this.pa.map((e=>Fv(e,t))),i=new tf(n);return new cf(e.path,i)}isEqual(e){return this===e}}function jv(e,t,n,i){const r=e.ya(1,t,n);zv("Data must be an object, but it was:",r,i);const s=[],a=Uh.empty();rh(i,((e,i)=>{const o=Wv(t,e,n);i=lt(i);const l=r.da(o);if(i instanceof Av)s.push(o);else{const e=Fv(i,l);null!=e&&(s.push(o),a.set(o,e))}}));const o=new hh(s);return new Ev(a,o,r.fieldTransforms)}function Ov(e,t,n,i,r,s){const a=e.ya(1,t,n),o=[Bv(t,i,n)],l=[r];if(s.length%2!=0)throw new bu(yu.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)o.push(Bv(t,s[d])),l.push(s[d+1]);const c=[],u=Uh.empty();for(let d=o.length-1;d>=0;--d)if(!qv(c,o[d])){const e=o[d];let t=l[d];t=lt(t);const n=a.da(e);if(t instanceof Av)c.push(e);else{const i=Fv(t,n);null!=i&&(c.push(e),u.set(e,i))}}const h=new hh(c);return new Ev(u,h,a.fieldTransforms)}function Lv(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Fv(n,e.ya(i?4:3,t))}function Fv(e,t){if(Vv(e=lt(e)))return zv("Unsupported field value:",t,e),Uv(e,t);if(e instanceof xv)return function(e,t){if(!Tv(t.ca))throw t._a(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t._a(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let i=0;for(const r of e){let e=Fv(r,t.wa(i));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),i++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=lt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Yd(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Pu.fromDate(e);return{timestampValue:np(t.serializer,n)}}if(e instanceof Pu){const n=new Pu(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:np(t.serializer,n)}}if(e instanceof _v)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof bv)return{bytesValue:ip(t.serializer,e._byteString)};if(e instanceof cv){const n=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(n))throw t._a(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:ap(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a(`Unsupported field value: ${rv(e)}`)}(e,t)}function Uv(e,t){const n={};return sh(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):rh(e,((e,i)=>{const r=Fv(i,t.ha(e));null!=r&&(n[e]=r)})),{mapValue:{fields:n}}}function Vv(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Pu||e instanceof _v||e instanceof bv||e instanceof cv||e instanceof xv)}function zv(e,t,n){if(!Vv(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const i=rv(n);throw"an object"===i?t._a(e+" a custom object"):t._a(e+" "+i)}}function Bv(e,t,n){if((t=lt(t))instanceof wv)return t._internalPath;if("string"==typeof t)return Wv(e,t);throw Hv("Field path arguments must be of type string or ",e,!1,void 0,n)}const $v=new RegExp("[~\\*/\\[\\]]");function Wv(e,t,n){if(t.search($v)>=0)throw Hv(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new wv(...t.split("."))._internalPath}catch(i){throw Hv(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Hv(e,t,n,i,r){const s=i&&!i.isEmpty(),a=void 0!==r;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${i}`),a&&(l+=` in document ${r}`),l+=")"),new bu(yu.INVALID_ARGUMENT,o+e+l)}function qv(e,t){return e.some((e=>e.isEqual(t)))}class Kv{constructor(e,t,n,i,r){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new cv(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Gv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Yv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Gv extends Kv{data(){return super.data()}}function Yv(e,t){return"string"==typeof t?Wv(e,t):t instanceof wv?t._internalPath:t._delegate._internalPath}function Qv(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new bu(yu.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xv{}class Jv extends Xv{}function Zv(e,t){let n=[];for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];t instanceof Xv&&n.push(t),n=n.concat(r),function(e){const t=e.filter((e=>e instanceof ny)).length,n=e.filter((e=>e instanceof ey)).length;if(t>1||t>0&&n>0)throw new bu(yu.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class ey extends Jv{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new ey(e,t,n)}_apply(e){const t=this._parse(e);return ly(e._query,t),new uv(e.firestore,e.converter,Sd(e._query,t))}_parse(e){const t=Iv(e.firestore),n=function(e,t,n,i,r,s,a){let o;if(r.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new bu(yu.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){oy(a,s);const t=[];for(const n of a)t.push(ay(i,e,n));o={arrayValue:{values:t}}}else o=ay(i,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||oy(a,s),o=Lv(n,"where",a,"in"===s||"not-in"===s);return Gh.create(r,s,o)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function ty(e,t,n){const i=t,r=Yv("where",e);return ey._create(r,i,n)}class ny extends Xv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ny(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Yh.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const i=t.getFlattenedFilters();for(const r of i)ly(n,r),n=Sd(n,r)}(e._query,t),new uv(e.firestore,e.converter,Sd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class iy extends Jv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new iy(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new bu(yu.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new bu(yu.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const i=new Hh(t,n);return function(e,t){if(null===bd(e)){const n=wd(e);null!==n&&cy(e,n,t.field)}}(e,i),i}(e._query,this._field,this._direction);return new uv(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new gd(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function ry(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Yv("orderBy",e);return iy._create(n,t)}class sy extends Jv{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new sy(e,t,n)}_apply(e){return new uv(e.firestore,e.converter,Ed(e._query,this._limit,this._limitType))}}function ay(e,t,n){if("string"==typeof(n=lt(n))){if(""===n)throw new bu(yu.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xd(t)&&-1!==n.indexOf("/"))throw new bu(yu.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(Ou.fromString(n));if(!Uu.isDocumentKey(i))throw new bu(yu.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ah(e,new Uu(i))}if(n instanceof cv)return Ah(e,n._key);throw new bu(yu.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rv(n)}.`)}function oy(e,t){if(!Array.isArray(e)||0===e.length)throw new bu(yu.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function ly(e,t){if(t.isInequality()){const n=wd(e),i=t.field;if(null!==n&&!n.isEqual(i))throw new bu(yu.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${i.toString()}'`);const r=bd(e);null!==r&&cy(e,i,r)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new bu(yu.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new bu(yu.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function cy(e,t,n){if(!n.isEqual(t))throw new bu(yu.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class uy{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Sh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mh(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw gu()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return rh(e,((e,i)=>{n[e]=this.convertValue(i,t)})),n}convertGeoPoint(e){return new _v(mh(e.latitude),mh(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=bh(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(wh(e));default:return null}}convertTimestamp(e){const t=gh(e);return new Pu(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ou.fromString(e);mu(Cp(n));const i=new _h(n.get(1),n.get(3)),r=new Uu(n.popFirst(5));return i.isEqual(t)||du(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}function hy(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class dy{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fy extends Kv{constructor(e,t,n,i,r,s){super(e,t,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new py(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Yv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class py extends fy{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class gy{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new dy(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new py(this._firestore,this._userDataWriter,n.key,n,new dy(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new bu(yu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const i=new py(e._firestore,e._userDataWriter,n.doc.key,n.doc,new dy(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const i=new py(e._firestore,e._userDataWriter,t.doc.key,t.doc,new dy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let r=-1,s=-1;return 0!==t.type&&(r=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:my(t.type),doc:i,oldIndex:r,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function my(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gu()}}function vy(e){e=sv(e,cv);const t=sv(e.firestore,mv);return Xm(vv(t),e._key).then((n=>Ty(t,e,n)))}class yy extends uy{constructor(e){super(),this.firestore=e}convertBytes(e){return new bv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cv(this.firestore,null,t)}}function by(e){e=sv(e,uv);const t=sv(e.firestore,mv),n=vv(t),i=new yy(t);return Qv(e._query),Jm(n,e._query).then((n=>new gy(t,i,e,n)))}function wy(e,t,n){e=sv(e,cv);const i=sv(e.firestore,mv),r=hy(e.converter,t,n);return Ey(i,[Dv(Iv(i),"setDoc",e._key,r,null!==e.converter,n).toMutation(e._key,hf.none())])}function xy(e,t,n){e=sv(e,cv);const i=sv(e.firestore,mv),r=Iv(i);let s;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return s="string"==typeof(t=lt(t))||t instanceof wv?Ov(r,"updateDoc",e._key,t,n,o):jv(r,"updateDoc",e._key,t),Ey(i,[s.toMutation(e._key,hf.exists(!0))])}function _y(e){return Ey(sv(e.firestore,mv),[new Sf(e._key,hf.none())])}function ky(e,t){const n=sv(e.firestore,mv),i=fv(e),r=hy(e.converter,t);return Ey(n,[Dv(Iv(e.firestore),"addDoc",i._key,r,null!==e.converter,{}).toMutation(i._key,hf.exists(!1))]).then((()=>i))}function Sy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r,s,a;e=lt(e);let o={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||gv(n[l])||(o=n[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges};if(gv(n[l])){const e=n[l];n[l]=null===(r=e.next)||void 0===r?void 0:r.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let u,h,d;if(e instanceof cv)h=sv(e.firestore,mv),d=vd(e._key.path),u={next:t=>{n[l]&&n[l](Ty(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=sv(e,uv);h=sv(t.firestore,mv),d=t._query;const i=new yy(h);u={next:e=>{n[l]&&n[l](new gy(h,i,t,e))},error:n[l+1],complete:n[l+2]},Qv(e._query)}return function(e,t,n,i){const r=new Bm(i),s=new fm(t,r,n);return e.asyncQueue.enqueueAndForget((async()=>lm(await Qm(e),s))),()=>{r.Dc(),e.asyncQueue.enqueueAndForget((async()=>cm(await Qm(e),s)))}}(vv(h),d,c,u)}function Ey(e,t){return function(e,t){const n=new wu;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const i=Um(e);try{const e=await function(e,t){const n=vu(e),i=Pu.now(),r=t.reduce(((e,t)=>e.add(t.key)),Wd());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let o=jd(),l=Wd();return n.Zi.getEntries(e,r).next((e=>{o=e,o.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,o))).next((r=>{s=r;const a=[];for(const e of t){const t=vf(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new wf(e.key,t,Vh(t.value.mapValue),hf.exists(!0)))}return n.mutationQueue.addMutationBatch(e,i,a,t)})).next((t=>{a=t;const i=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,i)}))})).then((()=>({batchId:a.batchId,changes:Fd(s)})))}(i.localStore,t);i.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let i=e.Tc[e.currentUser.toKey()];i||(i=new ah(Au)),i=i.insert(t,n),e.Tc[e.currentUser.toKey()]=i}(i,e.batchId,n),await jm(i,e.changes),await Bg(i.remoteStore)}catch(e){const t=nm(e,"Failed to persist write");n.reject(t)}}(await Ym(e),t,n))),n.promise}(vv(e),t)}function Ty(e,t,n){const i=n.docs.get(t._key),r=new yy(e);return new fy(e,r,t._key,i,new dy(n.hasPendingWrites,n.fromCache),t.converter)}class Cy{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Iv(e)}set(e,t,n){this._verifyNotCommitted();const i=Ny(e,this._firestore),r=hy(i.converter,t,n),s=Dv(this._dataReader,"WriteBatch.set",i._key,r,null!==i.converter,n);return this._mutations.push(s.toMutation(i._key,hf.none())),this}update(e,t,n){this._verifyNotCommitted();const i=Ny(e,this._firestore);let r;for(var s=arguments.length,a=new Array(s>3?s-3:0),o=3;o<s;o++)a[o-3]=arguments[o];return r="string"==typeof(t=lt(t))||t instanceof wv?Ov(this._dataReader,"WriteBatch.update",i._key,t,n,a):jv(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,hf.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ny(e,this._firestore);return this._mutations=this._mutations.concat(new Sf(t._key,hf.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new bu(yu.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ny(e,t){if((e=lt(e)).firestore!==t)throw new bu(yu.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function Iy(){return new Pv("serverTimestamp")}function Dy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Rv("arrayUnion",t)}function Ay(e){return vv(e=sv(e,mv)),new Cy(e,(t=>Ey(e,t)))}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){lu=e}(wn),mn(new ct("firestore",((e,n)=>{let{instanceIdentifier:i,options:r}=n;const s=e.getProvider("app").getImmediate(),a=new mv(new Su(e.getProvider("auth-internal")),new Nu(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new bu(yu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _h(e.options.projectId,t)}(s,i),s);return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC").setMultipleInstances(!0)),kn(au,"3.13.0",e),kn(au,"3.13.0","esm2017")}();const My="firebasestorage.googleapis.com",Py="storageBucket";class Ry extends Xe{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Ly(e),`Firebase Storage: ${t} (${Ly(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ry.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ly(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var jy,Oy;function Ly(e){return"storage/"+e}function Fy(){return new Ry(jy.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Uy(){return new Ry(jy.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Vy(){return new Ry(jy.CANCELED,"User canceled the upload/download.")}function zy(e){return new Ry(jy.INVALID_ARGUMENT,e)}function By(){return new Ry(jy.APP_DELETED,"The Firebase app was deleted.")}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(jy||(jy={}));class $y{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=$y.makeFromUrl(e,t)}catch(SI){return new $y(e,"")}if(""===n.path)return n;throw i=e,new Ry(jy.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.");var i}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)";const r=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),o=[{regex:r,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${a}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===My?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<o.length;l++){const t=o[l],i=t.regex.exec(e);if(i){const e=i[t.indices.bucket];let r=i[t.indices.path];r||(r=""),n=new $y(e,r),t.postModify(n);break}}if(null==n)throw function(e){return new Ry(jy.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Wy{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Hy(e,t,n,i){if(i<t)throw zy(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw zy(`Invalid value for '${e}'. Expected ${n} or less.`)}function qy(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){n=n+(t(i)+"="+t(e[i]))+"&"}return n=n.slice(0,-1),n}function Ky(e,t){const n=e>=500&&e<600,i=-1!==[408,429].indexOf(e),r=-1!==t.indexOf(e);return n||i||r}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Oy||(Oy={}));class Gy{constructor(e,t,n,i,r,s,a,o,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new Yy(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const i=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(i),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(i),this.pendingConnection_=null;const t=n.getErrorCode()===Oy.NO_ERROR,r=n.getStatus();if(!t||Ky(r,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Oy.ABORT;return void e(!1,new Yy(!1,null,t))}const s=-1!==this.successCodes_.indexOf(r);e(!0,new Yy(s,n))}))},t=(e,t)=>{const n=this.resolve_,i=this.reject_,r=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(r,r.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(SI){i(SI)}else if(null!==r){const e=Fy();e.serverResponse=r.getErrorText(),this.errorCallback_?i(this.errorCallback_(r,e)):i(e)}else if(t.canceled){i(this.appDelete_?By():Vy())}else{i(Uy())}};this.canceled_?t(0,new Yy(!1,null,!0)):this.backoffId_=function(e,t,n){let i=1,r=null,s=null,a=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.apply(null,n)}}function h(t){r=setTimeout((()=>{r=null,e(f,l())}),t)}function d(){s&&clearTimeout(s)}function f(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(e)return d(),void u.call(null,e,...n);if(l()||a)return d(),void u.call(null,e,...n);let s;i<64&&(i*=2),1===o?(o=2,s=0):s=1e3*(i+Math.random()),h(s)}let p=!1;function g(e){p||(p=!0,d(),c||(null!==r?(e||(o=2),clearTimeout(r),h(0)):e||(o=1)))}return h(0),s=setTimeout((()=>{a=!0,g(!0)}),n),g}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Yy{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Qy(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}class Xy{constructor(e,t){this._service=e,this._location=t instanceof $y?t:$y.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Xy(e,t)}get root(){const e=new $y(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Qy(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new $y(this._location.bucket,e);return new Xy(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Ry(jy.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Jy(e,t){const n=null===t||void 0===t?void 0:t[Py];return null==n?null:$y.makeFromBucketSpec(n,e)}class Zy{constructor(e,t,n,i,r){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=r,this._bucket=null,this._host=My,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?$y.makeFromBucketSpec(i,this._host):Jy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=$y.makeFromBucketSpec(this._url,e):this._bucket=Jy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Hy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Hy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xy(this,e)}_makeRequest(e,t,n,i){let r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Wy(By());{const s=function(e,t,n,i,r,s){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const o=qy(e.urlParams),l=e.url+o,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,i),new Gy(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,a)}(e,this._appId,n,i,t,this._firebaseVersion,r);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,i).getPromise()}}const eb="@firebase/storage",tb="0.11.2",nb="storage";function ib(e,t){let{instanceIdentifier:n}=t;const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new Zy(i,r,s,n,wn)}mn(new ct(nb,ib,"PUBLIC").setMultipleInstances(!0)),kn(eb,tb,""),kn(eb,tb,"esm2017");let rb,sb;const ab=new WeakMap,ob=new WeakMap,lb=new WeakMap,cb=new WeakMap,ub=new WeakMap;let hb={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ob.get(e);if("objectStoreNames"===t)return e.objectStoreNames||lb.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pb(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function db(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(sb||(sb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(gb(this),n),pb(ab.get(this))}:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return pb(e.apply(gb(this),n))}:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];const s=e.call(gb(this),t,...i);return lb.set(s,t.sort?t.sort():[t]),pb(s)}}function fb(e){return"function"===typeof e?db(e):(e instanceof IDBTransaction&&function(e){if(ob.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)}));ob.set(e,t)}(e),t=e,(rb||(rb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,hb):e);var t}function pb(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(pb(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&ab.set(t,e)})).catch((()=>{})),ub.set(t,e),t}(e);if(cb.has(e))return cb.get(e);const t=fb(e);return t!==e&&(cb.set(e,t),ub.set(t,e)),t}const gb=e=>ub.get(e);const mb=["get","getKey","getAll","getAllKeys","count"],vb=["put","add","delete","clear"],yb=new Map;function bb(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(yb.get(t))return yb.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=vb.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!mb.includes(n))return;const s=async function(e){const t=this.transaction(e,r?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return i&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),r&&t.done]))[0]};return yb.set(t,s),s}!function(e){hb=e(hb)}((e=>({...e,get:(t,n,i)=>bb(t,n)||e.get(t,n,i),has:(t,n)=>!!bb(t,n)||e.has(t,n)})));const wb="@firebase/installations",xb="0.6.4",_b=1e4,kb=`w:${xb}`,Sb="FIS_v2",Eb=36e5,Tb=new Je("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Cb(e){return e instanceof Xe&&e.code.includes("request-failed")}function Nb(e){let{projectId:t}=e;return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function Ib(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Db(e,t){const n=(await t.json()).error;return Tb.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Ab(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Mb(e,t){let{refreshToken:n}=t;const i=Ab(e);return i.append("Authorization",function(e){return`${Sb} ${e}`}(n)),i}async function Pb(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Rb(e){return new Promise((t=>{setTimeout(t,e)}))}const jb=/^[cdef][\w-]{21}$/;function Ob(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return jb.test(t)?t:""}catch(e){return""}}function Lb(e){return`${e.appName}!${e.appId}`}const Fb=new Map;function Ub(e,t){const n=Lb(e);Vb(n,t),function(e,t){const n=Bb();n&&n.postMessage({key:e,fid:t});$b()}(n,t)}function Vb(e,t){const n=Fb.get(e);if(n)for(const i of n)i(t)}let zb=null;function Bb(){return!zb&&"BroadcastChannel"in self&&(zb=new BroadcastChannel("[Firebase] FID Change"),zb.onmessage=e=>{Vb(e.data.key,e.data.fid)}),zb}function $b(){0===Fb.size&&zb&&(zb.close(),zb=null)}const Wb="firebase-installations-store";let Hb=null;function qb(){return Hb||(Hb=function(e,t){let{blocked:n,upgrade:i,blocking:r,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=pb(a);return i&&a.addEventListener("upgradeneeded",(e=>{i(pb(a.result),e.oldVersion,e.newVersion,pb(a.transaction))})),n&&a.addEventListener("blocked",(()=>n())),o.then((e=>{s&&e.addEventListener("close",(()=>s())),r&&e.addEventListener("versionchange",(()=>r()))})).catch((()=>{})),o}("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Wb)}})),Hb}async function Kb(e,t){const n=Lb(e),i=(await qb()).transaction(Wb,"readwrite"),r=i.objectStore(Wb),s=await r.get(n);return await r.put(t,n),await i.done,s&&s.fid===t.fid||Ub(e,t.fid),t}async function Gb(e){const t=Lb(e),n=(await qb()).transaction(Wb,"readwrite");await n.objectStore(Wb).delete(t),await n.done}async function Yb(e,t){const n=Lb(e),i=(await qb()).transaction(Wb,"readwrite"),r=i.objectStore(Wb),s=await r.get(n),a=t(s);return void 0===a?await r.delete(n):await r.put(a,n),await i.done,!a||s&&s.fid===a.fid||Ub(e,a.fid),a}async function Qb(e){let t;const n=await Yb(e.appConfig,(n=>{const i=function(e){const t=e||{fid:Ob(),registrationStatus:0};return Zb(t)}(n),r=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(Tb.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:i}=e,{fid:r}=t;const s=Nb(n),a=Ab(n),o=i.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const l={fid:r,authVersion:Sb,appId:n.appId,sdkVersion:kb},c={method:"POST",headers:a,body:JSON.stringify(l)},u=await Pb((()=>fetch(s,c)));if(u.ok){const e=await u.json();return{fid:e.fid||r,registrationStatus:2,refreshToken:e.refreshToken,authToken:Ib(e.authToken)}}throw await Db("Create Installation",u)}(e,t);return Kb(e.appConfig,n)}catch(SI){throw Cb(SI)&&409===SI.customData.serverCode?await Gb(e.appConfig):await Kb(e.appConfig,{fid:t.fid,registrationStatus:0}),SI}}(e,n);return{installationEntry:n,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Xb(e)}:{installationEntry:t}}(e,i);return t=r.registrationPromise,r.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Xb(e){let t=await Jb(e.appConfig);for(;1===t.registrationStatus;)await Rb(100),t=await Jb(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Qb(e);return n||t}return t}function Jb(e){return Yb(e,(e=>{if(!e)throw Tb.create("installation-not-found");return Zb(e)}))}function Zb(e){return 1===(t=e).registrationStatus&&t.registrationTime+_b<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function ew(e,t){let{appConfig:n,heartbeatServiceProvider:i}=e;const r=function(e,t){let{fid:n}=t;return`${Nb(e)}/${n}/authTokens:generate`}(n,t),s=Mb(n,t),a=i.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const o={installation:{sdkVersion:kb,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await Pb((()=>fetch(r,l)));if(c.ok){return Ib(await c.json())}throw await Db("Generate Auth Token",c)}async function tw(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=await Yb(e.appConfig,(i=>{if(!iw(i))throw Tb.create("not-registered");const r=i.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Eb}(e)}(r))return i;if(1===r.requestStatus)return t=async function(e,t){let n=await nw(e.appConfig);for(;1===n.authToken.requestStatus;)await Rb(100),n=await nw(e.appConfig);const i=n.authToken;return 0===i.requestStatus?tw(e,t):i}(e,n),i;{if(!navigator.onLine)throw Tb.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(i);return t=async function(e,t){try{const n=await ew(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return await Kb(e.appConfig,i),n}catch(SI){if(!Cb(SI)||401!==SI.customData.serverCode&&404!==SI.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Kb(e.appConfig,n)}else await Gb(e.appConfig);throw SI}}(e,n),n}}));return t?await t:i.authToken}function nw(e){return Yb(e,(e=>{if(!iw(e))throw Tb.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+_b<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function iw(e){return void 0!==e&&2===e.registrationStatus}async function rw(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await Qb(e);t&&await t}(n);return(await tw(n,t)).token}function sw(e){return Tb.create("missing-app-config-values",{valueName:e})}const aw="installations",ow=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw sw("App Configuration");if(!e.name)throw sw("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw sw(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:vn(t,"heartbeat"),_delete:()=>Promise.resolve()}},lw=e=>{const t=vn(e.getProvider("app").getImmediate(),aw).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:i}=await Qb(t);return i?i.catch(console.error):tw(t).catch(console.error),n.fid}(t),getToken:e=>rw(t,e)}};mn(new ct(aw,ow,"PUBLIC")),mn(new ct("installations-internal",lw,"PRIVATE")),kn(wb,xb),kn(wb,xb,"esm2017");const cw="analytics",uw="https://www.googletagmanager.com/gtag/js",hw=new bt("@firebase/analytics"),dw=new Je("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function fw(e){if(!e.startsWith(uw)){const t=dw.create("invalid-gtag-resource",{gtagURL:e});return hw.warn(t.message),""}return e}function pw(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function gw(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:fw}),i=document.createElement("script"),r=`${uw}?l=${e}&id=${t}`;i.src=n?null===n||void 0===n?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function mw(e,t,n,i){return async function(r){try{for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];if("event"===r){const[i,r]=a;await async function(e,t,n,i,r){try{let s=[];if(r&&r.send_to){let e=r.send_to;Array.isArray(e)||(e=[e]);const i=await pw(n);for(const n of e){const e=i.find((e=>e.measurementId===n)),r=e&&t[e.appId];if(!r){s=[];break}s.push(r)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",i,r||{})}catch(SI){hw.error(SI)}}(e,t,n,i,r)}else if("config"===r){const[r,s]=a;await async function(e,t,n,i,r,s){const a=i[r];try{if(a)await t[a];else{const e=(await pw(n)).find((e=>e.measurementId===r));e&&await t[e.appId]}}catch(SI){hw.error(SI)}e("config",r,s)}(e,t,n,i,r,s)}else if("consent"===r){const[t]=a;e("consent","update",t)}else if("get"===r){const[t,n,i]=a;e("get",t,n,i)}else if("set"===r){const[t]=a;e("set",t)}else e(r,...a)}catch(SI){hw.error(SI)}}}const vw=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function yw(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function bw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vw,n=arguments.length>2?arguments[2]:void 0;const{appId:i,apiKey:r,measurementId:s}=e.options;if(!i)throw dw.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw dw.create("no-api-key")}const a=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new xw;return setTimeout((async()=>{o.abort()}),void 0!==n?n:6e4),ww({appId:i,apiKey:r,measurementId:s},a,o,t)}async function ww(e,t,n){let{throttleEndTimeMillis:i,backoffCount:r}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:vw;var a;const{appId:o,measurementId:l}=e;try{await function(e,t){return new Promise(((n,i)=>{const r=Math.max(t-Date.now(),0),s=setTimeout(n,r);e.addEventListener((()=>{clearTimeout(s),i(dw.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(n,i)}catch(SI){if(l)return hw.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===SI||void 0===SI?void 0:SI.message}]`),{appId:o,measurementId:l};throw SI}try{const t=await async function(e){var t;const{appId:n,apiKey:i}=e,r={method:"GET",headers:yw(i)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),a=await fetch(s,r);if(200!==a.status&&304!==a.status){let e="";try{const n=await a.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(o){}throw dw.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}(e);return s.deleteThrottleMetadata(o),t}catch(SI){const i=SI;if(!function(e){if(!(e instanceof Xe)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(i)){if(s.deleteThrottleMetadata(o),l)return hw.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===i||void 0===i?void 0:i.message}]`),{appId:o,measurementId:l};throw SI}const c=503===Number(null===(a=null===i||void 0===i?void 0:i.customData)||void 0===a?void 0:a.httpStatus)?ot(r,s.intervalMillis,30):ot(r,s.intervalMillis),u={throttleEndTimeMillis:Date.now()+c,backoffCount:r+1};return s.setThrottleMetadata(o,u),hw.debug(`Calling attemptFetch again in ${c} millis`),ww(e,u,n,s)}}class xw{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let _w,kw;function Sw(e){kw=e}function Ew(e){_w=e}async function Tw(e,t,n,i,r,s,a){var o;const l=bw(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&hw.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>hw.error(e))),t.push(l);const c=async function(){if(!Ye())return hw.warn(dw.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await Qe()}catch(SI){return hw.warn(dw.create("indexeddb-unavailable",{errorInfo:null===SI||void 0===SI?void 0:SI.toString()}).message),!1}return!0}().then((e=>e?i.getId():void 0)),[u,h]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(uw)&&n.src.includes(e))return n;return null})(s)||gw(s,u.measurementId),kw&&(r("consent","default",kw),Sw(void 0)),r("js",new Date);const d=null!==(o=null===a||void 0===a?void 0:a.config)&&void 0!==o?o:{};return d.origin="firebase",d.update=!0,null!=h&&(d.firebase_id=h),r("config",u.measurementId,d),_w&&(r("set",_w),Ew(void 0)),u.measurementId}class Cw{constructor(e){this.app=e}_delete(){return delete Nw[this.app.options.appId],Promise.resolve()}}let Nw={},Iw=[];const Dw={};let Aw,Mw,Pw="dataLayer",Rw="gtag",jw=!1;function Ow(){const e=[];if(Ge()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=dw.create("invalid-analytics-context",{errorInfo:t});hw.warn(n.message)}}function Lw(e,t,n){Ow();const i=e.options.appId;if(!i)throw dw.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw dw.create("no-api-key");hw.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Nw[i])throw dw.create("already-exists",{id:i});if(!jw){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Pw);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,i,r){let s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[i].push(arguments)};return window[r]&&"function"===typeof window[r]&&(s=window[r]),window[r]=mw(s,e,t,n),{gtagCore:s,wrappedGtag:window[r]}}(Nw,Iw,Dw,Pw,Rw);Mw=e,Aw=t,jw=!0}Nw[i]=Tw(e,Iw,Dw,t,Aw,Pw,n);return new Cw(e)}function Fw(e,t,n,i){e=lt(e),async function(e,t,n,i,r){if(r&&r.global)e("event",n,i);else{const r=await t;e("event",n,Object.assign(Object.assign({},i),{send_to:r}))}}(Mw,Nw[e.app.options.appId],t,n,i).catch((e=>hw.error(e)))}const Uw="@firebase/analytics",Vw="0.10.0";mn(new ct(cw,((e,t)=>{let{options:n}=t;return Lw(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),mn(new ct("analytics-internal",(function(e){try{const t=e.getProvider(cw).getImmediate();return{logEvent:(e,n,i)=>Fw(t,e,n,i)}}catch(SI){throw dw.create("interop-component-reg-failed",{reason:SI})}}),"PRIVATE")),kn(Uw,Vw),kn(Uw,Vw,"esm2017");const zw=xn({apiKey:"AIzaSyBW9h9MSaC7wdtUjwo-L2AvJrEJKIPBqvE",authDomain:"gait-rehabilitation.firebaseapp.com",projectId:"gait-rehabilitation",storageBucket:"gait-rehabilitation.firebasestorage.app",messagingSenderId:"497138447235",appId:"1:497138447235:web:45faa3ec3dcc0178dabcb6",measurementId:"G-7NK5L86XE6"}),Bw=Ls(zw),$w=function(e,t){const n="string"==typeof e?e:t||"(default)",i=vn("object"==typeof e?e:_n(),"firestore").getImmediate({identifier:n});if(!i._initialized){const e=Be("firestore");e&&function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var r;const s=(e=sv(e,lv))._getSettings(),a=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==a&&fu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),i.mockUserToken){let t,n;if("string"==typeof i.mockUserToken)t=i.mockUserToken,n=ou.MOCK_USER;else{t=qe(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new bu(yu.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ou(s)}e._authCredentials=new ku(new xu(t,n))}}(i,...e)}return i}(zw);!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_n(),t=arguments.length>1?arguments[1]:void 0;e=lt(e);const n=vn(e,nb).getImmediate({identifier:t}),i=Be("storage");i&&function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:r}=i;r&&(e._overrideAuthToken="string"===typeof r?r:qe(r,e.app.options.projectId))}(e,t,n,i)}(n,...i)}(zw);let Ww=null;"undefined"!==typeof window&&(Ww=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_n();e=lt(e);const t=vn(e,cw);return t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=vn(e,cw);if(n.isInitialized()){const e=n.getImmediate();if(et(t,n.getOptions()))return e;throw dw.create("already-initialized")}return n.initialize({options:t})}(e)}(zw));var Hw=n(579);const qw=(0,r.createContext)();function Kw(e){let{children:t}=e;const[n,i]=(0,r.useState)(null),[s,a]=(0,r.useState)(!0);return(0,r.useEffect)((()=>{const e=function(e,t,n,i){return lt(e).onAuthStateChanged(t,n,i)}(Bw,(e=>{i(e),a(!1)}));return()=>e()}),[]),(0,Hw.jsx)(qw.Provider,{value:{user:n,loading:s},children:t})}function Gw(){return(0,r.useContext)(qw)}async function Yw(e){try{const t=fv($w,"users",e),n=await vy(t);if(n.exists()){const t=n.data(),i={id:n.id,...t,displayName:t.displayName||t.fullName||t.name||t.username||`User ${e.substr(0,4)}`};return console.log("Fetched user data for ID",e,":",i),i}return console.log("No user document found for ID:",e),null}catch(t){return console.error("Error fetching user data for ID",e,":",t),null}}async function Qw(e){try{const t=Zv(dv($w,"activities"),ty("uid","==",e)),n=await by(t),i=[];return n.forEach((e=>{i.push({id:e.id,...e.data()})})),i}catch(t){return console.error("Error fetching activities:",t),[]}}async function Xw(e){try{const t=Zv(dv($w,"achievements"),ty("uid","==",e)),n=await by(t),i=[];return n.forEach((e=>{i.push({id:e.id,...e.data()})})),i}catch(t){return console.error("Error fetching achievements:",t),[]}}async function Jw(e){try{const t=Zv(dv($w,"users"),ty("role","==","patient"),ty("assignedTherapistId","==",e)),n=await by(t),i=[];return n.forEach((e=>{i.push({id:e.id,...e.data()})})),i}catch(t){return console.error("Error fetching therapist patients:",t),[]}}async function Zw(e,t){try{const n={uid:e,earnedAt:Iy(),...t},i=await ky(dv($w,"achievements"),n);return console.log("Achievement added with ID: ",i.id),{id:i.id,...n}}catch(n){throw console.error("Error adding achievement:",n),n}}async function ex(e,t){try{const n=Zv(dv($w,"achievements"),ty("uid","==",e),ty("badgeName","==",t));return!(await by(n)).empty}catch(n){return console.error("Error checking achievement:",n),!1}}const tx=function(){const{user:e}=Gw(),[t,n]=(0,r.useState)(null);(0,r.useEffect)((()=>{e&&Yw(e.uid).then((e=>n(e)))}),[e]);const i="therapist"===(null===t||void 0===t?void 0:t.role)?"/therapist":"/patient";return(0,Hw.jsxs)("div",{children:[(0,Hw.jsxs)("section",{className:"hero",children:[(0,Hw.jsx)("h1",{children:"Welcome to Gait Rehabilitation"}),(0,Hw.jsx)("p",{children:"Empower your recovery with our innovative tracking tools."}),!e&&(0,Hw.jsxs)("div",{className:"hero-buttons",children:[(0,Hw.jsx)(De,{to:"/login",children:(0,Hw.jsx)("button",{className:"cta-btn",children:"Login"})}),(0,Hw.jsx)(De,{to:"/register",style:{marginLeft:"10px"},children:(0,Hw.jsx)("button",{className:"cta-btn secondary",children:"Register"})})]}),e&&(0,Hw.jsx)(De,{to:i,children:(0,Hw.jsx)("button",{className:"cta-btn",children:"Go to Dashboard"})})]}),(0,Hw.jsxs)("section",{className:"features",children:[(0,Hw.jsx)("h2",{children:"Key Features"}),(0,Hw.jsxs)("div",{className:"cards-container",children:[(0,Hw.jsxs)("div",{className:"card",children:[(0,Hw.jsx)("h3",{children:"Progress Tracking"}),(0,Hw.jsx)("p",{children:"Monitor your steps and gait symmetry over time."})]}),(0,Hw.jsxs)("div",{className:"card",children:[(0,Hw.jsx)("h3",{children:"Activity Heatmap"}),(0,Hw.jsx)("p",{children:"Visualize your daily activity and improvement."})]}),(0,Hw.jsxs)("div",{className:"card",children:[(0,Hw.jsx)("h3",{children:"Achievement Badges"}),(0,Hw.jsx)("p",{children:"Earn badges as you meet your rehabilitation goals."})]})]})]})]})};function nx(e){let{children:t,onClick:n,type:i="button",variant:r="primary",size:s="medium",className:a="",disabled:o=!1,icon:l=null,...c}=e;const u=`font-semibold rounded-lg flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors ${{primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",secondary:"bg-gray-500 hover:bg-gray-600 text-white focus:ring-gray-500",success:"bg-green-600 hover:bg-green-700 text-white focus:ring-green-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",outline:"bg-white border border-blue-600 text-blue-600 hover:bg-blue-50 focus:ring-blue-500",icon:"bg-gray-100 hover:bg-gray-200 focus:ring-gray-400"}[r]} ${"icon"===r?{small:"p-1",medium:"p-2",large:"p-3"}[s]:{small:"py-1 px-3 text-sm",medium:"py-2 px-4 text-base",large:"py-3 px-6 text-lg"}[s]} ${o?"opacity-50 cursor-not-allowed":"cursor-pointer"} ${a}`;return(0,Hw.jsxs)("button",{type:i,onClick:n,className:u,disabled:o,...c,children:[l,"icon"!==r&&t]})}const ix=function(){const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[s,a]=(0,r.useState)(""),[o,l]=(0,r.useState)(!1),c=ee();return(0,Hw.jsx)("div",{className:"login-container",children:(0,Hw.jsxs)("div",{className:"login-card",children:[(0,Hw.jsxs)("div",{className:"login-header",children:[(0,Hw.jsx)("h2",{children:"Welcome Back"}),(0,Hw.jsx)("p",{children:"Sign in to continue to your Gait Rehabilitation dashboard"})]}),s&&(0,Hw.jsx)("div",{className:"error-message",children:s}),(0,Hw.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),a(""),l(!0);try{await function(e,t,n){return wr(lt(e),sr.credential(t,n))}(Bw,e,n);const t=await Yw(Bw.currentUser.uid);"therapist"===(null===t||void 0===t?void 0:t.role)?c("/therapist"):c("/patient")}catch(i){a("Failed to log in. Please check your credentials."),console.error(i)}finally{l(!1)}},className:"login-form",children:[(0,Hw.jsxs)("div",{className:"form-group",children:[(0,Hw.jsx)("label",{htmlFor:"email",children:"Email Address"}),(0,Hw.jsx)("input",{type:"email",id:"email",placeholder:"Enter your email",value:e,onChange:e=>t(e.target.value),required:!0})]}),(0,Hw.jsxs)("div",{className:"form-group",children:[(0,Hw.jsx)("label",{htmlFor:"password",children:"Password"}),(0,Hw.jsx)("input",{type:"password",id:"password",placeholder:"Enter your password",value:n,onChange:e=>i(e.target.value),required:!0})]}),(0,Hw.jsxs)("div",{className:"form-footer",children:[(0,Hw.jsxs)("div",{className:"remember-me",children:[(0,Hw.jsx)("input",{type:"checkbox",id:"remember"}),(0,Hw.jsx)("label",{htmlFor:"remember",children:"Remember me"})]}),(0,Hw.jsx)(De,{to:"/forgot-password",className:"forgot-password",children:"Forgot password?"})]}),(0,Hw.jsx)(nx,{type:"submit",className:"login-button",disabled:o,children:o?"Signing in...":"Sign In"})]}),(0,Hw.jsxs)("div",{className:"login-create-account",children:["Don't have an account? ",(0,Hw.jsx)(De,{to:"/register",children:"Create Account"})]})]})})};const rx=function(){const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[s,a]=(0,r.useState)(""),[o,l]=(0,r.useState)("patient"),[c,u]=(0,r.useState)(""),[h,d]=(0,r.useState)(!1),f=ee();return(0,Hw.jsx)("div",{className:"register-container",children:(0,Hw.jsxs)("div",{className:"register-card",children:[(0,Hw.jsxs)("div",{className:"register-header",children:[(0,Hw.jsx)("h2",{children:"Create an Account"}),(0,Hw.jsx)("p",{children:"Sign up to start your rehabilitation journey"})]}),c&&(0,Hw.jsx)("div",{className:"error-message",children:c}),(0,Hw.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),u(""),d(!0);try{const t=(await xr(Bw,n,s)).user;await _r(t,{displayName:e}),await wy(fv($w,"users",t.uid),{uid:t.uid,displayName:e,email:n,role:o,createdAt:Iy(),lastLogin:Iy()}),f("therapist"===o?"/therapist":"/patient")}catch(i){console.error("Error registering user:",i),u("Failed to create an account. Please try again.")}finally{d(!1)}},className:"register-form",children:[(0,Hw.jsxs)("div",{className:"form-group",children:[(0,Hw.jsx)("label",{htmlFor:"displayName",children:"Name"}),(0,Hw.jsx)("input",{type:"text",id:"displayName",placeholder:"Enter your name",value:e,onChange:e=>t(e.target.value),required:!0})]}),(0,Hw.jsxs)("div",{className:"form-group",children:[(0,Hw.jsx)("label",{htmlFor:"email",children:"Email Address"}),(0,Hw.jsx)("input",{type:"email",id:"email",placeholder:"Enter your email",value:n,onChange:e=>i(e.target.value),required:!0})]}),(0,Hw.jsxs)("div",{className:"form-group",children:[(0,Hw.jsx)("label",{htmlFor:"password",children:"Password"}),(0,Hw.jsx)("input",{type:"password",id:"password",placeholder:"Enter your password",value:s,onChange:e=>a(e.target.value),required:!0})]}),(0,Hw.jsxs)("div",{className:"form-group",children:[(0,Hw.jsx)("label",{htmlFor:"role",children:"Role"}),(0,Hw.jsxs)("select",{id:"role",value:o,onChange:e=>l(e.target.value),required:!0,children:[(0,Hw.jsx)("option",{value:"patient",children:"Patient"}),(0,Hw.jsx)("option",{value:"therapist",children:"Therapist"})]})]}),(0,Hw.jsx)(nx,{type:"submit",className:"register-button",disabled:h,children:h?"Creating Account...":"Sign Up"})]}),(0,Hw.jsxs)("div",{className:"register-footer",children:["Already have an account? ",(0,Hw.jsx)(De,{to:"/login",children:"Log In"})]})]})})};function sx(e,t){return Math.floor(Math.random()*(t-e+1))+e}const ax=["Walking","Exercise Routine","Physiotherapy Session","Gait Training","Balance Exercise"],ox=["Local Park","Gym","Clinic","Home","Rehab Center"],lx=["Felt good","Challenging session","Improved balance","Focus on ankle mobility","Worked on endurance","Practiced new exercises",""],cx=[];for(let EI=0;EI<30;EI++){const e=new Date;e.setDate(e.getDate()-EI);const t=sx(1,2);for(let n=0;n<t;n++){const t=ax[sx(0,ax.length-1)],i="Walking"===t||"Gait Training"===t?sx(2e3,12e3):"Exercise Routine"===t?sx(1e3,4e3):0,r=sx(75,95),s=i>0?(i/1400).toFixed(1):"0",a=sx(20,60),o=ox[sx(0,ox.length-1)],l=lx[sx(0,lx.length-1)];cx.push({id:`${EI}-${n}`,type:t,steps:i,symmetry:r,distance:s,duration:a,location:o,notes:l,timestamp:{toDate:()=>new Date(e)}})}}cx.sort(((e,t)=>e.timestamp.toDate()-t.timestamp.toDate()));const ux=function(e){let{children:t,className:n="",title:i}=e;return(0,Hw.jsxs)("div",{className:`card ${n}`,children:[i&&(0,Hw.jsx)("h3",{className:"card-title",children:i}),(0,Hw.jsx)("div",{className:"card-content",children:t})]})};function hx(e){return e+.5|0}const dx=(e,t,n)=>Math.max(Math.min(e,n),t);function fx(e){return dx(hx(2.55*e),0,255)}function px(e){return dx(hx(255*e),0,255)}function gx(e){return dx(hx(e/2.55)/100,0,1)}function mx(e){return dx(hx(100*e),0,100)}const vx={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},yx=[..."0123456789ABCDEF"],bx=e=>yx[15&e],wx=e=>yx[(240&e)>>4]+yx[15&e],xx=e=>(240&e)>>4===(15&e);function _x(e){var t=(e=>xx(e.r)&&xx(e.g)&&xx(e.b)&&xx(e.a))(e)?bx:wx;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const kx=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Sx(e,t,n){const i=t*Math.min(n,1-n),r=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-i*Math.max(Math.min(r-3,9-r,1),-1)};return[r(0),r(8),r(4)]}function Ex(e,t,n){const i=function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(i+e/60)%6;return n-n*t*Math.max(Math.min(r,4-r,1),0)};return[i(5),i(3),i(1)]}function Tx(e,t,n){const i=Sx(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)i[r]*=1-t-n,i[r]+=t;return i}function Cx(e){const t=e.r/255,n=e.g/255,i=e.b/255,r=Math.max(t,n,i),s=Math.min(t,n,i),a=(r+s)/2;let o,l,c;return r!==s&&(c=r-s,l=a>.5?c/(2-r-s):c/(r+s),o=function(e,t,n,i,r){return e===r?(t-n)/i+(t<n?6:0):t===r?(n-e)/i+2:(e-t)/i+4}(t,n,i,c,r),o=60*o+.5),[0|o,l||0,a]}function Nx(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(px)}function Ix(e,t,n){return Nx(Sx,e,t,n)}function Dx(e){return(e%360+360)%360}function Ax(e){const t=kx.exec(e);let n,i=255;if(!t)return;t[5]!==n&&(i=t[6]?fx(+t[5]):px(+t[5]));const r=Dx(+t[2]),s=+t[3]/100,a=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return Nx(Tx,e,t,n)}(r,s,a):"hsv"===t[1]?function(e,t,n){return Nx(Ex,e,t,n)}(r,s,a):Ix(r,s,a),{r:n[0],g:n[1],b:n[2],a:i}}const Mx={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Px={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Rx;function jx(e){Rx||(Rx=function(){const e={},t=Object.keys(Px),n=Object.keys(Mx);let i,r,s,a,o;for(i=0;i<t.length;i++){for(a=o=t[i],r=0;r<n.length;r++)s=n[r],o=o.replace(s,Mx[s]);s=parseInt(Px[a],16),e[o]=[s>>16&255,s>>8&255,255&s]}return e}(),Rx.transparent=[0,0,0,0]);const t=Rx[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const Ox=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const Lx=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,Fx=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Ux(e,t,n){if(e){let i=Cx(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,0===t?360:1)),i=Ix(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function Vx(e,t){return e?Object.assign(t||{},e):e}function zx(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=px(e[3]))):(t=Vx(e,{r:0,g:0,b:0,a:1})).a=px(t.a),t}function Bx(e){return"r"===e.charAt(0)?function(e){const t=Ox.exec(e);let n,i,r,s=255;if(t){if(t[7]!==n){const e=+t[7];s=t[8]?fx(e):dx(255*e,0,255)}return n=+t[1],i=+t[3],r=+t[5],n=255&(t[2]?fx(n):dx(n,0,255)),i=255&(t[4]?fx(i):dx(i,0,255)),r=255&(t[6]?fx(r):dx(r,0,255)),{r:n,g:i,b:r,a:s}}}(e):Ax(e)}class $x{constructor(e){if(e instanceof $x)return e;const t=typeof e;let n;"object"===t?n=zx(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*vx[e[1]],g:255&17*vx[e[2]],b:255&17*vx[e[3]],a:5===n?17*vx[e[4]]:255}:7!==n&&9!==n||(t={r:vx[e[1]]<<4|vx[e[2]],g:vx[e[3]]<<4|vx[e[4]],b:vx[e[5]]<<4|vx[e[6]],a:9===n?vx[e[7]]<<4|vx[e[8]]:255})),t}(e)||jx(e)||Bx(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=Vx(this._rgb);return e&&(e.a=gx(e.a)),e}set rgb(e){this._rgb=zx(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${gx(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}(this._rgb):void 0}hexString(){return this._valid?_x(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=Cx(e),n=t[0],i=mx(t[1]),r=mx(t[2]);return e.a<255?`hsla(${n}, ${i}%, ${r}%, ${gx(e.a)})`:`hsl(${n}, ${i}%, ${r}%)`}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,i=e.rgb;let r;const s=t===r?.5:t,a=2*s-1,o=n.a-i.a,l=((a*o===-1?a:(a+o)/(1+a*o))+1)/2;r=1-l,n.r=255&l*n.r+r*i.r+.5,n.g=255&l*n.g+r*i.g+.5,n.b=255&l*n.b+r*i.b+.5,n.a=s*n.a+(1-s)*i.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const i=Fx(gx(e.r)),r=Fx(gx(e.g)),s=Fx(gx(e.b));return{r:px(Lx(i+n*(Fx(gx(t.r))-i))),g:px(Lx(r+n*(Fx(gx(t.g))-r))),b:px(Lx(s+n*(Fx(gx(t.b))-s))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new $x(this.rgb)}alpha(e){return this._rgb.a=px(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=hx(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Ux(this._rgb,2,e),this}darken(e){return Ux(this._rgb,2,-e),this}saturate(e){return Ux(this._rgb,1,e),this}desaturate(e){return Ux(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=Cx(e);n[0]=Dx(n[0]+t),n=Ix(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function Wx(){}const Hx=(()=>{let e=0;return()=>e++})();function qx(e){return null===e||void 0===e}function Kx(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function Gx(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function Yx(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function Qx(e,t){return Yx(e)?e:t}function Xx(e,t){return"undefined"===typeof e?t:e}const Jx=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Zx(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function e_(e,t,n,i){let r,s,a;if(Kx(e))if(s=e.length,i)for(r=s-1;r>=0;r--)t.call(n,e[r],r);else for(r=0;r<s;r++)t.call(n,e[r],r);else if(Gx(e))for(a=Object.keys(e),s=a.length,r=0;r<s;r++)t.call(n,e[a[r]],a[r])}function t_(e,t){let n,i,r,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(r=e[n],s=t[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function n_(e){if(Kx(e))return e.map(n_);if(Gx(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let r=0;for(;r<i;++r)t[n[r]]=n_(e[n[r]]);return t}return e}function i_(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function r_(e,t,n,i){if(!i_(e))return;const r=t[e],s=n[e];Gx(r)&&Gx(s)?s_(r,s,i):t[e]=n_(s)}function s_(e,t,n){const i=Kx(t)?t:[t],r=i.length;if(!Gx(e))return e;const s=(n=n||{}).merger||r_;let a;for(let o=0;o<r;++o){if(a=i[o],!Gx(a))continue;const t=Object.keys(a);for(let i=0,r=t.length;i<r;++i)s(t[i],e,a,n)}return e}function a_(e,t){return s_(e,t,{merger:o_})}function o_(e,t,n){if(!i_(e))return;const i=t[e],r=n[e];Gx(i)&&Gx(r)?a_(i,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=n_(r))}const l_={"":e=>e,x:e=>e.x,y:e=>e.y};function c_(e,t){const n=l_[t]||(l_[t]=function(e){const t=function(e){const t=e.split("."),n=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function u_(e){return e.charAt(0).toUpperCase()+e.slice(1)}const h_=e=>"undefined"!==typeof e,d_=e=>"function"===typeof e,f_=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const p_=Math.PI,g_=2*p_,m_=g_+p_,v_=Number.POSITIVE_INFINITY,y_=p_/180,b_=p_/2,w_=p_/4,x_=2*p_/3,__=Math.log10,k_=Math.sign;function S_(e,t,n){return Math.abs(e-t)<n}function E_(e){const t=Math.round(e);e=S_(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(__(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function T_(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function C_(e,t,n){let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function N_(e){return e*(p_/180)}function I_(e){return e*(180/p_)}function D_(e){if(!Yx(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function A_(e,t){const n=t.x-e.x,i=t.y-e.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*p_&&(s+=g_),{angle:s,distance:r}}function M_(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function P_(e,t){return(e-t+m_)%g_-p_}function R_(e){return(e%g_+g_)%g_}function j_(e,t,n,i){const r=R_(e),s=R_(t),a=R_(n),o=R_(s-r),l=R_(a-r),c=R_(r-s),u=R_(r-a);return r===s||r===a||i&&s===a||o>l&&c<u}function O_(e,t,n){return Math.max(t,Math.min(n,e))}function L_(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function F_(e,t,n){n=n||(n=>e[n]<t);let i,r=e.length-1,s=0;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const U_=(e,t,n,i)=>F_(e,n,i?i=>{const r=e[i][t];return r<n||r===n&&e[i+1][t]===n}:i=>e[i][t]<n),V_=(e,t,n)=>F_(e,n,(i=>e[i][t]>=n));const z_=["push","pop","shift","splice","unshift"];function B_(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(t);-1!==r&&i.splice(r,1),i.length>0||(z_.forEach((t=>{delete e[t]})),delete e._chartjs)}function $_(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const W_="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function H_(e,t){let n=[],i=!1;return function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];n=s,i||(i=!0,W_.call(window,(()=>{i=!1,e.apply(t,n)})))}}const q_=e=>"start"===e?"left":"end"===e?"right":"center",K_=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function G_(e,t,n){const i=t.length;let r=0,s=i;if(e._sorted){const{iScale:a,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=a.axis,{min:h,max:d,minDefined:f,maxDefined:p}=a.getUserBounds();if(f){if(r=Math.min(U_(l,u,h).lo,n?i:U_(t,u,a.getPixelForValue(h)).lo),c){const e=l.slice(0,r+1).reverse().findIndex((e=>!qx(e[o.axis])));r-=Math.max(0,e)}r=O_(r,0,i-1)}if(p){let e=Math.max(U_(l,a.axis,d,!0).hi+1,n?0:U_(t,u,a.getPixelForValue(d),!0).hi+1);if(c){const t=l.slice(e-1).findIndex((e=>!qx(e[o.axis])));e+=Math.max(0,t)}s=O_(e,r,i)-r}else s=i-r}return{start:r,count:s}}function Y_(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=r,!0;const s=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const Q_=e=>0===e||1===e,X_=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*g_/n),J_=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*g_/n)+1,Z_={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*b_),easeOutSine:e=>Math.sin(e*b_),easeInOutSine:e=>-.5*(Math.cos(p_*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>Q_(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Q_(e)?e:X_(e,.075,.3),easeOutElastic:e=>Q_(e)?e:J_(e,.075,.3),easeInOutElastic(e){const t=.1125;return Q_(e)?e:e<.5?.5*X_(2*e,t,.45):.5+.5*J_(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-Z_.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*Z_.easeInBounce(2*e):.5*Z_.easeOutBounce(2*e-1)+.5};function ek(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function tk(e){return ek(e)?e:new $x(e)}function nk(e){return ek(e)?e:new $x(e).saturate(.5).darken(.1).hexString()}const ik=["x","y","borderWidth","radius","tension"],rk=["color","borderColor","backgroundColor"];const sk=new Map;function ak(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let i=sk.get(n);return i||(i=new Intl.NumberFormat(e,t),sk.set(n,i)),i}(t,n).format(e)}const ok={values:e=>Kx(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const i=this.chart.options.locale;let r,s=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(r="scientific"),s=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const a=__(Math.abs(s)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:r,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),ak(e,i,l)},logarithmic(e,t,n){if(0===e)return"0";const i=n[t].significand||e/Math.pow(10,Math.floor(__(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?ok.numeric.call(this,e,t,n):""}};var lk={formatters:ok};const ck=Object.create(null),uk=Object.create(null);function hk(e,t){if(!t)return e;const n=t.split(".");for(let i=0,r=n.length;i<r;++i){const t=n[i];e=e[t]||(e[t]=Object.create(null))}return e}function dk(e,t,n){return"string"===typeof t?s_(hk(e,t),n):s_(hk(e,""),t)}class fk{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>nk(t.backgroundColor),this.hoverBorderColor=(e,t)=>nk(t.borderColor),this.hoverColor=(e,t)=>nk(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return dk(this,e,t)}get(e){return hk(this,e)}describe(e,t){return dk(uk,e,t)}override(e,t){return dk(ck,e,t)}route(e,t,n,i){const r=hk(this,e),s=hk(this,n),a="_"+t;Object.defineProperties(r,{[a]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[a],t=s[i];return Gx(e)?Object.assign({},t,e):Xx(e,t)},set(e){this[a]=e}}})}apply(e){e.forEach((e=>e(this)))}}var pk=new fk({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:rk},numbers:{type:"number",properties:ik}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:lk.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function gk(e,t,n,i,r){let s=t[r];return s||(s=t[r]=e.measureText(r).width,n.push(r)),s>i&&(i=s),i}function mk(e,t,n,i){let r=(i=i||{}).data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},s=i.garbageCollect=[],i.font=t),e.save(),e.font=t;let a=0;const o=n.length;let l,c,u,h,d;for(l=0;l<o;l++)if(h=n[l],void 0===h||null===h||Kx(h)){if(Kx(h))for(c=0,u=h.length;c<u;c++)d=h[c],void 0===d||null===d||Kx(d)||(a=gk(e,r,s,a,d))}else a=gk(e,r,s,a,h);e.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete r[s[l]];s.splice(0,f)}return a}function vk(e,t,n){const i=e.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((t-r)*i)/i+r}function yk(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function bk(e,t,n,i){wk(e,t,n,i,null)}function wk(e,t,n,i,r){let s,a,o,l,c,u,h,d;const f=t.pointStyle,p=t.rotation,g=t.radius;let m=(p||0)*y_;if(f&&"object"===typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(n,i),e.rotate(m),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(g)||g<=0)){switch(e.beginPath(),f){default:r?e.ellipse(n,i,r/2,g,0,0,g_):e.arc(n,i,g,0,g_),e.closePath();break;case"triangle":u=r?r/2:g,e.moveTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=x_,e.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=x_,e.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),e.closePath();break;case"rectRounded":c=.516*g,l=g-c,a=Math.cos(m+w_)*l,h=Math.cos(m+w_)*(r?r/2-c:l),o=Math.sin(m+w_)*l,d=Math.sin(m+w_)*(r?r/2-c:l),e.arc(n-h,i-o,c,m-p_,m-b_),e.arc(n+d,i-a,c,m-b_,m),e.arc(n+h,i+o,c,m,m+b_),e.arc(n-d,i+a,c,m+b_,m+p_),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=r?r/2:l,e.rect(n-u,i-l,2*u,2*l);break}m+=w_;case"rectRot":h=Math.cos(m)*(r?r/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),e.moveTo(n-h,i-o),e.lineTo(n+d,i-a),e.lineTo(n+h,i+o),e.lineTo(n-d,i+a),e.closePath();break;case"crossRot":m+=w_;case"cross":h=Math.cos(m)*(r?r/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),e.moveTo(n-h,i-o),e.lineTo(n+h,i+o),e.moveTo(n+d,i-a),e.lineTo(n-d,i+a);break;case"star":h=Math.cos(m)*(r?r/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),e.moveTo(n-h,i-o),e.lineTo(n+h,i+o),e.moveTo(n+d,i-a),e.lineTo(n-d,i+a),m+=w_,h=Math.cos(m)*(r?r/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),e.moveTo(n-h,i-o),e.lineTo(n+h,i+o),e.moveTo(n+d,i-a),e.lineTo(n-d,i+a);break;case"line":a=r?r/2:Math.cos(m)*g,o=Math.sin(m)*g,e.moveTo(n-a,i-o),e.lineTo(n+a,i+o);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(m)*(r?r/2:g),i+Math.sin(m)*g);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function xk(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function _k(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function kk(e){e.restore()}function Sk(e,t,n,i,r){if(!t)return e.lineTo(n.x,n.y);if("middle"===r){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else"after"===r!==!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Ek(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function Tk(e,t,n,i,r){if(r.strikethrough||r.underline){const s=e.measureText(i),a=t-s.actualBoundingBoxLeft,o=t+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(a,u),e.lineTo(o,u),e.stroke()}}function Ck(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Nk(e,t,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=Kx(t)?t:[t],o=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),e.font=r.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),qx(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<a.length;++l)c=a[l],s.backdrop&&Ck(e,s.backdrop),o&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),qx(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,n,i,s.maxWidth)),e.fillText(c,n,i,s.maxWidth),Tk(e,n,i,c,s),i+=Number(r.lineHeight);e.restore()}function Ik(e,t){const{x:n,y:i,w:r,h:s,radius:a}=t;e.arc(n+a.topLeft,i+a.topLeft,a.topLeft,1.5*p_,p_,!0),e.lineTo(n,i+s-a.bottomLeft),e.arc(n+a.bottomLeft,i+s-a.bottomLeft,a.bottomLeft,p_,b_,!0),e.lineTo(n+r-a.bottomRight,i+s),e.arc(n+r-a.bottomRight,i+s-a.bottomRight,a.bottomRight,b_,0,!0),e.lineTo(n+r,i+a.topRight),e.arc(n+r-a.topRight,i+a.topRight,a.topRight,0,-b_,!0),e.lineTo(n+a.topLeft,i)}const Dk=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Ak=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Mk(e,t){const n=(""+e).match(Dk);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const Pk=e=>+e||0;function Rk(e,t){const n={},i=Gx(t),r=i?Object.keys(t):t,s=Gx(e)?i?n=>Xx(e[n],e[t[n]]):t=>e[t]:()=>e;for(const a of r)n[a]=Pk(s(a));return n}function jk(e){return Rk(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Ok(e){return Rk(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Lk(e){const t=jk(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Fk(e,t){e=e||{},t=t||pk.font;let n=Xx(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let i=Xx(e.style,t.style);i&&!(""+i).match(Ak)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Xx(e.family,t.family),lineHeight:Mk(Xx(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:Xx(e.weight,t.weight),string:""};return r.string=function(e){return!e||qx(e.size)||qx(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(r),r}function Uk(e,t,n,i){let r,s,a,o=!0;for(r=0,s=e.length;r<s;++r)if(a=e[r],void 0!==a&&(void 0!==t&&"function"===typeof a&&(a=a(t),o=!1),void 0!==n&&Kx(a)&&(a=a[n%a.length],o=!1),void 0!==a))return i&&!o&&(i.cacheable=!1),a}function Vk(e,t){return Object.assign(Object.create(e),t)}function zk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const r=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=Jk("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:n,_getTarget:i,override:i=>zk([i,...e],t,r,n)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,i)=>qk(n,i,(()=>function(e,t,n,i){let r;for(const s of t)if(r=Jk(Wk(s,e),n),"undefined"!==typeof r)return Hk(e,r)?Qk(n,i,e,r):r}(i,t,e,n))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>Zk(e).includes(t),ownKeys:e=>Zk(e),set(e,t,n){const r=e._storage||(e._storage=i());return e[t]=r[t]=n,delete e._keys,!0}})}function Bk(e,t,n,i){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:$k(e,i),setContext:t=>Bk(e,t,n,i),override:r=>Bk(e.override(r),t,n,i)};return new Proxy(r,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>qk(e,t,(()=>function(e,t,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:a}=e;let o=i[t];d_(o)&&a.isScriptable(t)&&(o=function(e,t,n,i){const{_proxy:r,_context:s,_subProxy:a,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(s,a||i);o.delete(e),Hk(e,l)&&(l=Qk(r._scopes,r,e,l));return l}(t,o,e,n));Kx(o)&&o.length&&(o=function(e,t,n,i){const{_proxy:r,_context:s,_subProxy:a,_descriptors:o}=n;if("undefined"!==typeof s.index&&i(e))return t[s.index%t.length];if(Gx(t[0])){const n=t,i=r._scopes.filter((e=>e!==n));t=[];for(const l of n){const n=Qk(i,r,e,l);t.push(Bk(n,s,a&&a[e],o))}}return t}(t,o,e,a.isIndexable));Hk(t,o)&&(o=Bk(o,r,s&&s[t],a));return o}(e,t,n))),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,i)=>(e[n]=i,delete t[n],!0)})}function $k(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:i,isScriptable:d_(n)?n:()=>n,isIndexable:d_(i)?i:()=>i}}const Wk=(e,t)=>e?e+u_(t):t,Hk=(e,t)=>Gx(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function qk(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const i=n();return e[t]=i,i}function Kk(e,t,n){return d_(e)?e(t,n):e}const Gk=(e,t)=>!0===e?t:"string"===typeof e?c_(t,e):void 0;function Yk(e,t,n,i,r){for(const s of t){const t=Gk(n,s);if(t){e.add(t);const s=Kk(t._fallback,n,r);if("undefined"!==typeof s&&s!==n&&s!==i)return s}else if(!1===t&&"undefined"!==typeof i&&n!==i)return null}return!1}function Qk(e,t,n,i){const r=t._rootScopes,s=Kk(t._fallback,n,i),a=[...e,...r],o=new Set;o.add(i);let l=Xk(o,a,n,s||n,i);return null!==l&&(("undefined"===typeof s||s===n||(l=Xk(o,a,s,l,i),null!==l))&&zk(Array.from(o),[""],r,s,(()=>function(e,t,n){const i=e._getTarget();t in i||(i[t]={});const r=i[t];if(Kx(r)&&Gx(n))return n;return r||{}}(t,n,i))))}function Xk(e,t,n,i,r){for(;n;)n=Yk(e,t,n,i,r);return n}function Jk(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function Zk(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}function eS(e,t,n,i){const{iScale:r}=e,{key:s="r"}=this._parsing,a=new Array(i);let o,l,c,u;for(o=0,l=i;o<l;++o)c=o+n,u=t[c],a[o]={r:r.parse(c_(u,s),c)};return a}const tS=Number.EPSILON||1e-14,nS=(e,t)=>t<e.length&&!e[t].skip&&e[t],iS=e=>"x"===e?"y":"x";function rS(e,t,n,i){const r=e.skip?t:e,s=t,a=n.skip?t:n,o=M_(s,r),l=M_(a,s);let c=o/(o+l),u=l/(o+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,d=i*u;return{previous:{x:s.x-h*(a.x-r.x),y:s.y-h*(a.y-r.y)},next:{x:s.x+d*(a.x-r.x),y:s.y+d*(a.y-r.y)}}}function sS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=iS(t),i=e.length,r=Array(i).fill(0),s=Array(i);let a,o,l,c=nS(e,0);for(a=0;a<i;++a)if(o=l,l=c,c=nS(e,a+1),l){if(c){const e=c[t]-l[t];r[a]=0!==e?(c[n]-l[n])/e:0}s[a]=o?c?k_(r[a-1])!==k_(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}!function(e,t,n){const i=e.length;let r,s,a,o,l,c=nS(e,0);for(let u=0;u<i-1;++u)l=c,c=nS(e,u+1),l&&c&&(S_(t[u],0,tS)?n[u]=n[u+1]=0:(r=n[u]/t[u],s=n[u+1]/t[u],o=Math.pow(r,2)+Math.pow(s,2),o<=9||(a=3/Math.sqrt(o),n[u]=r*a*t[u],n[u+1]=s*a*t[u])))}(e,r,s),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const i=iS(n),r=e.length;let s,a,o,l=nS(e,0);for(let c=0;c<r;++c){if(a=o,o=l,l=nS(e,c+1),!o)continue;const r=o[n],u=o[i];a&&(s=(r-a[n])/3,o[`cp1${n}`]=r-s,o[`cp1${i}`]=u-s*t[c]),l&&(s=(l[n]-r)/3,o[`cp2${n}`]=r+s,o[`cp2${i}`]=u+s*t[c])}}(e,s,t)}function aS(e,t,n){return Math.max(Math.min(e,n),t)}function oS(e,t,n,i,r){let s,a,o,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)sS(e,r);else{let n=i?e[e.length-1]:e[0];for(s=0,a=e.length;s<a;++s)o=e[s],l=rS(n,o,e[Math.min(s+1,a-(i?0:1))%a],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}t.capBezierPoints&&function(e,t){let n,i,r,s,a,o=xk(e[0],t);for(n=0,i=e.length;n<i;++n)a=s,s=o,o=n<i-1&&xk(e[n+1],t),s&&(r=e[n],a&&(r.cp1x=aS(r.cp1x,t.left,t.right),r.cp1y=aS(r.cp1y,t.top,t.bottom)),o&&(r.cp2x=aS(r.cp2x,t.left,t.right),r.cp2y=aS(r.cp2y,t.top,t.bottom)))}(e,n)}function lS(){return"undefined"!==typeof window&&"undefined"!==typeof document}function cS(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function uS(e,t,n){let i;return"string"===typeof e?(i=parseInt(e,10),-1!==e.indexOf("%")&&(i=i/100*t.parentNode[n])):i=e,i}const hS=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const dS=["top","right","bottom","left"];function fS(e,t,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=dS[r];i[s]=parseFloat(e[t+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function pS(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,r=hS(n),s="border-box"===r.boxSizing,a=fS(r,"padding"),o=fS(r,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:r,offsetY:s}=i;let a,o,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(r,s,e.target))a=r,o=s;else{const e=t.getBoundingClientRect();a=i.clientX-e.left,o=i.clientY-e.top,l=!0}return{x:a,y:o,box:l}}(e,n),h=a.left+(u&&o.left),d=a.top+(u&&o.top);let{width:f,height:p}=t;return s&&(f-=a.width+o.width,p-=a.height+o.height),{x:Math.round((l-h)/f*n.width/i),y:Math.round((c-d)/p*n.height/i)}}const gS=e=>Math.round(10*e)/10;function mS(e,t,n,i){const r=hS(e),s=fS(r,"margin"),a=uS(r.maxWidth,e,"clientWidth")||v_,o=uS(r.maxHeight,e,"clientHeight")||v_,l=function(e,t,n){let i,r;if(void 0===t||void 0===n){const s=e&&cS(e);if(s){const e=s.getBoundingClientRect(),a=hS(s),o=fS(a,"border","width"),l=fS(a,"padding");t=e.width-l.width-o.width,n=e.height-l.height-o.height,i=uS(a.maxWidth,s,"clientWidth"),r=uS(a.maxHeight,s,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:i||v_,maxHeight:r||v_}}(e,t,n);let{width:c,height:u}=l;if("content-box"===r.boxSizing){const e=fS(r,"border","width"),t=fS(r,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=gS(Math.min(c,a,l.maxWidth)),u=gS(Math.min(u,o,l.maxHeight)),c&&!u&&(u=gS(c/2));return(void 0!==t||void 0!==n)&&i&&l.height&&u>l.height&&(u=l.height,c=gS(Math.floor(u*i))),{width:c,height:u}}function vS(e,t,n){const i=t||1,r=Math.floor(e.height*i),s=Math.floor(e.width*i);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${e.height}px`,a.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==i||a.height!==r||a.width!==s)&&(e.currentDevicePixelRatio=i,a.height=r,a.width=s,e.ctx.setTransform(i,0,0,i,0,0),!0)}const yS=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};lS()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(SI){}return e}();function bS(e,t){const n=function(e,t){return hS(e).getPropertyValue(t)}(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function wS(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function xS(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:"middle"===i?n<.5?e.y:t.y:"after"===i?n<1?e.y:t.y:n>0?t.y:e.y}}function _S(e,t,n,i){const r={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},a=wS(e,r,n),o=wS(r,s,n),l=wS(s,t,n),c=wS(a,o,n),u=wS(o,l,n);return wS(c,u,n)}function kS(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function SS(e,t){let n,i;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function ES(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function TS(e){return"angle"===e?{between:j_,compare:P_,normalize:R_}:{between:L_,compare:(e,t)=>e-t,normalize:e=>e}}function CS(e){let{start:t,end:n,count:i,loop:r,style:s}=e;return{start:t%i,end:n%i,loop:r&&(n-t+1)%i===0,style:s}}function NS(e,t,n){if(!n)return[e];const{property:i,start:r,end:s}=n,a=t.length,{compare:o,between:l,normalize:c}=TS(i),{start:u,end:h,loop:d,style:f}=function(e,t,n){const{property:i,start:r,end:s}=n,{between:a,normalize:o}=TS(i),l=t.length;let c,u,{start:h,end:d,loop:f}=e;if(f){for(h+=l,d+=l,c=0,u=l;c<u&&a(o(t[h%l][i]),r,s);++c)h--,d--;h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:f,style:e.style}}(e,t,n),p=[];let g,m,v,y=!1,b=null;const w=()=>y||l(r,v,g)&&0!==o(r,v),x=()=>!y||0===o(s,g)||l(s,v,g);for(let _=u,k=u;_<=h;++_)m=t[_%a],m.skip||(g=c(m[i]),g!==v&&(y=l(g,r,s),null===b&&w()&&(b=0===o(g,r)?_:k),null!==b&&x()&&(p.push(CS({start:b,end:_,loop:d,count:a,style:f})),b=null),k=_,v=g));return null!==b&&p.push(CS({start:b,end:h,loop:d,count:a,style:f})),p}function IS(e,t){const n=[],i=e.segments;for(let r=0;r<i.length;r++){const s=NS(i[r],e.points,t);s.length&&n.push(...s)}return n}function DS(e,t,n,i){return i&&i.setContext&&n?function(e,t,n,i){const r=e._chart.getContext(),s=AS(e.options),{_datasetIndex:a,options:{spanGaps:o}}=e,l=n.length,c=[];let u=s,h=t[0].start,d=h;function f(e,t,i,r){const s=o?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=s;for(;n[t%l].skip;)t+=s;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:i,style:r}),u=r,h=t%l)}}for(const p of t){h=o?h:p.start;let e,t=n[h%l];for(d=h+1;d<=p.end;d++){const s=n[d%l];e=AS(i.setContext(Vk(r,{type:"segment",p0:t,p1:s,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:a}))),MS(e,u)&&f(h,d-1,p.loop,u),t=s,u=e}h<d-1&&f(h,d-1,p.loop,u)}return c}(e,t,n,i):t}function AS(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function MS(e,t){if(!t)return!1;const n=[],i=function(e,t){return ek(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,i)!==JSON.stringify(t,i)}function PS(e,t,n){return e.options.clip?e[n]:t[n]}function RS(e,t){const n=t._clip;if(n.disabled)return!1;const i=function(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:PS(n,t,"left"),right:PS(n,t,"right"),top:PS(i,t,"top"),bottom:PS(i,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:i.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:i.right+(!0===n.right?0:n.right),top:!1===n.top?0:i.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:i.bottom+(!0===n.bottom?0:n.bottom)}}class jS{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,i){const r=t.listeners[i],s=t.duration;r.forEach((i=>i({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)})))}_refresh(){this._request||(this._running=!0,this._request=W_.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach(((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let s,a=r.length-1,o=!1;for(;a>=0;--a)s=r[a],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(e),o=!0):(r[a]=r[r.length-1],r.pop());o&&(i.draw(),this._notify(i,n,e,"progress")),r.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),t+=r.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var OS=new jS;const LS="transparent",FS={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const i=tk(e||LS),r=i.valid&&tk(t||LS);return r&&r.valid?r.mix(i,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class US{constructor(e,t,n,i){const r=t[n];i=Uk([e.to,i,r,e.from]);const s=Uk([e.from,r,i]);this._active=!0,this._fn=e.fn||FS[e.type||typeof s],this._easing=Z_[e.easing]||Z_.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,s=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Uk([e.to,t,i,e.from]),this._from=Uk([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,i=this._prop,r=this._from,s=this._loop,a=this._to;let o;if(this._active=r!==a&&(s||t<n),!this._active)return this._target[i]=a,void this._notify(!0);t<0?this._target[i]=r:(o=t/n%2,o=s&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[i]=this._fn(r,a,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,n)=>{e.push({res:t,rej:n})}))}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][t]()}}class VS{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Gx(e))return;const t=Object.keys(pk.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach((i=>{const r=e[i];if(!Gx(r))return;const s={};for(const e of t)s[e]=r[e];(Kx(r.properties)&&r.properties||[i]).forEach((e=>{e!==i&&n.has(e)||n.set(e,s)}))}))}_animateOptions(e,t){const n=t.options,i=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&function(e,t){const n=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const t=e[i[r]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then((()=>{e.options=n}),(()=>{})),r}_createAnimations(e,t){const n=this._properties,i=[],r=e.$animations||(e.$animations={}),s=Object.keys(t),a=Date.now();let o;for(o=s.length-1;o>=0;--o){const l=s[o];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(e,t));continue}const c=t[l];let u=r[l];const h=n.get(l);if(u){if(h&&u.active()){u.update(h,c,a);continue}u.cancel()}h&&h.duration?(r[l]=u=new US(h,e,l,c),i.push(u)):e[l]=c}return i}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(OS.add(this._chart,n),!0):void 0}}function zS(e,t){const n=e&&e.options||{},i=n.reverse,r=void 0===n.min?t:0,s=void 0===n.max?t:0;return{start:i?s:r,end:i?r:s}}function BS(e,t){const n=[],i=e._getSortedDatasetMetas(t);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function $S(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=e.keys,s="single"===i.mode;let a,o,l,c;if(null===t)return;let u=!1;for(a=0,o=r.length;a<o;++a){if(l=+r[a],l===n){if(u=!0,i.all)continue;break}c=e.values[l],Yx(c)&&(s||0===t||k_(t)===k_(c))&&(t+=c)}return u||i.all?t:0}function WS(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function HS(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function qS(e,t,n,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const t=e[r.index];if(n&&t>0||!n&&t<0)return r.index}return null}function KS(e,t){const{chart:n,_cachedMeta:i}=e,r=n._stacks||(n._stacks={}),{iScale:s,vScale:a,index:o}=i,l=s.axis,c=a.axis,u=function(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}(s,a,i),h=t.length;let d;for(let f=0;f<h;++f){const e=t[f],{[l]:n,[c]:s}=e;d=(e._stacks||(e._stacks={}))[c]=HS(r,u,n),d[o]=s,d._top=qS(d,a,!0,i.type),d._bottom=qS(d,a,!1,i.type);(d._visualValues||(d._visualValues={}))[o]=s}}function GS(e,t){const n=e.scales;return Object.keys(n).filter((e=>n[e].axis===t)).shift()}function YS(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[i]||void 0===t[i][n])return;delete t[i][n],void 0!==t[i]._visualValues&&void 0!==t[i]._visualValues[n]&&delete t[i]._visualValues[n]}}}const QS=e=>"reset"===e||"none"===e,XS=(e,t)=>t?e:Object.assign({},e);class JS{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=WS(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&YS(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),i=(e,t,n,i)=>"x"===e?t:"r"===e?i:n,r=t.xAxisID=Xx(n.xAxisID,GS(e,"x")),s=t.yAxisID=Xx(n.yAxisID,GS(e,"y")),a=t.rAxisID=Xx(n.rAxisID,GS(e,"r")),o=t.indexAxis,l=t.iAxisID=i(o,r,s,a),c=t.vAxisID=i(o,s,r,a);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&B_(this._data,this),e._stacked&&YS(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(Gx(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:i}=t,r="x"===n.axis?"x":"y",s="x"===i.axis?"x":"y",a=Object.keys(e),o=new Array(a.length);let l,c,u;for(l=0,c=a.length;l<c;++l)u=a[l],o[l]={[r]:u,[s]:e[u]};return o}(t,e)}else if(n!==t){if(n){B_(n,this);const e=this._cachedMeta;YS(e),e._parsed=[]}t&&Object.isExtensible(t)&&(r=this,(i=t)._chartjs?i._chartjs.listeners.push(r):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[r]}}),z_.forEach((e=>{const t="_onData"+u_(e),n=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];const a=n.apply(this,r);return i._chartjs.listeners.forEach((e=>{"function"===typeof e[t]&&e[t](...r)})),a}})})))),this._syncList=[],this._data=t}var i,r}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=t._stacked;t._stacked=WS(t.vScale,t),t.stack!==n.stack&&(i=!0,YS(t),t.stack=n.stack),this._resyncElements(e),(i||r!==t._stacked)&&(KS(this,t._parsed),t._stacked=WS(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:s}=n,a=r.axis;let o,l,c,u=0===e&&t===i.length||n._sorted,h=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,c=i;else{c=Kx(i[e])?this.parseArrayData(n,i,e,t):Gx(i[e])?this.parseObjectData(n,i,e,t):this.parsePrimitiveData(n,i,e,t);const r=()=>null===l[a]||h&&l[a]<h[a];for(o=0;o<t;++o)n._parsed[o+e]=l=c[o],u&&(r()&&(u=!1),h=l);n._sorted=u}s&&KS(this,c)}parsePrimitiveData(e,t,n,i){const{iScale:r,vScale:s}=e,a=r.axis,o=s.axis,l=r.getLabels(),c=r===s,u=new Array(i);let h,d,f;for(h=0,d=i;h<d;++h)f=h+n,u[h]={[a]:c||r.parse(l[f],f),[o]:s.parse(t[f],f)};return u}parseArrayData(e,t,n,i){const{xScale:r,yScale:s}=e,a=new Array(i);let o,l,c,u;for(o=0,l=i;o<l;++o)c=o+n,u=t[c],a[o]={x:r.parse(u[0],c),y:s.parse(u[1],c)};return a}parseObjectData(e,t,n,i){const{xScale:r,yScale:s}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l=new Array(i);let c,u,h,d;for(c=0,u=i;c<u;++c)h=c+n,d=t[h],l[c]={x:r.parse(c_(d,a),h),y:s.parse(c_(d,o),h)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const i=this.chart,r=this._cachedMeta,s=t[e.axis];return $S({keys:BS(i,!0),values:t._stacks[e.axis]._visualValues},s,r.index,{mode:n})}updateRangeFromParsed(e,t,n,i){const r=n[t.axis];let s=null===r?NaN:r;const a=i&&n._stacks[t.axis];i&&a&&(i.values=a,s=$S(i,r,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&e===n.iScale,s=i.length,a=this._getOtherScale(e),o=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:BS(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:i,maxDefined:r}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(a);let h,d;function f(){d=i[h];const t=d[a.axis];return!Yx(d[e.axis])||c>t||u<t}for(h=0;h<s&&(f()||(this.updateRangeFromParsed(l,e,d,o),!r));++h);if(r)for(h=s-1;h>=0;--h)if(!f()){this.updateRangeFromParsed(l,e,d,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i][e.axis],Yx(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,i=t.vScale,r=this.getParsed(e);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,i,r;return Gx(e)?(t=e.top,n=e.right,i=e.bottom,r=e.left):t=n=i=r=e,{top:t,right:n,bottom:i,left:r,disabled:!1===e}}(Xx(this.options.clip,function(e,t,n){if(!1===n)return!1;const i=zS(e,n),r=zS(t,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,i=n.data||[],r=t.chartArea,s=[],a=this._drawStart||0,o=this._drawCount||i.length-a,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,r,a,o),c=a;c<a+o;++c){const t=i[c];t.hidden||(t.active&&l?s.push(t):t.draw(e,r))}for(c=0;c<s.length;++c)s[c].draw(e,r)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const i=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];r=t.$context||(t.$context=function(e,t,n){return Vk(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),r.parsed=this.getParsed(e),r.raw=i.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=function(e,t){return Vk(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=n,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const i="active"===t,r=this._cachedDataOpts,s=e+"-"+t,a=r[s],o=this.enableOptionSharing&&h_(n);if(a)return XS(a,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=i?[`${e}Hover`,"hover",e,""]:[e,""],h=l.getOptionScopes(this.getDataset(),c),d=Object.keys(pk.elements[e]),f=l.resolveNamedOptions(h,d,(()=>this.getContext(n,i,t)),u);return f.$shared&&(f.$shared=o,r[s]=Object.freeze(XS(f,o))),f}_resolveAnimations(e,t,n){const i=this.chart,r=this._cachedDataOpts,s=`animation-${t}`,a=r[s];if(a)return a;let o;if(!1!==i.options.animation){const i=this.chart.config,r=i.datasetAnimationScopeKeys(this._type,t),s=i.getOptionScopes(this.getDataset(),r);o=i.createResolver(s,this.getContext(e,n,t))}const l=new VS(i,o&&o.animations);return o&&o._cacheable&&(r[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||QS(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),i=this._sharedOptions,r=this.getSharedOptions(n),s=this.includeOptions(t,r)||r!==i;return this.updateSharedOptions(r,t,n),{sharedOptions:r,includeOptions:s}}updateElement(e,t,n,i){QS(i)?Object.assign(e,n):this._resolveAnimations(t,i).update(e,n)}updateSharedOptions(e,t,n){e&&!QS(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,i){e.active=i;const r=this.getStyle(t,i);this._resolveAnimations(t,n,i).update(e,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[a,o,l]of this._syncList)this[a](o,l);this._syncList=[];const i=n.length,r=t.length,s=Math.min(r,i);s&&this.parse(0,s),r>i?this._insertElements(i,r-i,e):r<i&&this._removeElements(r,i-r)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this._cachedMeta,r=i.data,s=e+t;let a;const o=e=>{for(e.length+=t,a=e.length-1;a>=s;a--)e[a]=e[a-t]};for(o(r),a=e;a<s;++a)r[a]=new this.dataElementType;this._parsing&&o(i._parsed),this.parse(e,t),n&&this.updateElements(r,e,t,"reset")}updateElements(e,t,n,i){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,t);n._stacked&&YS(n,i)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,i]=e;this[t](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function ZS(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let t=0,r=n.length;t<r;t++)i=i.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=$_(i.sort(((e,t)=>e-t)))}return e._cache.$bar}(t,e.type);let i,r,s,a,o=t._length;const l=()=>{32767!==s&&-32768!==s&&(h_(a)&&(o=Math.min(o,Math.abs(s-a)||o)),a=s)};for(i=0,r=n.length;i<r;++i)s=t.getPixelForValue(n[i]),l();for(a=void 0,i=0,r=t.ticks.length;i<r;++i)s=t.getPixelForTick(i),l();return o}function eE(e,t,n,i){return Kx(e)?function(e,t,n,i){const r=n.parse(e[0],i),s=n.parse(e[1],i),a=Math.min(r,s),o=Math.max(r,s);let l=a,c=o;Math.abs(a)>Math.abs(o)&&(l=o,c=a),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:s,min:a,max:o}}(e,t,n,i):t[n.axis]=n.parse(e,i),t}function tE(e,t,n,i){const r=e.iScale,s=e.vScale,a=r.getLabels(),o=r===s,l=[];let c,u,h,d;for(c=n,u=n+i;c<u;++c)d=t[c],h={},h[r.axis]=o||r.parse(a[c],c),l.push(eE(d,h,s,c));return l}function nE(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function iE(e,t,n,i){let r=t.borderSkipped;const s={};if(!r)return void(e.borderSkipped=s);if(!0===r)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:o,reverse:l,top:c,bottom:u}=function(e){let t,n,i,r,s;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:t,top:r,bottom:s}}(e);"middle"===r&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=u:(s[rE(u,a,o,l)]=!0,r=c)),s[rE(r,a,o,l)]=!0,e.borderSkipped=s}function rE(e,t,n,i){var r,s,a;return i?(a=n,e=sE(e=(r=e)===(s=t)?a:r===a?s:r,n,t)):e=sE(e,t,n),e}function sE(e,t,n){return"start"===e?t:"end"===e?n:e}function aE(e,t,n){let{inflateAmount:i}=t;e.inflateAmount="auto"===i?1===n?.33:0:i}class oE extends JS{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return t.labels.map(((t,r)=>{const s=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let r,s,a=e=>+n[e];if(Gx(n[e])){const{key:e="value"}=this._parsing;a=t=>+c_(n[t],e)}for(r=e,s=e+t;r<s;++r)i._parsed[r]=a(r)}}_getRotation(){return N_(this.options.rotation-90)}_getCircumference(){return N_(this.options.circumference)}_getRotationExtents(){let e=g_,t=-g_;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),s=i._getCircumference();e=Math.min(e,r),t=Math.max(t,r+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,i=this._cachedMeta,r=i.data,s=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-s)/2,0),o=Math.min((l=this.options.cutout,c=a,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(e,t,n){let i=1,r=1,s=0,a=0;if(t<g_){const o=e,l=o+t,c=Math.cos(o),u=Math.sin(o),h=Math.cos(l),d=Math.sin(l),f=(e,t,i)=>j_(e,o,l,!0)?1:Math.max(t,t*n,i,i*n),p=(e,t,i)=>j_(e,o,l,!0)?-1:Math.min(t,t*n,i,i*n),g=f(0,c,h),m=f(b_,u,d),v=p(p_,c,h),y=p(p_+b_,u,d);i=(g-v)/2,r=(m-y)/2,s=-(g+v)/2,a=-(m+y)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:a}}(d,h,o),v=(n.width-s)/f,y=(n.height-s)/p,b=Math.max(Math.min(v,y)/2,0),w=Jx(this.options.radius,b),x=(w-Math.max(w*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*w,this.offsetY=m*w,i.total=this.calculateTotal(),this.outerRadius=w-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*u,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===i._parsed[e]||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*r/g_)}updateElements(e,t,n,i){const r="reset"===i,s=this.chart,a=s.chartArea,o=s.options.animation,l=(a.left+a.right)/2,c=(a.top+a.bottom)/2,u=r&&o.animateScale,h=u?0:this.innerRadius,d=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(t,i);let g,m=this._getRotation();for(g=0;g<t;++g)m+=this._circumference(g,r);for(g=t;g<t+n;++g){const t=this._circumference(g,r),n=e[g],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+t,circumference:t,outerRadius:d,innerRadius:h};p&&(s.options=f||this.resolveDataElementOptions(g,n.active?"active":i)),m+=t,this.updateElement(n,g,s,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,i=0;for(n=0;n<t.length;n++){const r=e._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||t[n].hidden||(i+=Math.abs(r))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?g_*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=ak(t._parsed[e],n.options.locale);return{label:i[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const n=this.chart;let i,r,s,a,o;if(!e)for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){s=n.getDatasetMeta(i),e=s.data,a=s.controller;break}if(!e)return 0;for(i=0,r=e.length;i<r;++i)o=a.resolveDataElementOptions(i),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,i=e.length;n<i;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(Xx(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class lE extends JS{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return t.labels.map(((t,r)=>{const s=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=ak(t._parsed[e].r,n.options.locale);return{label:i[e]||"",value:r}}parseObjectData(e,t,n,i){return eS.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach(((e,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<t.min&&(t.min=i),i>t.max&&(t.max=i))})),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,i=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(i/2,0),s=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=r-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,t,n,i){const r="reset"===i,s=this.chart,a=s.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,u=o.getIndexAngle(0)-.5*p_;let h,d=u;const f=360/this.countVisibleElements();for(h=0;h<t;++h)d+=this._computeAngle(h,i,f);for(h=t;h<t+n;h++){const t=e[h];let n=d,p=d+this._computeAngle(h,i,f),g=s.getDataVisibility(h)?o.getDistanceFromCenterForValue(this.getParsed(h).r):0;d=p,r&&(a.animateScale&&(g=0),a.animateRotate&&(n=p=u));const m={x:l,y:c,innerRadius:0,outerRadius:g,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(h,t.active?"active":i)};this.updateElement(t,h,m,i)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach(((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++})),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?N_(this.resolveDataElementOptions(e,t).angle||n):0}}var cE=Object.freeze({__proto__:null,BarController:class extends JS{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,n,i){return tE(e,t,n,i)}parseArrayData(e,t,n,i){return tE(e,t,n,i)}parseObjectData(e,t,n,i){const{iScale:r,vScale:s}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l="x"===r.axis?a:o,c="x"===s.axis?a:o,u=[];let h,d,f,p;for(h=n,d=n+i;h<d;++h)p=t[h],f={},f[r.axis]=r.parse(c_(p,l),h),u.push(eE(c_(p,c),f,s,h));return u}updateRangeFromParsed(e,t,n,i){super.updateRangeFromParsed(e,t,n,i);const r=n._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:i}=t,r=this.getParsed(e),s=r._custom,a=nE(s)?"["+s.start+", "+s.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,i){const r="reset"===i,{index:s,_cachedMeta:{vScale:a}}=this,o=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(t,i);for(let d=t;d<t+n;d++){const t=this.getParsed(d),n=r||qx(t[a.axis])?{base:o,head:o}:this._calculateBarValuePixels(d),f=this._calculateBarIndexPixels(d,c),p=(t._stacks||{})[a.axis],g={horizontal:l,base:n.base,enableBorderRadius:!p||nE(t._custom)||s===p._top||s===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};h&&(g.options=u||this.resolveDataElementOptions(d,e[d].active?"active":i));const m=g.options||e[d].options;iE(g,m,p,s),aE(g,m,c.ratio),this.updateElement(e[d],d,g,i)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter((e=>e.controller.options.grouped)),r=n.options.stacked,s=[],a=this._cachedMeta.controller.getParsed(t),o=a&&a[n.axis],l=e=>{const t=e._parsed.find((e=>e[n.axis]===o)),i=t&&t[e.vScale.axis];if(qx(i)||isNaN(i))return!0};for(const c of i)if((void 0===t||!l(c))&&((!1===r||-1===s.indexOf(c.stack)||void 0===r&&void 0===c.stack)&&s.push(c.stack),c.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,n){const i=this._getStacks(e,n),r=void 0!==t?i.indexOf(t):-1;return-1===r?i.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,i=[];let r,s;for(r=0,s=t.data.length;r<s;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const a=e.barThickness;return{min:a||ZS(t),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:i},options:{base:r,minBarLength:s}}=this,a=r||0,o=this.getParsed(e),l=o._custom,c=nE(l);let u,h,d=o[t.axis],f=0,p=n?this.applyStack(t,o,n):d;p!==d&&(f=p-d,p=d),c&&(d=l.barStart,p=l.barEnd-l.barStart,0!==d&&k_(d)!==k_(l.barEnd)&&(f=0),f+=d);const g=qx(r)||c?f:r;let m=t.getPixelForValue(g);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(f+p):m,h=u-m,Math.abs(h)<s){h=function(e,t,n){return 0!==e?k_(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(h,t,a)*s,d===a&&(m-=h/2);const e=t.getPixelForDecimal(0),r=t.getPixelForDecimal(1),l=Math.min(e,r),f=Math.max(e,r);m=Math.max(Math.min(m,f),l),u=m+h,n&&!c&&(o._stacks[t.axis]._visualValues[i]=t.getValueForPixel(u)-t.getValueForPixel(m))}if(m===t.getPixelForValue(a)){const e=k_(h)*t.getLineWidthForValue(a)/2;m+=e,h-=e}return{size:h,base:m,head:u,center:u+h/2}}_calculateBarIndexPixels(e,t){const n=t.scale,i=this.options,r=i.skipNull,s=Xx(i.maxBarThickness,1/0);let a,o;if(t.grouped){const n=r?this._getStackCount(e):t.stackCount,l="flex"===i.barThickness?function(e,t,n,i){const r=t.pixels,s=r[e];let a=e>0?r[e-1]:null,o=e<r.length-1?r[e+1]:null;const l=n.categoryPercentage;null===a&&(a=s-(null===o?t.end-t.start:o-s)),null===o&&(o=s+s-a);const c=s-(s-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/i,ratio:n.barPercentage,start:c}}(e,t,i,n):function(e,t,n,i){const r=n.barThickness;let s,a;return qx(r)?(s=t.min*n.categoryPercentage,a=n.barPercentage):(s=r*i,a=1),{chunk:s/i,ratio:a,start:t.pixels[e]-s/2}}(e,t,i,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0);a=l.start+l.chunk*c+l.chunk/2,o=Math.min(s,l.chunk*l.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),o=Math.min(s,t.min*t.ratio);return{base:a-o/2,head:a+o/2,center:a,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,i=n.length;let r=0;for(;r<i;++r)null===this.getParsed(r)[t.axis]||n[r].hidden||n[r].draw(this._ctx)}},BubbleController:class extends JS{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,i){const r=super.parsePrimitiveData(e,t,n,i);for(let s=0;s<r.length;s++)r[s]._custom=this.resolveDataElementOptions(s+n).radius;return r}parseArrayData(e,t,n,i){const r=super.parseArrayData(e,t,n,i);for(let s=0;s<r.length;s++){const e=t[n+s];r[s]._custom=Xx(e[2],this.resolveDataElementOptions(s+n).radius)}return r}parseObjectData(e,t,n,i){const r=super.parseObjectData(e,t,n,i);for(let s=0;s<r.length;s++){const e=t[n+s];r[s]._custom=Xx(e&&e.r&&+e.r,this.resolveDataElementOptions(s+n).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=t,s=this.getParsed(e),a=i.getLabelForValue(s.x),o=r.getLabelForValue(s.y),l=s._custom;return{label:n[e]||"",value:"("+a+", "+o+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:a}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,i),c=s.axis,u=a.axis;for(let h=t;h<t+n;h++){const t=e[h],n=!r&&this.getParsed(h),d={},f=d[c]=r?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),p=d[u]=r?a.getBasePixel():a.getPixelForValue(n[u]);d.skip=isNaN(f)||isNaN(p),l&&(d.options=o||this.resolveDataElementOptions(h,t.active?"active":i),r&&(d.options.radius=0)),this.updateElement(t,h,d,i)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let i=super.resolveDataElementOptions(e,t);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return"active"!==t&&(i.radius=0),i.radius+=Xx(n&&n._custom,r),i}},DoughnutController:oE,LineController:class extends JS{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=t,s=this.chart._animationsDisabled;let{start:a,count:o}=G_(t,i,s);this._drawStart=a,this._drawCount=o,Y_(t)&&(a=0,o=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},e),this.updateElements(i,a,o,e)}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,i),h=s.axis,d=a.axis,{spanGaps:f,segment:p}=this.options,g=T_(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||r||"none"===i,v=t+n,y=e.length;let b=t>0&&this.getParsed(t-1);for(let w=0;w<y;++w){const n=e[w],f=m?n:{};if(w<t||w>=v){f.skip=!0;continue}const y=this.getParsed(w),x=qx(y[d]),_=f[h]=s.getPixelForValue(y[h],w),k=f[d]=r||x?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,y,o):y[d],w);f.skip=isNaN(_)||isNaN(k)||x,f.stop=w>0&&Math.abs(y[h]-b[h])>g,p&&(f.parsed=y,f.raw=l.data[w]),u&&(f.options=c||this.resolveDataElementOptions(w,n.active?"active":i)),m||this.updateElement(n,w,f,i),b=y}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),s=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}},PieController:class extends oE{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},PolarAreaController:lE,RadarController:class extends JS{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,i){return eS.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta,n=t.dataset,i=t.data||[],r=t.iScale.getLabels();if(n.points=i,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const s={_loop:!0,_fullLoop:r.length===i.length,options:t};this.updateElement(n,void 0,s,e)}this.updateElements(i,0,i.length,e)}updateElements(e,t,n,i){const r=this._cachedMeta.rScale,s="reset"===i;for(let a=t;a<t+n;a++){const t=e[a],n=this.resolveDataElementOptions(a,t.active?"active":i),o=r.getPointPositionForValue(a,this.getParsed(a).r),l=s?r.xCenter:o.x,c=s?r.yCenter:o.y,u={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,a,u,i)}}},ScatterController:class extends JS{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=t,s=this.getParsed(e),a=i.getLabelForValue(s.x),o=r.getLabelForValue(s.y);return{label:n[e]||"",value:"("+a+", "+o+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,i=this.chart._animationsDisabled;let{start:r,count:s}=G_(t,n,i);if(this._drawStart=r,this._drawCount=s,Y_(t)&&(r=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:r,_dataset:s}=t;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=n;const a=this.resolveDatasetElementOptions(e);a.segment=this.options.segment,this.updateElement(r,void 0,{animated:!i,options:a},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,r,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,i),u=this.getSharedOptions(c),h=this.includeOptions(i,u),d=s.axis,f=a.axis,{spanGaps:p,segment:g}=this.options,m=T_(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||"none"===i;let y=t>0&&this.getParsed(t-1);for(let b=t;b<t+n;++b){const t=e[b],n=this.getParsed(b),c=v?t:{},p=qx(n[f]),w=c[d]=s.getPixelForValue(n[d],b),x=c[f]=r||p?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,n,o):n[f],b);c.skip=isNaN(w)||isNaN(x)||p,c.stop=b>0&&Math.abs(n[d]-y[d])>m,g&&(c.parsed=n,c.raw=l.data[b]),h&&(c.options=u||this.resolveDataElementOptions(b,t.active?"active":i)),v||this.updateElement(t,b,c,i),y=n}this.updateSharedOptions(u,i,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,i=n.options&&n.options.borderWidth||0;if(!t.length)return i;const r=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(i,r,s)/2}}});function uE(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class hE{static override(e){Object.assign(hE.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return uE()}parse(){return uE()}format(){return uE()}add(){return uE()}diff(){return uE()}startOf(){return uE()}endOf(){return uE()}}var dE=hE;function fE(e,t,n,i){const{controller:r,data:s,_sorted:a}=e,o=r._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&a&&s.length){const a=o._reversePixels?V_:U_;if(!i){const i=a(s,t,n);if(l){const{vScale:t}=r._cachedMeta,{_parsed:n}=e,s=n.slice(0,i.lo+1).reverse().findIndex((e=>!qx(e[t.axis])));i.lo-=Math.max(0,s);const a=n.slice(i.hi).findIndex((e=>!qx(e[t.axis])));i.hi+=Math.max(0,a)}return i}if(r._sharedOptions){const e=s[0],i="function"===typeof e.getRange&&e.getRange(t);if(i){const e=a(s,t,n-i),r=a(s,t,n+i);return{lo:e.lo,hi:r.hi}}}}return{lo:0,hi:s.length-1}}function pE(e,t,n,i,r){const s=e.getSortedVisibleDatasetMetas(),a=n[t];for(let o=0,l=s.length;o<l;++o){const{index:e,data:n}=s[o],{lo:l,hi:c}=fE(s[o],t,a,r);for(let t=l;t<=c;++t){const r=n[t];r.skip||i(r,e,t)}}}function gE(e,t,n,i,r){const s=[];if(!r&&!e.isPointInArea(t))return s;return pE(e,n,t,(function(n,a,o){(r||xk(n,e.chartArea,0))&&n.inRange(t.x,t.y,i)&&s.push({element:n,datasetIndex:a,index:o})}),!0),s}function mE(e,t,n,i,r,s){let a=[];const o=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,i){const r=t?Math.abs(e.x-i.x):0,s=n?Math.abs(e.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return pE(e,n,t,(function(n,c,u){const h=n.inRange(t.x,t.y,r);if(i&&!h)return;const d=n.getCenterPoint(r);if(!(!!s||e.isPointInArea(d))&&!h)return;const f=o(t,d);f<l?(a=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&a.push({element:n,datasetIndex:c,index:u})})),a}function vE(e,t,n,i,r,s){return s||e.isPointInArea(t)?"r"!==n||i?mE(e,t,n,i,r,s):function(e,t,n,i){let r=[];return pE(e,n,t,(function(e,n,s){const{startAngle:a,endAngle:o}=e.getProps(["startAngle","endAngle"],i),{angle:l}=A_(e,{x:t.x,y:t.y});j_(l,a,o)&&r.push({element:e,datasetIndex:n,index:s})})),r}(e,t,n,r):[]}function yE(e,t,n,i,r){const s=[],a="x"===n?"inXRange":"inYRange";let o=!1;return pE(e,n,t,((e,i,l)=>{e[a]&&e[a](t[n],r)&&(s.push({element:e,datasetIndex:i,index:l}),o=o||e.inRange(t.x,t.y,r))})),i&&!o?[]:s}var bE={evaluateInteractionItems:pE,modes:{index(e,t,n,i){const r=pS(t,e),s=n.axis||"x",a=n.includeInvisible||!1,o=n.intersect?gE(e,r,s,i,a):vE(e,r,s,!1,i,a),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=o[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})})),l):[]},dataset(e,t,n,i){const r=pS(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;let o=n.intersect?gE(e,r,s,i,a):vE(e,r,s,!1,i,a);if(o.length>0){const t=o[0].datasetIndex,n=e.getDatasetMeta(t).data;o=[];for(let e=0;e<n.length;++e)o.push({element:n[e],datasetIndex:t,index:e})}return o},point:(e,t,n,i)=>gE(e,pS(t,e),n.axis||"xy",i,n.includeInvisible||!1),nearest(e,t,n,i){const r=pS(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;return vE(e,r,s,n.intersect,i,a)},x:(e,t,n,i)=>yE(e,pS(t,e),"x",n.intersect,i),y:(e,t,n,i)=>yE(e,pS(t,e),"y",n.intersect,i)}};const wE=["left","top","right","bottom"];function xE(e,t){return e.filter((e=>e.pos===t))}function _E(e,t){return e.filter((e=>-1===wE.indexOf(e.pos)&&e.box.axis===t))}function kE(e,t){return e.sort(((e,n)=>{const i=t?n:e,r=t?e:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight}))}function SE(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:i,stackWeight:r}=n;if(!e||!wE.includes(i))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=r}return t}(e),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let s,a,o;for(s=0,a=e.length;s<a;++s){o=e[s];const{fullSize:a}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*i:a&&t.availableWidth,o.height=r):(o.width=i,o.height=c?c*r:a&&t.availableHeight)}return n}function EE(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function TE(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function CE(e,t,n,i){const{pos:r,box:s}=n,a=e.maxPadding;if(!Gx(r)){n.size&&(e[r]-=n.size);const t=i[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?s.height:s.width),n.size=t.size/t.count,e[r]+=n.size}s.getPadding&&TE(a,s.getPadding());const o=Math.max(0,t.outerWidth-EE(a,e,"left","right")),l=Math.max(0,t.outerHeight-EE(a,e,"top","bottom")),c=o!==e.w,u=l!==e.h;return e.w=o,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function NE(e,t){const n=t.maxPadding;function i(e){const i={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{i[e]=Math.max(t[e],n[e])})),i}return i(e?["left","right"]:["top","bottom"])}function IE(e,t,n,i){const r=[];let s,a,o,l,c,u;for(s=0,a=e.length,c=0;s<a;++s){o=e[s],l=o.box,l.update(o.width||t.w,o.height||t.h,NE(o.horizontal,t));const{same:a,other:h}=CE(t,n,o,i);c|=a&&r.length,u=u||h,l.fullSize||r.push(o)}return c&&IE(r,t,n,i)||u}function DE(e,t,n,i,r){e.top=n,e.left=t,e.right=t+i,e.bottom=n+r,e.width=i,e.height=r}function AE(e,t,n,i){const r=n.padding;let{x:s,y:a}=t;for(const o of e){const e=o.box,l=i[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const i=t.w*c,s=l.size||e.height;h_(l.start)&&(a=l.start),e.fullSize?DE(e,r.left,a,n.outerWidth-r.right-r.left,s):DE(e,t.left+l.placed,a,i,s),l.start=a,l.placed+=i,a=e.bottom}else{const i=t.h*c,a=l.size||e.width;h_(l.start)&&(s=l.start),e.fullSize?DE(e,s,r.top,a,n.outerHeight-r.bottom-r.top):DE(e,s,t.top+l.placed,a,i),l.start=s,l.placed+=i,s=e.right}}t.x=s,t.y=a}var ME={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const r=Lk(e.options.layout.padding),s=Math.max(t-r.width,0),a=Math.max(n-r.height,0),o=function(e){const t=function(e){const t=[];let n,i,r,s,a,o;for(n=0,i=(e||[]).length;n<i;++n)r=e[n],({position:s,options:{stack:a,stackWeight:o=1}}=r),t.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&s+a,stackWeight:o});return t}(e),n=kE(t.filter((e=>e.box.fullSize)),!0),i=kE(xE(t,"left"),!0),r=kE(xE(t,"right")),s=kE(xE(t,"top"),!0),a=kE(xE(t,"bottom")),o=_E(t,"x"),l=_E(t,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(a).concat(o),chartArea:xE(t,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(a).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;e_(e.boxes,(e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()}));const u=l.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/u,hBoxMaxHeight:a/2}),d=Object.assign({},r);TE(d,Lk(i));const f=Object.assign({maxPadding:d,w:s,h:a,x:r.left,y:r.top},r),p=SE(l.concat(c),h);IE(o.fullSize,f,h,p),IE(l,f,h,p),IE(c,f,h,p)&&IE(l,f,h,p),function(e){const t=e.maxPadding;function n(n){const i=Math.max(t[n]-e[n],0);return e[n]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),AE(o.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,AE(o.rightAndBottom,f,h,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},e_(o.chartArea,(t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class PE{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,i){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):n)}}isAttached(e){return!0}updateConfig(e){}}class RE extends PE{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const jE="$chartjs",OE={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},LE=e=>null===e||""===e;const FE=!!yS&&{passive:!0};function UE(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,FE)}function VE(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function zE(e,t,n){const i=e.canvas,r=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||VE(n.addedNodes,i),t=t&&!VE(n.removedNodes,i);t&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}function BE(e,t,n){const i=e.canvas,r=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||VE(n.removedNodes,i),t=t&&!VE(n.addedNodes,i);t&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}const $E=new Map;let WE=0;function HE(){const e=window.devicePixelRatio;e!==WE&&(WE=e,$E.forEach(((t,n)=>{n.currentDevicePixelRatio!==e&&t()})))}function qE(e,t,n){const i=e.canvas,r=i&&cS(i);if(!r)return;const s=H_(((e,t)=>{const i=r.clientWidth;n(e,t),i<r.clientWidth&&n()}),window),a=new ResizeObserver((e=>{const t=e[0],n=t.contentRect.width,i=t.contentRect.height;0===n&&0===i||s(n,i)}));return a.observe(r),function(e,t){$E.size||window.addEventListener("resize",HE),$E.set(e,t)}(e,s),a}function KE(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){$E.delete(e),$E.size||window.removeEventListener("resize",HE)}(e)}function GE(e,t,n){const i=e.canvas,r=H_((t=>{null!==e.ctx&&n(function(e,t){const n=OE[e.type]||e.type,{x:i,y:r}=pS(e,t);return{type:n,chart:t,native:e,x:void 0!==i?i:null,y:void 0!==r?r:null}}(t,e))}),e);return function(e,t,n){e&&e.addEventListener(t,n,FE)}(i,t,r),r}class YE extends PE{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,i=e.getAttribute("height"),r=e.getAttribute("width");if(e[jE]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",LE(r)){const t=bS(e,"width");void 0!==t&&(e.width=t)}if(LE(i))if(""===e.style.height)e.height=e.width/(t||2);else{const t=bS(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[jE])return!1;const n=t[jE].initial;["height","width"].forEach((e=>{const i=n[e];qx(i)?t.removeAttribute(e):t.setAttribute(e,i)}));const i=n.style||{};return Object.keys(i).forEach((e=>{t.style[e]=i[e]})),t.width=t.width,delete t[jE],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),r={attach:zE,detach:BE,resize:qE}[t]||GE;i[t]=r(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),i=n[t];if(!i)return;({attach:KE,detach:KE,resize:KE}[t]||UE)(e,t,i),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,i){return mS(e,t,n,i)}isAttached(e){const t=e&&cS(e);return!(!t||!t.isConnected)}}class QE{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return T_(this.x)&&T_(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const i={};return e.forEach((e=>{i[e]=n[e]&&n[e].active()?n[e]._to:this[e]})),i}}function XE(e,t){const n=e.options.ticks,i=function(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(i,r))}(e),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?function(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}(t):[],a=s.length,o=s[0],l=s[a-1],c=[];if(a>r)return function(e,t,n,i){let r,s=0,a=n[0];for(i=Math.ceil(i),r=0;r<e.length;r++)r===a&&(t.push(e[r]),s++,a=n[s*i])}(t,c,s,a/r),c;const u=function(e,t,n){const i=function(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}(e),r=t.length/n;if(!i)return Math.max(r,1);const s=function(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(0|n)&&t.push(n),t.sort(((e,t)=>e-t)).pop(),t}(i);for(let a=0,o=s.length-1;a<o;a++){const e=s[a];if(e>r)return e}return Math.max(r,1)}(s,t,r);if(a>0){let e,n;const i=a>1?Math.round((l-o)/(a-1)):null;for(JE(t,c,u,qx(i)?0:o-i,o),e=0,n=a-1;e<n;e++)JE(t,c,u,s[e],s[e+1]);return JE(t,c,u,l,qx(i)?t.length:l+i),c}return JE(t,c,u),c}function JE(e,t,n,i,r){const s=Xx(i,0),a=Math.min(Xx(r,e.length),e.length);let o,l,c,u=0;for(n=Math.ceil(n),r&&(o=r-i,n=o/Math.floor(o/n)),c=s;c<0;)u++,c=Math.round(s+u*n);for(l=Math.max(s,0);l<a;l++)l===c&&(t.push(e[l]),u++,c=Math.round(s+u*n))}const ZE=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,eT=(e,t)=>Math.min(t||e,e);function tT(e,t){const n=[],i=e.length/t,r=e.length;let s=0;for(;s<r;s+=i)n.push(e[Math.floor(s)]);return n}function nT(e,t,n){const i=e.ticks.length,r=Math.min(t,i-1),s=e._startPixel,a=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(r);if(!(n&&(l=1===i?Math.max(c-s,a-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(r-1))/2,c+=r<t?l:-l,c<s-o||c>a+o)))return c}function iT(e){return e.drawTicks?e.tickLength:0}function rT(e,t){if(!e.display)return 0;const n=Fk(e.font,t),i=Lk(e.padding);return(Kx(e.text)?e.text.length:1)*n.lineHeight+i.height}function sT(e,t,n){let i=q_(e);return(n&&"right"!==t||!n&&"right"===t)&&(i=(e=>"left"===e?"right":"right"===e?"left":e)(i)),i}class aT extends QE{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:i}=this;return e=Qx(e,Number.POSITIVE_INFINITY),t=Qx(t,Number.NEGATIVE_INFINITY),n=Qx(n,Number.POSITIVE_INFINITY),i=Qx(i,Number.NEGATIVE_INFINITY),{min:Qx(e,n),max:Qx(t,i),minDefined:Yx(e),maxDefined:Yx(t)}}getMinMax(e){let t,{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let o=0,l=a.length;o<l;++o)t=a[o].controller.getMinMax(this,e),r||(n=Math.min(n,t.min)),s||(i=Math.max(i,t.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:Qx(n,Qx(i,n)),max:Qx(i,Qx(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Zx(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:i,grace:r,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:i,max:r}=e,s=Jx(t,(r-i)/2),a=(e,t)=>n&&0===e?0:e+t;return{min:a(i,-Math.abs(s)),max:a(r,s)}}(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=a<this.ticks.length;this._convertTicksToLabels(o?tT(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=XE(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Zx(this.options.afterUpdate,[this])}beforeSetDimensions(){Zx(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Zx(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Zx(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Zx(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,i,r;for(n=0,i=e.length;n<i;n++)r=e[n],r.label=Zx(t.callback,[r.value,n,e],this)}afterTickToLabelConversion(){Zx(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Zx(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=eT(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,r=t.maxRotation;let s,a,o,l=i;if(!this._isVisible()||!t.display||i>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const c=this._getLabelSizes(),u=c.widest.width,h=c.highest.height,d=O_(this.chart.width-u,0,this.maxWidth);s=e.offset?this.maxWidth/n:d/(n-1),u+6>s&&(s=d/(n-(e.offset?.5:1)),a=this.maxHeight-iT(e.grid)-t.padding-rT(e.title,this.chart.options.font),o=Math.sqrt(u*u+h*h),l=I_(Math.min(Math.asin(O_((c.highest.height+6)/s,-1,1)),Math.asin(O_(a/o,-1,1))-Math.asin(O_(h/o,-1,1)))),l=Math.max(i,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){Zx(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Zx(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:i,grid:r}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){const s=rT(i,t.options.font);if(a?(e.width=this.maxWidth,e.height=iT(r)+s):(e.height=this.maxHeight,e.width=iT(r)+s),n.display&&this.ticks.length){const{first:t,last:i,widest:r,highest:s}=this._getLabelSizes(),o=2*n.padding,l=N_(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(a){const t=n.mirror?0:u*r.width+c*s.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=n.mirror?0:c*r.width+u*s.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,i,u,c)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,i){const{ticks:{align:r,padding:s},position:a}=this.options,o=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,h=0;o?l?(u=i*e.width,h=n*t.height):(u=n*e.height,h=i*t.width):"start"===r?h=t.width:"end"===r?u=e.width:"inner"!==r&&(u=e.width/2,h=t.width/2),this.paddingLeft=Math.max((u-a+s)*this.width/(this.width-a),0),this.paddingRight=Math.max((h-c+s)*this.width/(this.width-c),0)}else{let n=t.height/2,i=e.height/2;"start"===r?(n=0,i=e.height):"end"===r&&(n=t.height,i=0),this.paddingTop=n+s,this.paddingBottom=i+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Zx(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)qx(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=tT(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:i,_longestTextCache:r}=this,s=[],a=[],o=Math.floor(t/eT(t,n));let l,c,u,h,d,f,p,g,m,v,y,b=0,w=0;for(l=0;l<t;l+=o){if(h=e[l].label,d=this._resolveTickFontOptions(l),i.font=f=d.string,p=r[f]=r[f]||{data:{},gc:[]},g=d.lineHeight,m=v=0,qx(h)||Kx(h)){if(Kx(h))for(c=0,u=h.length;c<u;++c)y=h[c],qx(y)||Kx(y)||(m=gk(i,p.data,p.gc,m,y),v+=g)}else m=gk(i,p.data,p.gc,m,h),v=g;s.push(m),a.push(v),b=Math.max(m,b),w=Math.max(v,w)}!function(e,t){e_(e,(e=>{const n=e.gc,i=n.length/2;let r;if(i>t){for(r=0;r<i;++r)delete e.data[n[r]];n.splice(0,i)}}))}(r,t);const x=s.indexOf(b),_=a.indexOf(w),k=e=>({width:s[e]||0,height:a[e]||0});return{first:k(0),last:k(t-1),widest:k(x),highest:k(_),widths:s,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return O_(this._alignToPixels?vk(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return Vk(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=Vk(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=N_(this.labelRotation),n=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),r=this._getLabelSizes(),s=e.autoSkipPadding||0,a=r?r.widest.width+s:0,o=r?r.highest.height+s:0;return this.isHorizontal()?o*n>a*i?a/n:o/i:o*i<a*n?o/n:a/i}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,i=this.options,{grid:r,position:s,border:a}=i,o=r.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),u=iT(r),h=[],d=a.setContext(this.getContext()),f=d.display?d.width:0,p=f/2,g=function(e){return vk(n,e,f)};let m,v,y,b,w,x,_,k,S,E,T,C;if("top"===s)m=g(this.bottom),x=this.bottom-u,k=m-p,E=g(e.top)+p,C=e.bottom;else if("bottom"===s)m=g(this.top),E=e.top,C=g(e.bottom)-p,x=m+p,k=this.top+u;else if("left"===s)m=g(this.right),w=this.right-u,_=m-p,S=g(e.left)+p,T=e.right;else if("right"===s)m=g(this.left),S=e.left,T=g(e.right)-p,w=m+p,_=this.left+u;else if("x"===t){if("center"===s)m=g((e.top+e.bottom)/2+.5);else if(Gx(s)){const e=Object.keys(s)[0],t=s[e];m=g(this.chart.scales[e].getPixelForValue(t))}E=e.top,C=e.bottom,x=m+p,k=x+u}else if("y"===t){if("center"===s)m=g((e.left+e.right)/2);else if(Gx(s)){const e=Object.keys(s)[0],t=s[e];m=g(this.chart.scales[e].getPixelForValue(t))}w=m-p,_=w-u,S=e.left,T=e.right}const N=Xx(i.ticks.maxTicksLimit,c),I=Math.max(1,Math.ceil(c/N));for(v=0;v<c;v+=I){const e=this.getContext(v),t=r.setContext(e),i=a.setContext(e),s=t.lineWidth,c=t.color,u=i.dash||[],d=i.dashOffset,f=t.tickWidth,p=t.tickColor,g=t.tickBorderDash||[],m=t.tickBorderDashOffset;y=nT(this,v,o),void 0!==y&&(b=vk(n,y,s),l?w=_=S=T=b:x=k=E=C=b,h.push({tx1:w,ty1:x,tx2:_,ty2:k,x1:S,y1:E,x2:T,y2:C,width:s,color:c,borderDash:u,borderDashOffset:d,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,h}_computeLabelItems(e){const t=this.axis,n=this.options,{position:i,ticks:r}=n,s=this.isHorizontal(),a=this.ticks,{align:o,crossAlign:l,padding:c,mirror:u}=r,h=iT(n.grid),d=h+c,f=u?-c:d,p=-N_(this.labelRotation),g=[];let m,v,y,b,w,x,_,k,S,E,T,C,N="middle";if("top"===i)x=this.bottom-f,_=this._getXAxisLabelAlignment();else if("bottom"===i)x=this.top+f,_=this._getXAxisLabelAlignment();else if("left"===i){const e=this._getYAxisLabelAlignment(h);_=e.textAlign,w=e.x}else if("right"===i){const e=this._getYAxisLabelAlignment(h);_=e.textAlign,w=e.x}else if("x"===t){if("center"===i)x=(e.top+e.bottom)/2+d;else if(Gx(i)){const e=Object.keys(i)[0],t=i[e];x=this.chart.scales[e].getPixelForValue(t)+d}_=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===i)w=(e.left+e.right)/2-d;else if(Gx(i)){const e=Object.keys(i)[0],t=i[e];w=this.chart.scales[e].getPixelForValue(t)}_=this._getYAxisLabelAlignment(h).textAlign}"y"===t&&("start"===o?N="top":"end"===o&&(N="bottom"));const I=this._getLabelSizes();for(m=0,v=a.length;m<v;++m){y=a[m],b=y.label;const e=r.setContext(this.getContext(m));k=this.getPixelForTick(m)+r.labelOffset,S=this._resolveTickFontOptions(m),E=S.lineHeight,T=Kx(b)?b.length:1;const t=T/2,n=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let h,d=_;if(s?(w=k,"inner"===_&&(d=m===v-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),C="top"===i?"near"===l||0!==p?-T*E+E/2:"center"===l?-I.highest.height/2-t*E+E:-I.highest.height+E/2:"near"===l||0!==p?E/2:"center"===l?I.highest.height/2-t*E:I.highest.height-T*E,u&&(C*=-1),0===p||e.showLabelBackdrop||(w+=E/2*Math.sin(p))):(x=k,C=(1-T)*E/2),e.showLabelBackdrop){const t=Lk(e.backdropPadding),n=I.heights[m],i=I.widths[m];let r=C-t.top,s=0-t.left;switch(N){case"middle":r-=n/2;break;case"bottom":r-=n}switch(_){case"center":s-=i/2;break;case"right":s-=i;break;case"inner":m===v-1?s-=i:m>0&&(s-=i/2)}h={left:s,top:r,width:i+t.width,height:n+t.height,color:e.backdropColor}}g.push({label:b,font:S,textOffset:C,options:{rotation:p,color:n,strokeColor:o,strokeWidth:c,textAlign:d,textBaseline:N,translation:[w,x],backdrop:h}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-N_(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,s=e+r,a=this._getLabelSizes().widest.width;let o,l;return"left"===t?i?(l=this.right+r,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l+=a)):(l=this.right-s,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l=this.left)):"right"===t?i?(l=this.left+r,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l-=a)):(l=this.left+s,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:i,width:r,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,i,r,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex((t=>t.value===e));if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,s;const a=(e,t,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(r=0,s=i.length;r<s;++r){const e=i[r];t.drawOnChartArea&&a({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&a({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),s=n.display?r.width:0;if(!s)return;const a=i.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,u,h;this.isHorizontal()?(l=vk(e,this.left,s)-s/2,c=vk(e,this.right,a)+a/2,u=h=o):(u=vk(e,this.top,s)-s/2,h=vk(e,this.bottom,a)+a/2,l=c=o),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&_k(t,n);const i=this.getLabelItems(e);for(const r of i){const e=r.options,n=r.font;Nk(t,r.label,0,r.textOffset,n,e)}n&&kk(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:i}}=this;if(!n.display)return;const r=Fk(n.font),s=Lk(n.padding),a=n.align;let o=r.lineHeight/2;"bottom"===t||"center"===t||Gx(t)?(o+=s.bottom,Kx(n.text)&&(o+=r.lineHeight*(n.text.length-1))):o+=s.top;const{titleX:l,titleY:c,maxWidth:u,rotation:h}=function(e,t,n,i){const{top:r,left:s,bottom:a,right:o,chart:l}=e,{chartArea:c,scales:u}=l;let h,d,f,p=0;const g=a-r,m=o-s;if(e.isHorizontal()){if(d=K_(i,s,o),Gx(n)){const e=Object.keys(n)[0],i=n[e];f=u[e].getPixelForValue(i)+g-t}else f="center"===n?(c.bottom+c.top)/2+g-t:ZE(e,n,t);h=o-s}else{if(Gx(n)){const e=Object.keys(n)[0],i=n[e];d=u[e].getPixelForValue(i)-m+t}else d="center"===n?(c.left+c.right)/2-m+t:ZE(e,n,t);f=K_(i,a,r),p="left"===n?-b_:b_}return{titleX:d,titleY:f,maxWidth:h,rotation:p}}(this,o,t,a);Nk(e,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:h,textAlign:sT(a,t,i),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=Xx(e.grid&&e.grid.z,-1),i=Xx(e.border&&e.border.z,0);return this._isVisible()&&this.draw===aT.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,s;for(r=0,s=t.length;r<s;++r){const s=t[r];s[n]!==this.id||e&&s.type!==e||i.push(s)}return i}_resolveTickFontOptions(e){return Fk(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class oT{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const i=this.items,r=e.id,s=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in i||(i[r]=e,function(e,t,n){const i=s_(Object.create(null),[n?pk.get(n):{},pk.get(t),e.defaults]);pk.set(t,i),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((n=>{const i=n.split("."),r=i.pop(),s=[e].concat(i).join("."),a=t[n].split("."),o=a.pop(),l=a.join(".");pk.route(s,r,l,o)}))}(t,e.defaultRoutes);e.descriptors&&pk.describe(t,e.descriptors)}(e,s,n),this.override&&pk.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,i=this.scope;n in t&&delete t[n],i&&n in pk[i]&&(delete pk[i][n],this.override&&delete ck[n])}}class lT{constructor(){this.controllers=new oT(JS,"datasets",!0),this.elements=new oT(QE,"elements"),this.plugins=new oT(Object,"plugins"),this.scales=new oT(aT,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach((t=>{const i=n||this._getRegistryForType(t);n||i.isForType(t)||i===this.plugins&&t.id?this._exec(e,i,t):e_(t,(t=>{const i=n||this._getRegistryForType(t);this._exec(e,i,t)}))}))}_exec(e,t,n){const i=u_(e);Zx(n["before"+i],[],n),t[e](n),Zx(n["after"+i],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const i=t.get(e);if(void 0===i)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var cT=new lT;class uT{constructor(){this._init=[]}notify(e,t,n,i){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=i?this._descriptors(e).filter(i):this._descriptors(e),s=this._notify(r,e,t,n);return"afterDestroy"===t&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,n,i){i=i||{};for(const r of e){const e=r.plugin;if(!1===Zx(e[n],[t,i,r.options],e)&&i.cancelable)return!1}return!0}invalidate(){qx(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,i=Xx(n.options&&n.options.plugins,{}),r=function(e){const t={},n=[],i=Object.keys(cT.plugins.items);for(let s=0;s<i.length;s++)n.push(cT.getPlugin(i[s]));const r=e.plugins||[];for(let s=0;s<r.length;s++){const e=r[s];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==i||t?function(e,t,n,i){let{plugins:r,localIds:s}=t;const a=[],o=e.getContext();for(const l of r){const t=l.id,r=hT(n[t],i);null!==r&&a.push({plugin:l,options:dT(e.config,{plugin:l,local:s[t]},r,o)})}return a}(e,r,i,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,i=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(i(t,n),e,"stop"),this._notify(i(n,t),e,"start")}}function hT(e,t){return t||!1!==e?!0===e?{}:e:null}function dT(e,t,n,i){let{plugin:r,local:s}=t;const a=e.pluginScopeKeys(r),o=e.getOptionScopes(n,a);return s&&r.defaults&&o.push(r.defaults),e.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function fT(e,t){const n=pk.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function pT(e){if("x"===e||"y"===e||"r"===e)return e}function gT(e){if(pT(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const s of n){const t=s.axis||("top"===(r=s.position)||"bottom"===r?"x":"left"===r||"right"===r?"y":void 0)||e.length>1&&pT(e[0].toLowerCase());if(t)return t}var r;throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function mT(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function vT(e,t){const n=ck[e.type]||{scales:{}},i=t.scales||{},r=fT(e.type,t),s=Object.create(null);return Object.keys(i).forEach((t=>{const a=i[t];if(!Gx(a))return console.error(`Invalid scale configuration for scale: ${t}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const o=gT(t,a,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter((t=>t.xAxisID===e||t.yAxisID===e));if(n.length)return mT(e,"x",n[0])||mT(e,"y",n[0])}return{}}(t,e),pk.scales[a.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,r),c=n.scales||{};s[t]=a_(Object.create(null),[{axis:o},a,c[o],c[l]])})),e.data.datasets.forEach((n=>{const r=n.type||e.type,a=n.indexAxis||fT(r,t),o=(ck[r]||{}).scales||{};Object.keys(o).forEach((e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,a),r=n[t+"AxisID"]||t;s[r]=s[r]||Object.create(null),a_(s[r],[{axis:t},i[r],o[e]])}))})),Object.keys(s).forEach((e=>{const t=s[e];a_(t,[pk.scales[t.type],pk.scale])})),s}function yT(e){const t=e.options||(e.options={});t.plugins=Xx(t.plugins,{}),t.scales=vT(e,t)}function bT(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const wT=new Map,xT=new Set;function _T(e,t){let n=wT.get(e);return n||(n=t(),wT.set(e,n),xT.add(n)),n}const kT=(e,t,n)=>{const i=c_(t,n);void 0!==i&&e.add(i)};class ST{constructor(e){this._config=function(e){return(e=e||{}).data=bT(e.data),yT(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=bT(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),yT(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return _T(e,(()=>[[`datasets.${e}`,""]]))}datasetAnimationScopeKeys(e,t){return _T(`${e}.transition.${t}`,(()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]]))}datasetElementScopeKeys(e,t){return _T(`${e}-${t}`,(()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]]))}pluginScopeKeys(e){const t=e.id;return _T(`${this.type}-plugin-${t}`,(()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const n=this._scopeCache;let i=n.get(e);return i&&!t||(i=new Map,n.set(e,i)),i}getOptionScopes(e,t,n){const{options:i,type:r}=this,s=this._cachedScopes(e,n),a=s.get(t);if(a)return a;const o=new Set;t.forEach((t=>{e&&(o.add(e),t.forEach((t=>kT(o,e,t)))),t.forEach((e=>kT(o,i,e))),t.forEach((e=>kT(o,ck[r]||{},e))),t.forEach((e=>kT(o,pk,e))),t.forEach((e=>kT(o,uk,e)))}));const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),xT.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,ck[t]||{},pk.datasets[t]||{},{type:t},pk,uk]}resolveNamedOptions(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const r={$shared:!0},{resolver:s,subPrefixes:a}=ET(this._resolverCache,e,i);let o=s;if(function(e,t){const{isScriptable:n,isIndexable:i}=$k(e);for(const r of t){const t=n(r),s=i(r),a=(s||t)&&e[r];if(t&&(d_(a)||TT(a))||s&&Kx(a))return!0}return!1}(s,t)){r.$shared=!1;o=Bk(s,n=d_(n)?n():n,this.createResolver(e,n,a))}for(const l of t)r[l]=o[l];return r}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],i=arguments.length>3?arguments[3]:void 0;const{resolver:r}=ET(this._resolverCache,e,n);return Gx(t)?Bk(r,t,void 0,i):r}}function ET(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const r=n.join();let s=i.get(r);if(!s){s={resolver:zk(t,n),subPrefixes:n.filter((e=>!e.toLowerCase().includes("hover")))},i.set(r,s)}return s}const TT=e=>Gx(e)&&Object.getOwnPropertyNames(e).some((t=>d_(e[t])));const CT=["top","bottom","left","right","chartArea"];function NT(e,t){return"top"===e||"bottom"===e||-1===CT.indexOf(e)&&"x"===t}function IT(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function DT(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Zx(n&&n.onComplete,[e],t)}function AT(e){const t=e.chart,n=t.options.animation;Zx(n&&n.onProgress,[e],t)}function MT(e){return lS()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const PT={},RT=e=>{const t=MT(e);return Object.values(PT).filter((e=>e.canvas===t)).pop()};function jT(e,t,n){const i=Object.keys(e);for(const r of i){const i=+r;if(i>=t){const s=e[r];delete e[r],(n>0||i>t)&&(e[i+n]=s)}}}class OT{static defaults=(()=>pk)();static instances=(()=>PT)();static overrides=(()=>ck)();static registry=(()=>cT)();static version="4.4.9";static getChart=(()=>RT)();static register(){cT.add(...arguments),LT()}static unregister(){cT.remove(...arguments),LT()}constructor(e,t){const n=this.config=new ST(t),i=MT(e),r=RT(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!lS()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?RE:YE}(i)),this.platform.updateConfig(n);const a=this.platform.acquireContext(i,s.aspectRatio),o=a&&a.canvas,l=o&&o.height,c=o&&o.width;this.id=Hx(),this.ctx=a,this.canvas=o,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new uT,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}((e=>this.update(e)),s.resizeDelay||0),this._dataChanges=[],PT[this.id]=this,a&&o?(OS.listen(this,"complete",DT),OS.listen(this,"progress",AT),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:i,_aspectRatio:r}=this;return qx(e)?t&&r?r:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return cT}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():vS(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return yk(this.canvas,this.ctx),this}stop(){return OS.stop(this),this}resize(e,t){OS.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(i,e,t,r),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,vS(this,a,!0)&&(this.notifyPlugins("resize",{size:s}),Zx(n.onResize,[this,s],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){e_(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,i=Object.keys(n).reduce(((e,t)=>(e[t]=!1,e)),{});let r=[];t&&(r=r.concat(Object.keys(t).map((e=>{const n=t[e],i=gT(e,n),r="r"===i,s="x"===i;return{options:n,dposition:r?"chartArea":s?"bottom":"left",dtype:r?"radialLinear":s?"category":"linear"}})))),e_(r,(t=>{const r=t.options,s=r.id,a=gT(s,r),o=Xx(r.type,t.dtype);void 0!==r.position&&NT(r.position,a)===NT(t.dposition)||(r.position=t.dposition),i[s]=!0;let l=null;if(s in n&&n[s].type===o)l=n[s];else{l=new(cT.getScale(o))({id:s,type:o,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(r,e)})),e_(i,((e,t)=>{e||delete n[t]})),e_(n,(e=>{ME.configure(this,e,e.options),ME.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort(((e,t)=>e.index-t.index)),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(IT("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,n)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=t.length;n<i;n++){const i=t[n];let r=this.getDatasetMeta(n);const s=i.type||this.config.type;if(r.type&&r.type!==s&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=s,r.indexAxis=i.indexAxis||fT(s,this.options),r.order=i.order||0,r.index=n,r.label=""+i.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const t=cT.getController(s),{datasetElementType:i,dataElementType:a}=pk.datasets[s];Object.assign(t,{dataElementType:cT.getElement(a),datasetElementType:i&&cT.getElement(i)}),r.controller=new t(this,n),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){e_(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!i&&-1===r.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),i||e_(r,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(IT("z","_idx"));const{_active:a,_lastEvent:o}=this;o?this._eventHandler(o,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){e_(this.scales,(e=>{ME.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);f_(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of t){jT(e,i,"_removeElements"===n?-r:r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),i=n(0);for(let r=1;r<t;r++)if(!f_(i,n(r)))return;return Array.from(i).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;ME.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],e_(this.boxes,(e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,d_(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(OS.has(this)?this.attached&&!OS.running(this)&&OS.start(this):(this.draw(),DT({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let i,r;for(i=0,r=t.length;i<r;++i){const r=t[i];e&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},i=RS(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(i&&_k(t,i),e.controller.draw(),i&&kk(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return xk(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,i){const r=bE.modes[t];return"function"===typeof r?r(this,e,n,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let i=n.filter((e=>e&&e._dataset===t)).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=Vk(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const i=n?"show":"hide",r=this.getDatasetMeta(e),s=r.controller._resolveAnimations(void 0,i);h_(t)?(r.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(r,{visible:n}),this.update((t=>t.datasetIndex===e?i:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),OS.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),yk(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete PT[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};e_(this.options.events,(e=>n(e,i)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(n,i)=>{e[n]&&(t.removeEventListener(this,n,i),delete e[n])},r=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",r),n("detach",s)};s=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",a)},t.isAttached(this.canvas)?a():s()}unbindEvents(){e_(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},e_(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const i=n?"set":"remove";let r,s,a,o;for("dataset"===t&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,o=e.length;a<o;++a){s=e[a];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[i+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map((e=>{let{datasetIndex:t,index:n}=e;const i=this.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[n],index:n}}));!t_(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter((t=>t.plugin.id===e)).length}_updateHoverStyles(e,t,n){const i=this.options.hover,r=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),s=r(t,e),a=n?e:r(e,t);s.length&&this.updateHoverStyle(s,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const r=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:i=[],options:r}=this,s=t,a=this._getActiveElements(e,i,n,s),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,i){return n&&"mouseout"!==e.type?i?t:e:null}(e,this._lastEvent,n,o);n&&(this._lastEvent=null,Zx(r.onHover,[e,a,this],this),o&&Zx(r.onClick,[e,a,this],this));const c=!t_(a,i);return(c||t)&&(this._active=a,this._updateHoverStyles(a,i,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,i){if("mouseout"===e.type)return[];if(!n)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,i)}}function LT(){return e_(OT.instances,(e=>e._plugins.invalidate()))}function FT(e,t,n,i){const r=Rk(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(n-t)/2,a=Math.min(s,i*t/2),o=e=>{const t=(n-Math.min(s,e))*i/2;return O_(e,0,Math.min(s,t))};return{outerStart:o(r.outerStart),outerEnd:o(r.outerEnd),innerStart:O_(r.innerStart,0,a),innerEnd:O_(r.innerEnd,0,a)}}function UT(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function VT(e,t,n,i,r,s){const{x:a,y:o,startAngle:l,pixelMargin:c,innerRadius:u}=t,h=Math.max(t.outerRadius+i+n-c,0),d=u>0?u+i+n+c:0;let f=0;const p=r-l;if(i){const e=((u>0?u-i:0)+(h>0?h-i:0))/2;f=(p-(0!==e?p*e/(e+i):p))/2}const g=(p-Math.max(.001,p*h-n/p_)/h)/2,m=l+g+f,v=r-g-f,{outerStart:y,outerEnd:b,innerStart:w,innerEnd:x}=FT(t,d,h,v-m),_=h-y,k=h-b,S=m+y/_,E=v-b/k,T=d+w,C=d+x,N=m+w/T,I=v-x/C;if(e.beginPath(),s){const t=(S+E)/2;if(e.arc(a,o,h,S,t),e.arc(a,o,h,t,E),b>0){const t=UT(k,E,a,o);e.arc(t.x,t.y,b,E,v+b_)}const n=UT(C,v,a,o);if(e.lineTo(n.x,n.y),x>0){const t=UT(C,I,a,o);e.arc(t.x,t.y,x,v+b_,I+Math.PI)}const i=(v-x/d+(m+w/d))/2;if(e.arc(a,o,d,v-x/d,i,!0),e.arc(a,o,d,i,m+w/d,!0),w>0){const t=UT(T,N,a,o);e.arc(t.x,t.y,w,N+Math.PI,m-b_)}const r=UT(_,m,a,o);if(e.lineTo(r.x,r.y),y>0){const t=UT(_,S,a,o);e.arc(t.x,t.y,y,m-b_,S)}}else{e.moveTo(a,o);const t=Math.cos(S)*h+a,n=Math.sin(S)*h+o;e.lineTo(t,n);const i=Math.cos(E)*h+a,r=Math.sin(E)*h+o;e.lineTo(i,r)}e.closePath()}function zT(e,t,n,i,r){const{fullCircles:s,startAngle:a,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=l,f="inner"===l.borderAlign;if(!c)return;e.setLineDash(h||[]),e.lineDashOffset=d,f?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let p=t.endAngle;if(s){VT(e,t,n,i,p,r);for(let t=0;t<s;++t)e.stroke();isNaN(o)||(p=a+(o%g_||g_))}f&&function(e,t,n){const{startAngle:i,pixelMargin:r,x:s,y:a,outerRadius:o,innerRadius:l}=t;let c=r/o;e.beginPath(),e.arc(s,a,o,i-c,n+c),l>r?(c=r/l,e.arc(s,a,l,n+c,i-c,!0)):e.arc(s,a,r,n+b_,i-b_),e.closePath(),e.clip()}(e,t,p),s||(VT(e,t,n,i,p,r),e.stroke())}function BT(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=Xx(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Xx(n.borderDash,t.borderDash)),e.lineDashOffset=Xx(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Xx(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Xx(n.borderWidth,t.borderWidth),e.strokeStyle=Xx(n.borderColor,t.borderColor)}function $T(e,t,n){e.lineTo(n.x,n.y)}function WT(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.length,{start:r=0,end:s=i-1}=n,{start:a,end:o}=t,l=Math.max(r,a),c=Math.min(s,o),u=r<a&&s<a||r>o&&s>o;return{count:i,start:l,loop:t.loop,ilen:c<l&&!u?i+c-l:c-l}}function HT(e,t,n,i){const{points:r,options:s}=t,{count:a,start:o,loop:l,ilen:c}=WT(r,n,i),u=function(e){return e.stepped?Sk:e.tension||"monotone"===e.cubicInterpolationMode?Ek:$T}(s);let h,d,f,{move:p=!0,reverse:g}=i||{};for(h=0;h<=c;++h)d=r[(o+(g?c-h:h))%a],d.skip||(p?(e.moveTo(d.x,d.y),p=!1):u(e,f,d,g,s.stepped),f=d);return l&&(d=r[(o+(g?c:0))%a],u(e,f,d,g,s.stepped)),!!l}function qT(e,t,n,i){const r=t.points,{count:s,start:a,ilen:o}=WT(r,n,i),{move:l=!0,reverse:c}=i||{};let u,h,d,f,p,g,m=0,v=0;const y=e=>(a+(c?o-e:e))%s,b=()=>{f!==p&&(e.lineTo(m,p),e.lineTo(m,f),e.lineTo(m,g))};for(l&&(h=r[y(0)],e.moveTo(h.x,h.y)),u=0;u<=o;++u){if(h=r[y(u)],h.skip)continue;const t=h.x,n=h.y,i=0|t;i===d?(n<f?f=n:n>p&&(p=n),m=(v*m+t)/++v):(b(),e.lineTo(t,n),d=i,v=0,f=p=n),g=n}b()}function KT(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?qT:HT}const GT="function"===typeof Path2D;function YT(e,t,n,i){GT&&!t.options.segment?function(e,t,n,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,i)&&r.closePath()),BT(e,t.options),e.stroke(r)}(e,t,n,i):function(e,t,n,i){const{segments:r,options:s}=t,a=KT(t);for(const o of r)BT(e,s,o.style),e.beginPath(),a(e,t,o,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}(e,t,n,i)}class QT extends QE{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;oS(this._points,n,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,i=e.options.spanGaps,r=n.length;if(!r)return[];const s=!!e._loop,{start:a,end:o}=function(e,t,n,i){let r=0,s=t-1;if(n&&!i)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(s+=r);s>r&&e[s%t].skip;)s--;return s%=t,{start:r,end:s}}(n,r,s,i);return DS(e,!0===i?[{start:a,end:o,loop:s}]:function(e,t,n,i){const r=e.length,s=[];let a,o=t,l=e[t];for(a=t+1;a<=n;++a){const n=e[a%r];n.skip||n.stop?l.skip||(i=!1,s.push({start:t%r,end:(a-1)%r,loop:i}),t=o=n.stop?a:null):(o=a,l.skip&&(t=a)),l=n}return null!==o&&s.push({start:t%r,end:o%r,loop:i}),s}(n,a,o<a?o+r:o,!!e._fullLoop&&0===a&&o===r-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,i=e[t],r=this.points,s=IS(this,{property:t,start:i,end:i});if(!s.length)return;const a=[],o=function(e){return e.stepped?xS:e.tension||"monotone"===e.cubicInterpolationMode?_S:wS}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:u}=s[l],h=r[c],d=r[u];if(h===d){a.push(h);continue}const f=o(h,d,Math.abs((i-h[t])/(d[t]-h[t])),n.stepped);f[t]=e[t],a.push(f)}return 1===a.length?a[0]:a}pathSegment(e,t,n){return KT(this)(e,this,t,n)}path(e,t,n){const i=this.segments,r=KT(this);let s=this._loop;t=t||0,n=n||this.points.length-t;for(const a of i)s&=r(e,this,a,{start:t,end:t+n-1});return!!s}draw(e,t,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),YT(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function XT(e,t,n,i){const r=e.options,{[n]:s}=e.getProps([n],i);return Math.abs(t-s)<r.radius+r.hitRadius}function JT(e,t){const{x:n,y:i,base:r,width:s,height:a}=e.getProps(["x","y","base","width","height"],t);let o,l,c,u,h;return e.horizontal?(h=a/2,o=Math.min(n,r),l=Math.max(n,r),c=i-h,u=i+h):(h=s/2,o=n-h,l=n+h,c=Math.min(i,r),u=Math.max(i,r)),{left:o,top:c,right:l,bottom:u}}function ZT(e,t,n,i){return e?0:O_(t,n,i)}function eC(e){const t=JT(e),n=t.right-t.left,i=t.bottom-t.top,r=function(e,t,n){const i=e.options.borderWidth,r=e.borderSkipped,s=jk(i);return{t:ZT(r.top,s.top,0,n),r:ZT(r.right,s.right,0,t),b:ZT(r.bottom,s.bottom,0,n),l:ZT(r.left,s.left,0,t)}}(e,n/2,i/2),s=function(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,s=Ok(r),a=Math.min(t,n),o=e.borderSkipped,l=i||Gx(r);return{topLeft:ZT(!l||o.top||o.left,s.topLeft,0,a),topRight:ZT(!l||o.top||o.right,s.topRight,0,a),bottomLeft:ZT(!l||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:ZT(!l||o.bottom||o.right,s.bottomRight,0,a)}}(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function tC(e,t,n,i){const r=null===t,s=null===n,a=e&&!(r&&s)&&JT(e,i);return a&&(r||L_(t,a.left,a.right))&&(s||L_(n,a.top,a.bottom))}function nC(e,t){e.rect(t.x,t.y,t.w,t.h)}function iC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-i,a=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+i,y:e.y+r,w:e.w+s,h:e.h+a,radius:e.radius}}var rC=Object.freeze({__proto__:null,ArcElement:class extends QE{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.getProps(["x","y"],n),{angle:r,distance:s}=A_(i,{x:e,y:t}),{startAngle:a,endAngle:o,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,d=Xx(u,o-a),f=j_(r,a,o)&&a!==o,p=d>=g_||f,g=L_(s,l+h,c+h);return p&&g}getCenterPoint(e){const{x:t,y:n,startAngle:i,endAngle:r,innerRadius:s,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(i+r)/2,u=(s+a+l+o)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,i=(t.offset||0)/4,r=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>g_?Math.floor(n/g_):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*i,Math.sin(a)*i);const o=i*(1-Math.sin(Math.min(p_,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,i,r){const{fullCircles:s,startAngle:a,circumference:o}=t;let l=t.endAngle;if(s){VT(e,t,n,i,l,r);for(let t=0;t<s;++t)e.fill();isNaN(o)||(l=a+(o%g_||g_))}VT(e,t,n,i,l,r),e.fill()}(e,this,o,r,s),zT(e,this,o,r,s),e.restore()}},BarElement:class extends QE{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:s}=eC(this),a=(o=s.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?Ik:nC;var o;e.save(),s.w===r.w&&s.h===r.h||(e.beginPath(),a(e,iC(s,t,r)),e.clip(),a(e,iC(r,-t,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,iC(r,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,n){return tC(this,e,t,n)}inXRange(e,t){return tC(this,e,null,t)}inYRange(e,t){return tC(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+i)/2:t,y:r?n:(n+i)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}},LineElement:QT,PointElement:class extends QE{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.options,{x:r,y:s}=this.getProps(["x","y"],n);return Math.pow(e-r,2)+Math.pow(t-s,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,t){return XT(this,e,"x",t)}inYRange(e,t){return XT(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!xk(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,bk(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}});const sC=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],aC=sC.map((e=>e.replace("rgb(","rgba(").replace(")",", 0.5)")));function oC(e){return sC[e%sC.length]}function lC(e){return aC[e%aC.length]}function cC(e){let t=0;return(n,i)=>{const r=e.getDatasetMeta(i).controller;r instanceof oE?t=function(e,t){return e.backgroundColor=e.data.map((()=>oC(t++))),t}(n,t):r instanceof lE?t=function(e,t){return e.backgroundColor=e.data.map((()=>lC(t++))),t}(n,t):r&&(t=function(e,t){return e.borderColor=oC(t),e.backgroundColor=lC(t),++t}(n,t))}}function uC(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}var hC={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,n){if(!n.enabled)return;const{data:{datasets:i},options:r}=e.config,{elements:s}=r,a=uC(i)||(o=r)&&(o.borderColor||o.backgroundColor)||s&&uC(s)||"rgba(0,0,0,0.1)"!==pk.borderColor||"rgba(0,0,0,0.1)"!==pk.backgroundColor;var o;if(!n.forceOverride&&a)return;const l=cC(e);i.forEach(l)}};function dC(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function fC(e){e.data.datasets.forEach((e=>{dC(e)}))}var pC={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled)return void fC(e);const i=e.width;e.data.datasets.forEach(((t,r)=>{const{_data:s,indexAxis:a}=t,o=e.getDatasetMeta(r),l=s||t.data;if("y"===Uk([a,e.options.indexAxis]))return;if(!o.controller.supportsDecimation)return;const c=e.scales[o.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(e.options.parsing)return;let{start:u,count:h}=function(e,t){const n=t.length;let i,r=0;const{iScale:s}=e,{min:a,max:o,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=O_(U_(t,s.axis,a).lo,0,n-1)),i=c?O_(U_(t,s.axis,o).hi+1,r,n)-r:n-r,{start:r,count:i}}(o,l);if(h<=(n.threshold||4*i))return void dC(t);let d;switch(qx(s)&&(t._data=l,delete t.data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(e){this._data=e}})),n.algorithm){case"lttb":d=function(e,t,n,i,r){const s=r.samples||i;if(s>=n)return e.slice(t,t+n);const a=[],o=(n-2)/(s-2);let l=0;const c=t+n-1;let u,h,d,f,p,g=t;for(a[l++]=e[g],u=0;u<s-2;u++){let i,r=0,s=0;const c=Math.floor((u+1)*o)+1+t,m=Math.min(Math.floor((u+2)*o)+1,n)+t,v=m-c;for(i=c;i<m;i++)r+=e[i].x,s+=e[i].y;r/=v,s/=v;const y=Math.floor(u*o)+1+t,b=Math.min(Math.floor((u+1)*o)+1,n)+t,{x:w,y:x}=e[g];for(d=f=-1,i=y;i<b;i++)f=.5*Math.abs((w-r)*(e[i].y-x)-(w-e[i].x)*(s-x)),f>d&&(d=f,h=e[i],p=i);a[l++]=h,g=p}return a[l++]=e[c],a}(l,u,h,i,n);break;case"min-max":d=function(e,t,n,i){let r,s,a,o,l,c,u,h,d,f,p=0,g=0;const m=[],v=t+n-1,y=e[t].x,b=e[v].x-y;for(r=t;r<t+n;++r){s=e[r],a=(s.x-y)/b*i,o=s.y;const t=0|a;if(t===l)o<d?(d=o,c=r):o>f&&(f=o,u=r),p=(g*p+s.x)/++g;else{const n=r-1;if(!qx(c)&&!qx(u)){const t=Math.min(c,u),i=Math.max(c,u);t!==h&&t!==n&&m.push({...e[t],x:p}),i!==h&&i!==n&&m.push({...e[i],x:p})}r>0&&n!==h&&m.push(e[n]),m.push(s),l=t,g=0,d=f=o,c=u=h=r}}return m}(l,u,h,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}t._decimated=d}))},destroy(e){fC(e)}};function gC(e,t,n,i){if(i)return;let r=t[e],s=n[e];return"angle"===e&&(r=R_(r),s=R_(s)),{property:e,start:r,end:s}}function mC(e,t,n){for(;t>e;t--){const e=n[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function vC(e,t,n,i){return e&&t?i(e[n],t[n]):e?e[n]:t?t[n]:0}function yC(e,t){let n=[],i=!1;return Kx(e)?(i=!0,n=e):n=function(e,t){const{x:n=null,y:i=null}=e||{},r=t.points,s=[];return t.segments.forEach((e=>{let{start:t,end:a}=e;a=mC(t,a,r);const o=r[t],l=r[a];null!==i?(s.push({x:o.x,y:i}),s.push({x:l.x,y:i})):null!==n&&(s.push({x:n,y:o.y}),s.push({x:n,y:l.y}))})),s}(e,t),n.length?new QT({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function bC(e){return e&&!1!==e.fill}function wC(e,t,n){let i=e[t].fill;const r=[t];let s;if(!n)return i;for(;!1!==i&&-1===r.indexOf(i);){if(!Yx(i))return i;if(s=e[i],!s)return!1;if(s.visible)return i;r.push(i),i=s.fill}return!1}function xC(e,t,n){const i=function(e){const t=e.options,n=t.fill;let i=Xx(n&&n.target,n);void 0===i&&(i=!!t.backgroundColor);if(!1===i||null===i)return!1;if(!0===i)return"origin";return i}(e);if(Gx(i))return!isNaN(i.value)&&i;let r=parseFloat(i);return Yx(r)&&Math.floor(r)===r?function(e,t,n,i){"-"!==e&&"+"!==e||(n=t+n);if(n===t||n<0||n>=i)return!1;return n}(i[0],t,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function _C(e,t,n){const i=[];for(let r=0;r<n.length;r++){const s=n[r],{first:a,last:o,point:l}=kC(s,t,"x");if(!(!l||a&&o))if(a)i.unshift(l);else if(e.push(l),!o)break}e.push(...i)}function kC(e,t,n){const i=e.interpolate(t,n);if(!i)return{};const r=i[n],s=e.segments,a=e.points;let o=!1,l=!1;for(let c=0;c<s.length;c++){const e=s[c],t=a[e.start][n],i=a[e.end][n];if(L_(r,t,i)){o=r===t,l=r===i;break}}return{first:o,last:l,point:i}}class SC{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){const{x:i,y:r,radius:s}=this;return t=t||{start:0,end:g_},e.arc(i,r,s,t.end,t.start,!0),!n.bounds}interpolate(e){const{x:t,y:n,radius:i}=this,r=e.angle;return{x:t+Math.cos(r)*i,y:n+Math.sin(r)*i,angle:r}}}function EC(e){const{chart:t,fill:n,line:i}=e;if(Yx(n))return function(e,t){const n=e.getDatasetMeta(t),i=n&&e.isDatasetVisible(t);return i?n.dataset:null}(t,n);if("stack"===n)return function(e){const{scale:t,index:n,line:i}=e,r=[],s=i.segments,a=i.points,o=function(e,t){const n=[],i=e.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const e=i[r];if(e.index===t)break;e.hidden||n.unshift(e.dataset)}return n}(t,n);o.push(yC({x:null,y:t.bottom},i));for(let l=0;l<s.length;l++){const e=s[l];for(let t=e.start;t<=e.end;t++)_C(r,a[t],o)}return new QT({points:r,options:{}})}(e);if("shape"===n)return!0;const r=function(e){const t=e.scale||{};if(t.getPointPositionForValue)return function(e){const{scale:t,fill:n}=e,i=t.options,r=t.getLabels().length,s=i.reverse?t.max:t.min,a=function(e,t,n){let i;return i="start"===e?n:"end"===e?t.options.reverse?t.min:t.max:Gx(e)?e.value:t.getBaseValue(),i}(n,t,s),o=[];if(i.grid.circular){const e=t.getPointPositionForValue(0,s);return new SC({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(a)})}for(let l=0;l<r;++l)o.push(t.getPointPositionForValue(l,a));return o}(e);return function(e){const{scale:t={},fill:n}=e,i=function(e,t){let n=null;return"start"===e?n=t.bottom:"end"===e?n=t.top:Gx(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}(n,t);if(Yx(i)){const e=t.isHorizontal();return{x:e?i:null,y:e?null:i}}return null}(e)}(e);return r instanceof SC?r:yC(r,i)}function TC(e,t,n){const i=EC(t),{chart:r,index:s,line:a,scale:o,axis:l}=t,c=a.options,u=c.fill,h=c.backgroundColor,{above:d=h,below:f=h}=u||{},p=r.getDatasetMeta(s),g=RS(r,p);i&&a.points.length&&(_k(e,n),function(e,t){const{line:n,target:i,above:r,below:s,area:a,scale:o,clip:l}=t,c=n._loop?"angle":t.axis;e.save(),"x"===c&&s!==r&&(CC(e,i,a.top),NC(e,{line:n,target:i,color:r,scale:o,property:c,clip:l}),e.restore(),e.save(),CC(e,i,a.bottom));NC(e,{line:n,target:i,color:s,scale:o,property:c,clip:l}),e.restore()}(e,{line:a,target:i,above:d,below:f,area:n,scale:o,axis:l,clip:g}),kk(e))}function CC(e,t,n){const{segments:i,points:r}=t;let s=!0,a=!1;e.beginPath();for(const o of i){const{start:i,end:l}=o,c=r[i],u=r[mC(i,l,r)];s?(e.moveTo(c.x,c.y),s=!1):(e.lineTo(c.x,n),e.lineTo(c.x,c.y)),a=!!t.pathSegment(e,o,{move:a}),a?e.closePath():e.lineTo(u.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function NC(e,t){const{line:n,target:i,property:r,color:s,scale:a,clip:o}=t,l=function(e,t,n){const i=e.segments,r=e.points,s=t.points,a=[];for(const o of i){let{start:e,end:i}=o;i=mC(e,i,r);const l=gC(n,r[e],r[i],o.loop);if(!t.segments){a.push({source:o,target:l,start:r[e],end:r[i]});continue}const c=IS(t,l);for(const t of c){const e=gC(n,s[t.start],s[t.end],t.loop),i=NS(o,r,e);for(const r of i)a.push({source:r,target:t,start:{[n]:vC(l,e,"start",Math.max)},end:{[n]:vC(l,e,"end",Math.min)}})}}return a}(n,i,r);for(const{source:c,target:u,start:h,end:d}of l){const{style:{backgroundColor:t=s}={}}=c,l=!0!==i;e.save(),e.fillStyle=t,IC(e,a,o,l&&gC(r,h,d)),e.beginPath();const f=!!n.pathSegment(e,c);let p;if(l){f?e.closePath():DC(e,i,d,r);const t=!!i.pathSegment(e,u,{move:f,reverse:!0});p=f&&t,p||DC(e,i,h,r)}e.closePath(),e.fill(p?"evenodd":"nonzero"),e.restore()}}function IC(e,t,n,i){const r=t.chart.chartArea,{property:s,start:a,end:o}=i||{};if("x"===s||"y"===s){let t,i,l,c;"x"===s?(t=a,i=r.top,l=o,c=r.bottom):(t=r.left,i=a,l=r.right,c=o),e.beginPath(),n&&(t=Math.max(t,n.left),l=Math.min(l,n.right),i=Math.max(i,n.top),c=Math.min(c,n.bottom)),e.rect(t,i,l-t,c-i),e.clip()}}function DC(e,t,n,i){const r=t.interpolate(n,i);r&&e.lineTo(r.x,r.y)}var AC={id:"filler",afterDatasetsUpdate(e,t,n){const i=(e.data.datasets||[]).length,r=[];let s,a,o,l;for(a=0;a<i;++a)s=e.getDatasetMeta(a),o=s.dataset,l=null,o&&o.options&&o instanceof QT&&(l={visible:e.isDatasetVisible(a),index:a,fill:xC(o,a,i),chart:e,axis:s.controller.options.indexAxis,scale:s.vScale,line:o}),s.$filler=l,r.push(l);for(a=0;a<i;++a)l=r[a],l&&!1!==l.fill&&(l.fill=wC(r,a,n.propagate))},beforeDraw(e,t,n){const i="beforeDraw"===n.drawTime,r=e.getSortedVisibleDatasetMetas(),s=e.chartArea;for(let a=r.length-1;a>=0;--a){const t=r[a].$filler;t&&(t.line.updateControlPoints(s,t.axis),i&&t.fill&&TC(e.ctx,t,s))}},beforeDatasetsDraw(e,t,n){if("beforeDatasetsDraw"!==n.drawTime)return;const i=e.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const t=i[r].$filler;bC(t)&&TC(e.ctx,t,e.chartArea)}},beforeDatasetDraw(e,t,n){const i=t.meta.$filler;bC(i)&&"beforeDatasetDraw"===n.drawTime&&TC(e.ctx,i,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const MC=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}};class PC extends QE{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Zx(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,n)=>e.sort(t,n,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,i=Fk(n.font),r=i.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:o}=MC(n,r);let l,c;t.font=i.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,r,a,o)+10):(c=this.maxHeight,l=this._fitCols(s,i,a,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,i){const{ctx:r,maxWidth:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+a;let u=e;r.textAlign="left",r.textBaseline="middle";let h=-1,d=-c;return this.legendItems.forEach(((e,f)=>{const p=n+t/2+r.measureText(e.text).width;(0===f||l[l.length-1]+p+2*a>s)&&(u+=c,l[l.length-(f>0?0:1)]=0,d+=c,h++),o[f]={left:0,top:d,row:h,width:p,height:i},l[l.length-1]+=p+a})),u}_fitCols(e,t,n,i){const{ctx:r,maxHeight:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-e;let u=a,h=0,d=0,f=0,p=0;return this.legendItems.forEach(((e,s)=>{const{itemWidth:g,itemHeight:m}=function(e,t,n,i,r){const s=function(e,t,n,i){let r=e.text;r&&"string"!==typeof r&&(r=r.reduce(((e,t)=>e.length>t.length?e:t)));return t+n.size/2+i.measureText(r).width}(i,e,t,n),a=function(e,t,n){let i=e;"string"!==typeof t.text&&(i=RC(t,n));return i}(r,i,t.lineHeight);return{itemWidth:s,itemHeight:a}}(n,t,r,e,i);s>0&&d+m+2*a>c&&(u+=h+a,l.push({width:h,height:d}),f+=h+a,p++,h=d=0),o[s]={left:f,top:d,col:p,width:g,height:m},h=Math.max(h,g),d+=m+a})),u+=h,l.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:i},rtl:r}}=this,s=kS(r,this.left,this.width);if(this.isHorizontal()){let r=0,a=K_(n,this.left+i,this.right-this.lineWidths[r]);for(const o of t)r!==o.row&&(r=o.row,a=K_(n,this.left+i,this.right-this.lineWidths[r])),o.top+=this.top+e+i,o.left=s.leftForLtr(s.x(a),o.width),a+=o.width+i}else{let r=0,a=K_(n,this.top+e+i,this.bottom-this.columnSizes[r].height);for(const o of t)o.col!==r&&(r=o.col,a=K_(n,this.top+e+i,this.bottom-this.columnSizes[r].height)),o.top=a,o.left+=this.left+i,o.left=s.leftForLtr(s.x(o.left),o.width),a+=o.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;_k(e,this),this._draw(),kk(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:i}=this,{align:r,labels:s}=e,a=pk.color,o=kS(e.rtl,this.left,this.width),l=Fk(s.font),{padding:c}=s,u=l.size,h=u/2;let d;this.drawTitle(),i.textAlign=o.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:g}=MC(s,u),m=this.isHorizontal(),v=this._computeTitleHeight();d=m?{x:K_(r,this.left+c,this.right-n[0]),y:this.top+c+v,line:0}:{x:this.left+c,y:K_(r,this.top+v+c,this.bottom-t[0].height),line:0},SS(this.ctx,e.textDirection);const y=g+c;this.legendItems.forEach(((b,w)=>{i.strokeStyle=b.fontColor,i.fillStyle=b.fontColor;const x=i.measureText(b.text).width,_=o.textAlign(b.textAlign||(b.textAlign=s.textAlign)),k=f+h+x;let S=d.x,E=d.y;o.setWidth(this.width),m?w>0&&S+k+c>this.right&&(E=d.y+=y,d.line++,S=d.x=K_(r,this.left+c,this.right-n[d.line])):w>0&&E+y>this.bottom&&(S=d.x=S+t[d.line].width+c,d.line++,E=d.y=K_(r,this.top+v+c,this.bottom-t[d.line].height));if(function(e,t,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;i.save();const r=Xx(n.lineWidth,1);if(i.fillStyle=Xx(n.fillStyle,a),i.lineCap=Xx(n.lineCap,"butt"),i.lineDashOffset=Xx(n.lineDashOffset,0),i.lineJoin=Xx(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=Xx(n.strokeStyle,a),i.setLineDash(Xx(n.lineDash,[])),s.usePointStyle){const a={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},l=o.xPlus(e,f/2);wk(i,a,l,t+h,s.pointStyleWidth&&f)}else{const s=t+Math.max((u-p)/2,0),a=o.leftForLtr(e,f),l=Ok(n.borderRadius);i.beginPath(),Object.values(l).some((e=>0!==e))?Ik(i,{x:a,y:s,w:f,h:p,radius:l}):i.rect(a,s,f,p),i.fill(),0!==r&&i.stroke()}i.restore()}(o.x(S),E,b),S=((e,t,n,i)=>e===(i?"left":"right")?n:"center"===e?(t+n)/2:t)(_,S+f+h,m?S+k:this.right,e.rtl),function(e,t,n){Nk(i,n.text,e,t+g/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(S),E,b),m)d.x+=k+c;else if("string"!==typeof b.text){const e=l.lineHeight;d.y+=RC(b,e)+c}else d.y+=y})),ES(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=Fk(t.font),i=Lk(t.padding);if(!t.display)return;const r=kS(e.rtl,this.left,this.width),s=this.ctx,a=t.position,o=n.size/2,l=i.top+o;let c,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),c=this.top+l,u=K_(e.align,u,this.right-h);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);c=l+K_(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const d=K_(a,u,u+h);s.textAlign=r.textAlign(q_(a)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,Nk(s,t.text,d,c,n)}_computeTitleHeight(){const e=this.options.title,t=Fk(e.font),n=Lk(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,i,r;if(L_(e,this.left,this.right)&&L_(t,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],L_(e,i.left,i.left+i.width)&&L_(t,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const i=this._hoveredItem,r=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(i,n);i&&!r&&Zx(t.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!r&&Zx(t.onHover,[e,n,this],this)}else n&&Zx(t.onClick,[e,n,this],this)}}function RC(e,t){return t*(e.text?e.text.length:0)}var jC={id:"legend",_element:PC,start(e,t,n){const i=e.legend=new PC({ctx:e.ctx,options:n,chart:e});ME.configure(e,i,n),ME.addBox(e,i)},stop(e){ME.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;ME.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:a,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const l=e.controller.getStyle(n?0:void 0),c=Lk(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:a&&(o||l.borderRadius),datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class OC extends QE{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const i=Kx(n.text)?n.text.length:1;this._padding=Lk(n.padding);const r=i*Fk(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:i,right:r,options:s}=this,a=s.align;let o,l,c,u=0;return this.isHorizontal()?(l=K_(a,n,r),c=t+e,o=r-n):("left"===s.position?(l=n+e,c=K_(a,i,t),u=-.5*p_):(l=r-e,c=K_(a,t,i),u=.5*p_),o=i-t),{titleX:l,titleY:c,maxWidth:o,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=Fk(t.font),i=n.lineHeight/2+this._padding.top,{titleX:r,titleY:s,maxWidth:a,rotation:o}=this._drawArgs(i);Nk(e,t.text,0,0,n,{color:t.color,maxWidth:a,rotation:o,textAlign:q_(t.align),textBaseline:"middle",translation:[r,s]})}}var LC={id:"title",_element:OC,start(e,t,n){!function(e,t){const n=new OC({ctx:e.ctx,options:t,chart:e});ME.configure(e,n,t),ME.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;ME.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const i=e.titleBlock;ME.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const FC=new WeakMap;var UC={id:"subtitle",start(e,t,n){const i=new OC({ctx:e.ctx,options:n,chart:e});ME.configure(e,i,n),ME.addBox(e,i),FC.set(e,i)},stop(e){ME.removeBox(e,FC.get(e)),FC.delete(e)},beforeUpdate(e,t,n){const i=FC.get(e);ME.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const VC={average(e){if(!e.length)return!1;let t,n,i=new Set,r=0,s=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();i.add(e.x),r+=e.y,++s}}if(0===s||0===i.size)return!1;const a=[...i].reduce(((e,t)=>e+t))/i.size;return{x:a,y:r/s}},nearest(e,t){if(!e.length)return!1;let n,i,r,s=t.x,a=t.y,o=Number.POSITIVE_INFINITY;for(n=0,i=e.length;n<i;++n){const i=e[n].element;if(i&&i.hasValue()){const e=M_(t,i.getCenterPoint());e<o&&(o=e,r=i)}}if(r){const e=r.tooltipPosition();s=e.x,a=e.y}return{x:s,y:a}}};function zC(e,t){return t&&(Kx(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function BC(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function $C(e,t){const{element:n,datasetIndex:i,index:r}=t,s=e.getDatasetMeta(i).controller,{label:a,value:o}=s.getLabelAndValue(r);return{chart:e,label:a,parsed:s.getParsed(r),raw:e.data.datasets[i].data[r],formattedValue:o,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function WC(e,t){const n=e.chart.ctx,{body:i,footer:r,title:s}=e,{boxWidth:a,boxHeight:o}=t,l=Fk(t.bodyFont),c=Fk(t.titleFont),u=Fk(t.footerFont),h=s.length,d=r.length,f=i.length,p=Lk(t.padding);let g=p.height,m=0,v=i.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(v+=e.beforeBody.length+e.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),v){g+=f*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(v-f)*l.lineHeight+(v-1)*t.bodySpacing}d&&(g+=t.footerMarginTop+d*u.lineHeight+(d-1)*t.footerSpacing);let y=0;const b=function(e){m=Math.max(m,n.measureText(e).width+y)};return n.save(),n.font=c.string,e_(e.title,b),n.font=l.string,e_(e.beforeBody.concat(e.afterBody),b),y=t.displayColors?a+2+t.boxPadding:0,e_(i,(e=>{e_(e.before,b),e_(e.lines,b),e_(e.after,b)})),y=0,n.font=u.string,e_(e.footer,b),n.restore(),m+=p.width,{width:m,height:g}}function HC(e,t,n,i){const{x:r,width:s}=n,{width:a,chartArea:{left:o,right:l}}=e;let c="center";return"center"===i?c=r<=(o+l)/2?"left":"right":r<=s/2?c="left":r>=a-s/2&&(c="right"),function(e,t,n,i){const{x:r,width:s}=i,a=n.caretSize+n.caretPadding;return"left"===e&&r+s+a>t.width||"right"===e&&r-s-a<0||void 0}(c,e,t,n)&&(c="center"),c}function qC(e,t,n){const i=n.yAlign||t.yAlign||function(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||HC(e,t,n,i),yAlign:i}}function KC(e,t,n,i){const{caretSize:r,caretPadding:s,cornerRadius:a}=e,{xAlign:o,yAlign:l}=n,c=r+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Ok(a);let p=function(e,t){let{x:n,width:i}=e;return"right"===t?n-=i:"center"===t&&(n-=i/2),n}(t,o);const g=function(e,t,n){let{y:i,height:r}=e;return"top"===t?i+=n:i-="bottom"===t?r+n:r/2,i}(t,l,c);return"center"===l?"left"===o?p+=c:"right"===o&&(p-=c):"left"===o?p-=Math.max(u,d)+r:"right"===o&&(p+=Math.max(h,f)+r),{x:O_(p,0,i.width-t.width),y:O_(g,0,i.height-t.height)}}function GC(e,t,n){const i=Lk(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-i.right:e.x+i.left}function YC(e){return zC([],BC(e))}function QC(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const XC={beforeTitle:Wx,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:Wx,beforeBody:Wx,beforeLabel:Wx,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return qx(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Wx,afterBody:Wx,beforeFooter:Wx,footer:Wx,afterFooter:Wx};function JC(e,t,n,i){const r=e[t].call(n,i);return"undefined"===typeof r?XC[t].call(n,i):r}class ZC extends QE{static positioners=(()=>VC)();constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&t.options.animation&&n.animations,r=new VS(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,Vk(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,i=JC(n,"beforeTitle",this,e),r=JC(n,"title",this,e),s=JC(n,"afterTitle",this,e);let a=[];return a=zC(a,BC(i)),a=zC(a,BC(r)),a=zC(a,BC(s)),a}getBeforeBody(e,t){return YC(JC(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,i=[];return e_(e,(e=>{const t={before:[],lines:[],after:[]},r=QC(n,e);zC(t.before,BC(JC(r,"beforeLabel",this,e))),zC(t.lines,JC(r,"label",this,e)),zC(t.after,BC(JC(r,"afterLabel",this,e))),i.push(t)})),i}getAfterBody(e,t){return YC(JC(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,i=JC(n,"beforeFooter",this,e),r=JC(n,"footer",this,e),s=JC(n,"afterFooter",this,e);let a=[];return a=zC(a,BC(i)),a=zC(a,BC(r)),a=zC(a,BC(s)),a}_createItems(e){const t=this._active,n=this.chart.data,i=[],r=[],s=[];let a,o,l=[];for(a=0,o=t.length;a<o;++a)l.push($C(this.chart,t[a]));return e.filter&&(l=l.filter(((t,i,r)=>e.filter(t,i,r,n)))),e.itemSort&&(l=l.sort(((t,i)=>e.itemSort(t,i,n)))),e_(l,(t=>{const n=QC(e.callbacks,t);i.push(JC(n,"labelColor",this,t)),r.push(JC(n,"labelPointStyle",this,t)),s.push(JC(n,"labelTextColor",this,t))})),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),i=this._active;let r,s=[];if(i.length){const e=VC[n.position].call(this,i,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const t=this._size=WC(this,n),a=Object.assign({},e,t),o=qC(this.chart,n,a),l=KC(n,a,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,r={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=s,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,i){const r=this.getCaretPosition(e,n,i);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,n){const{xAlign:i,yAlign:r}=this,{caretSize:s,cornerRadius:a}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:u}=Ok(a),{x:h,y:d}=e,{width:f,height:p}=t;let g,m,v,y,b,w;return"center"===r?(b=d+p/2,"left"===i?(g=h,m=g-s,y=b+s,w=b-s):(g=h+f,m=g+s,y=b-s,w=b+s),v=g):(m="left"===i?h+Math.max(o,c)+s:"right"===i?h+f-Math.max(l,u)-s:this.caretX,"top"===r?(y=d,b=y-s,g=m-s,v=m+s):(y=d+p,b=y+s,g=m+s,v=m-s),w=y),{x1:g,x2:m,x3:v,y1:y,y2:b,y3:w}}drawTitle(e,t,n){const i=this.title,r=i.length;let s,a,o;if(r){const l=kS(n.rtl,this.x,this.width);for(e.x=GC(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",s=Fk(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=s.string,o=0;o<r;++o)t.fillText(i[o],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+a,o+1===r&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,t,n,i,r){const s=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:o,boxWidth:l}=r,c=Fk(r.bodyFont),u=GC(this,"left",r),h=i.x(u),d=o<c.lineHeight?(c.lineHeight-o)/2:0,f=t.y+d;if(r.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=i.leftForLtr(h,l)+l/2,c=f+o/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,bk(e,t,n,c),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,bk(e,t,n,c)}else{e.lineWidth=Gx(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=i.leftForLtr(h,l),n=i.leftForLtr(i.xPlus(h,1),l-2),a=Ok(s.borderRadius);Object.values(a).some((e=>0!==e))?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Ik(e,{x:t,y:f,w:l,h:o,radius:a}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),Ik(e,{x:n,y:f+1,w:l-2,h:o-2,radius:a}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(t,f,l,o),e.strokeRect(t,f,l,o),e.fillStyle=s.backgroundColor,e.fillRect(n,f+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:i}=this,{bodySpacing:r,bodyAlign:s,displayColors:a,boxHeight:o,boxWidth:l,boxPadding:c}=n,u=Fk(n.bodyFont);let h=u.lineHeight,d=0;const f=kS(n.rtl,this.x,this.width),p=function(n){t.fillText(n,f.x(e.x+d),e.y+h/2),e.y+=h+r},g=f.textAlign(s);let m,v,y,b,w,x,_;for(t.textAlign=s,t.textBaseline="middle",t.font=u.string,e.x=GC(this,g,n),t.fillStyle=n.bodyColor,e_(this.beforeBody,p),d=a&&"right"!==g?"center"===s?l/2+c:l+2+c:0,b=0,x=i.length;b<x;++b){for(m=i[b],v=this.labelTextColors[b],t.fillStyle=v,e_(m.before,p),y=m.lines,a&&y.length&&(this._drawColorBox(t,e,b,f,n),h=Math.max(u.lineHeight,o)),w=0,_=y.length;w<_;++w)p(y[w]),h=u.lineHeight;e_(m.after,p)}d=0,h=u.lineHeight,e_(this.afterBody,p),e.y-=r}drawFooter(e,t,n){const i=this.footer,r=i.length;let s,a;if(r){const o=kS(n.rtl,this.x,this.width);for(e.x=GC(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",s=Fk(n.footerFont),t.fillStyle=n.footerColor,t.font=s.string,a=0;a<r;++a)t.fillText(i[a],o.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,t,n,i){const{xAlign:r,yAlign:s}=this,{x:a,y:o}=e,{width:l,height:c}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Ok(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(a+u,o),"top"===s&&this.drawCaret(e,t,n,i),t.lineTo(a+l-h,o),t.quadraticCurveTo(a+l,o,a+l,o+h),"center"===s&&"right"===r&&this.drawCaret(e,t,n,i),t.lineTo(a+l,o+c-f),t.quadraticCurveTo(a+l,o+c,a+l-f,o+c),"bottom"===s&&this.drawCaret(e,t,n,i),t.lineTo(a+d,o+c),t.quadraticCurveTo(a,o+c,a,o+c-d),"center"===s&&"left"===r&&this.drawCaret(e,t,n,i),t.lineTo(a,o+u),t.quadraticCurveTo(a,o,a+u,o),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const n=VC[e.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=WC(this,e),a=Object.assign({},n,this._size),o=qC(t,e,a),l=KC(e,a,o,t);i._to===l.x&&r._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=Lk(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(r,e,i,t),SS(e,t.textDirection),r.y+=s.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),ES(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,i=e.map((e=>{let{datasetIndex:t,index:n}=e;const i=this.chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[n],index:n}})),r=!t_(n,i),s=this._positionChanged(i,t);(r||s)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],s=this._getActiveElements(e,r,t,n),a=this._positionChanged(s,e),o=t||!t_(s,r)||a;return o&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,n,i){const r=this.options;if("mouseout"===e.type)return[];if(!i)return t.filter((e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index)));const s=this.chart.getElementsAtEventForMode(e,r.mode,r,n);return r.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:n,caretY:i,options:r}=this,s=VC[r.position].call(this,e,t);return!1!==s&&(n!==s.x||i!==s.y)}}var eN={id:"tooltip",_element:ZC,positioners:VC,afterInit(e,t,n){n&&(e.tooltip=new ZC({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:XC},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},tN=Object.freeze({__proto__:null,Colors:hC,Decimation:pC,Filler:AC,Legend:jC,SubTitle:UC,Title:LC,Tooltip:eN});function nN(e,t,n,i){const r=e.indexOf(t);if(-1===r)return((e,t,n,i)=>("string"===typeof t?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,i);return r!==e.lastIndexOf(t)?n:r}function iN(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class rN extends aT{static id="category";static defaults=(()=>({ticks:{callback:iN}}))();constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:i}of t)e[n]===i&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(qx(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:O_(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:nN(n,e,Xx(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=0===e&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=t;s++)i.push({value:s});return i}getLabelForValue(e){return iN.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function sN(e,t){const n=[],{bounds:i,step:r,min:s,max:a,precision:o,count:l,maxTicks:c,maxDigits:u,includeBounds:h}=e,d=r||1,f=c-1,{min:p,max:g}=t,m=!qx(s),v=!qx(a),y=!qx(l),b=(g-p)/(u+1);let w,x,_,k,S=E_((g-p)/f/d)*d;if(S<1e-14&&!m&&!v)return[{value:p},{value:g}];k=Math.ceil(g/S)-Math.floor(p/S),k>f&&(S=E_(k*S/f/d)*d),qx(o)||(w=Math.pow(10,o),S=Math.ceil(S*w)/w),"ticks"===i?(x=Math.floor(p/S)*S,_=Math.ceil(g/S)*S):(x=p,_=g),m&&v&&r&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((a-s)/r,S/1e3)?(k=Math.round(Math.min((a-s)/S,c)),S=(a-s)/k,x=s,_=a):y?(x=m?s:x,_=v?a:_,k=l-1,S=(_-x)/k):(k=(_-x)/S,k=S_(k,Math.round(k),S/1e3)?Math.round(k):Math.ceil(k));const E=Math.max(D_(S),D_(x));w=Math.pow(10,qx(o)?E:o),x=Math.round(x*w)/w,_=Math.round(_*w)/w;let T=0;for(m&&(h&&x!==s?(n.push({value:s}),x<s&&T++,S_(Math.round((x+T*S)*w)/w,s,aN(s,b,e))&&T++):x<s&&T++);T<k;++T){const e=Math.round((x+T*S)*w)/w;if(v&&e>a)break;n.push({value:e})}return v&&h&&_!==a?n.length&&S_(n[n.length-1].value,a,aN(a,b,e))?n[n.length-1].value=a:n.push({value:a}):v&&_!==a||n.push({value:_}),n}function aN(e,t,n){let{horizontal:i,minRotation:r}=n;const s=N_(r),a=(i?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+e).length;return Math.min(t/a,o)}class oN extends aT{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return qx(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const s=e=>i=t?i:e,a=e=>r=n?r:e;if(e){const e=k_(i),t=k_(r);e<0&&t<0?a(0):e>0&&t>0&&s(0)}if(i===r){let t=0===r?1:Math.abs(.05*r);a(r+t),e||s(i-t)}this.min=i,this.max=r}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:i}=e;return i?(t=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,t>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=sN({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&C_(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-t)/Math.max(e.length-1,1)/2;t-=i,n+=i}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return ak(e,this.chart.options.locale,this.options.ticks.format)}}class lN extends oN{static id="linear";static defaults=(()=>({ticks:{callback:lk.formatters.numeric}}))();determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Yx(e)?e:0,this.max=Yx(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=N_(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/i))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const cN=e=>Math.floor(__(e)),uN=(e,t)=>Math.pow(10,cN(e)+t);function hN(e){return 1===e/Math.pow(10,cN(e))}function dN(e,t,n){const i=Math.pow(10,n),r=Math.floor(e/i);return Math.ceil(t/i)-r}function fN(e,t){let{min:n,max:i}=t;n=Qx(e.min,n);const r=[],s=cN(n);let a=function(e,t){let n=cN(t-e);for(;dN(e,t,n)>10;)n++;for(;dN(e,t,n)<10;)n--;return Math.min(n,cN(e))}(n,i),o=a<0?Math.pow(10,Math.abs(a)):1;const l=Math.pow(10,a),c=s>a?Math.pow(10,s):0,u=Math.round((n-c)*o)/o,h=Math.floor((n-c)/l/10)*l*10;let d=Math.floor((u-h)/Math.pow(10,a)),f=Qx(e.min,Math.round((c+h+d*Math.pow(10,a))*o)/o);for(;f<i;)r.push({value:f,major:hN(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(a++,d=2,o=a>=0?1:o),f=Math.round((c+h+d*Math.pow(10,a))*o)/o;const p=Qx(e.max,f);return r.push({value:p,major:hN(p),significand:d}),r}class pN extends aT{static id="logarithmic";static defaults=(()=>({ticks:{callback:lk.formatters.logarithmic,major:{enabled:!0}}}))();constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=oN.prototype.parse.apply(this,[e,t]);if(0!==n)return Yx(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Yx(e)?Math.max(0,e):null,this.max=Yx(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Yx(this._userMin)&&(this.min=e===uN(this.min,0)?uN(this.min,-1):uN(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,i=this.max;const r=t=>n=e?n:t,s=e=>i=t?i:e;n===i&&(n<=0?(r(1),s(10)):(r(uN(n,-1)),s(uN(i,1)))),n<=0&&r(uN(i,-1)),i<=0&&s(uN(n,1)),this.min=n,this.max=i}buildTicks(){const e=this.options,t=fN({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&C_(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":ak(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=__(e),this._valueRange=__(this.max)-__(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(__(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function gN(e){const t=e.ticks;if(t.display&&e.display){const e=Lk(t.backdropPadding);return Xx(t.font&&t.font.size,pk.font.size)+e.height}return 0}function mN(e,t,n,i,r){return e===i||e===r?{start:t-n/2,end:t+n/2}:e<i||e>r?{start:t-n,end:t}:{start:t,end:t+n}}function vN(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),i=[],r=[],s=e._pointLabels.length,a=e.options.pointLabels,o=a.centerPointLabels?p_/s:0;for(let h=0;h<s;h++){const s=a.setContext(e.getPointLabelContext(h));r[h]=s.padding;const d=e.getPointPosition(h,e.drawingArea+r[h],o),f=Fk(s.font),p=(l=e.ctx,c=f,u=Kx(u=e._pointLabels[h])?u:[u],{w:mk(l,c.string,u),h:u.length*c.lineHeight});i[h]=p;const g=R_(e.getIndexAngle(h)+o),m=Math.round(I_(g));yN(n,t,g,mN(m,d.x,p.w,0,180),mN(m,d.y,p.h,90,270))}var l,c,u;e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const i=[],r=e._pointLabels.length,s=e.options,{centerPointLabels:a,display:o}=s.pointLabels,l={extra:gN(s)/2,additionalAngle:a?p_/r:0};let c;for(let u=0;u<r;u++){l.padding=n[u],l.size=t[u];const r=bN(e,u,l);i.push(r),"auto"===o&&(r.visible=wN(r,c),r.visible&&(c=r))}return i}(e,i,r)}function yN(e,t,n,i,r){const s=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let o=0,l=0;i.start<t.l?(o=(t.l-i.start)/s,e.l=Math.min(e.l,t.l-o)):i.end>t.r&&(o=(i.end-t.r)/s,e.r=Math.max(e.r,t.r+o)),r.start<t.t?(l=(t.t-r.start)/a,e.t=Math.min(e.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/a,e.b=Math.max(e.b,t.b+l))}function bN(e,t,n){const i=e.drawingArea,{extra:r,additionalAngle:s,padding:a,size:o}=n,l=e.getPointPosition(t,i+r+a,s),c=Math.round(I_(R_(l.angle+b_))),u=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,o.h,c),h=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),d=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,o.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+o.w,bottom:u+o.h}}function wN(e,t){if(!t)return!0;const{left:n,top:i,right:r,bottom:s}=e;return!(xk({x:n,y:i},t)||xk({x:n,y:s},t)||xk({x:r,y:i},t)||xk({x:r,y:s},t))}function xN(e,t,n){const{left:i,top:r,right:s,bottom:a}=n,{backdropColor:o}=t;if(!qx(o)){const n=Ok(t.borderRadius),l=Lk(t.backdropPadding);e.fillStyle=o;const c=i-l.left,u=r-l.top,h=s-i+l.width,d=a-r+l.height;Object.values(n).some((e=>0!==e))?(e.beginPath(),Ik(e,{x:c,y:u,w:h,h:d,radius:n}),e.fill()):e.fillRect(c,u,h,d)}}function _N(e,t,n,i){const{ctx:r}=e;if(n)r.arc(e.xCenter,e.yCenter,t,0,g_);else{let n=e.getPointPosition(0,t);r.moveTo(n.x,n.y);for(let s=1;s<i;s++)n=e.getPointPosition(s,t),r.lineTo(n.x,n.y)}}class kN extends oN{static id="radialLinear";static defaults=(()=>({display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:lk.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}))();static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Lk(gN(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Yx(e)&&!isNaN(e)?e:0,this.max=Yx(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/gN(this.options))}generateTickLabels(e){oN.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map(((e,t)=>{const n=Zx(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""})).filter(((e,t)=>this.chart.getDataVisibility(t)))}fit(){const e=this.options;e.display&&e.pointLabels.display?vN(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,i))}getIndexAngle(e){return R_(e*(g_/(this._pointLabels.length||1))+N_(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(qx(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(qx(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return Vk(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=this.getIndexAngle(e)-b_+n;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:i,bottom:r}=this._pointLabelItems[e];return{left:t,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),_N(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:i,border:r}=t,s=this._pointLabels.length;let a,o,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:i}}=e;for(let r=t-1;r>=0;r--){const t=e._pointLabelItems[r];if(!t.visible)continue;const s=i.setContext(e.getPointLabelContext(r));xN(n,s,t);const a=Fk(s.font),{x:o,y:l,textAlign:c}=t;Nk(n,e._pointLabels[r],o,l+a.lineHeight/2,a,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),i.display&&this.ticks.forEach(((e,t)=>{if(0!==t||0===t&&this.min<0){o=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),a=i.setContext(n),l=r.setContext(n);!function(e,t,n,i,r){const s=e.ctx,a=t.circular,{color:o,lineWidth:l}=t;!a&&!i||!o||!l||n<0||(s.save(),s.strokeStyle=o,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),_N(e,n,a,i),s.closePath(),s.stroke(),s.restore())}(this,a,o,s,l)}})),n.display){for(e.save(),a=s-1;a>=0;a--){const i=n.setContext(this.getPointLabelContext(a)),{color:r,lineWidth:s}=i;s&&r&&(e.lineWidth=s,e.strokeStyle=r,e.setLineDash(i.borderDash),e.lineDashOffset=i.borderDashOffset,o=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,o),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach(((i,a)=>{if(0===a&&this.min>=0&&!t.reverse)return;const o=n.setContext(this.getContext(a)),l=Fk(o.font);if(r=this.getDistanceFromCenterForValue(this.ticks[a].value),o.showLabelBackdrop){e.font=l.string,s=e.measureText(i.label).width,e.fillStyle=o.backdropColor;const t=Lk(o.backdropPadding);e.fillRect(-s/2-t.left,-r-l.size/2-t.top,s+t.width,l.size+t.height)}Nk(e,i.label,0,-r,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})})),e.restore()}drawTitle(){}}const SN={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},EN=Object.keys(SN);function TN(e,t){return e-t}function CN(e,t){if(qx(t))return null;const n=e._adapter,{parser:i,round:r,isoWeekday:s}=e._parseOpts;let a=t;return"function"===typeof i&&(a=i(a)),Yx(a)||(a="string"===typeof i?n.parse(a,i):n.parse(a)),null===a?null:(r&&(a="week"!==r||!T_(s)&&!0!==s?n.startOf(a,r):n.startOf(a,"isoWeek",s)),+a)}function NN(e,t,n,i){const r=EN.length;for(let s=EN.indexOf(e);s<r-1;++s){const e=SN[EN[s]],r=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(r*e.size))<=i)return EN[s]}return EN[r-1]}function IN(e,t,n){if(n){if(n.length){const{lo:i,hi:r}=F_(n,t);e[n[i]>=t?n[i]:n[r]]=!0}}else e[t]=!0}function DN(e,t,n){const i=[],r={},s=t.length;let a,o;for(a=0;a<s;++a)o=t[a],r[o]=a,i.push({value:o,major:!1});return 0!==s&&n?function(e,t,n,i){const r=e._adapter,s=+r.startOf(t[0].value,i),a=t[t.length-1].value;let o,l;for(o=s;o<=a;o=+r.add(o,1,i))l=n[o],l>=0&&(t[l].major=!0);return t}(e,i,r,n):i}class AN extends aT{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),i=this._adapter=new dE(e.adapters.date);i.init(t),a_(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:CN(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:i,max:r,minDefined:s,maxDefined:a}=this.getUserBounds();function o(e){s||isNaN(e.min)||(i=Math.min(i,e.min)),a||isNaN(e.max)||(r=Math.max(r,e.max))}s&&a||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),i=Yx(i)&&!isNaN(i)?i:+t.startOf(Date.now(),n),r=Yx(r)&&!isNaN(r)?r:+t.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,s=function(e,t,n){let i=0,r=e.length;for(;i<r&&e[i]<t;)i++;for(;r>i&&e[r-1]>n;)r--;return i>0||r<e.length?e.slice(i,r):e}(i,r,this.max);return this._unit=t.unit||(n.autoSkip?NN(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(e,t,n,i,r){for(let s=EN.length-1;s>=EN.indexOf(n);s--){const n=EN[s];if(SN[n].common&&e._adapter.diff(r,i,n)>=t-1)return n}return EN[n?EN.indexOf(n):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=EN.indexOf(e)+1,n=EN.length;t<n;++t)if(SN[EN[t]].common)return EN[t]}(this._unit):void 0,this.initOffsets(i),e.reverse&&s.reverse(),DN(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=0,r=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),i=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),r=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const s=n.length<3?.5:.25;i=O_(i,0,s),r=O_(r,0,s),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const e=this._adapter,t=this.min,n=this.max,i=this.options,r=i.time,s=r.unit||NN(r.minUnit,t,n,this._getLabelCapacity(t)),a=Xx(i.ticks.stepSize,1),o="week"===s&&r.isoWeekday,l=T_(o)||!0===o,c={};let u,h,d=t;if(l&&(d=+e.startOf(d,"isoWeek",o)),d=+e.startOf(d,l?"day":s),e.diff(n,t,s)>1e5*a)throw new Error(t+" and "+n+" are too far apart with stepSize of "+a+" "+s);const f="data"===i.ticks.source&&this.getDataTimestamps();for(u=d,h=0;u<n;u=+e.add(u,a,s),h++)IN(c,u,f);return u!==n&&"ticks"!==i.bounds&&1!==h||IN(c,u,f),Object.keys(c).sort(TN).map((e=>+e))}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,i=this._unit,r=t||n[i];return this._adapter.format(e,r)}_tickFormatFunction(e,t,n,i){const r=this.options,s=r.ticks.callback;if(s)return Zx(s,[e,t,n],this);const a=r.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&a[o],u=l&&a[l],h=n[t],d=l&&u&&h&&h.major;return this._adapter.format(e,i||(d?u:c))}generateTickLabels(e){let t,n,i;for(t=0,n=e.length;t<n;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,i=N_(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(i),s=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*r+a*s,h:n*s+a*r}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,i=n[t.unit]||n.millisecond,r=this._tickFormatFunction(e,0,DN(this,[e],this._majorUnit),i),s=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return a>0?a:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,t=i.length;e<t;++e)n=n.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const i=this.getLabels();for(t=0,n=i.length;t<n;++t)e.push(CN(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return $_(e.sort(TN))}}function MN(e,t,n){let i,r,s,a,o=0,l=e.length-1;n?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=U_(e,"pos",t)),({pos:i,time:s}=e[o]),({pos:r,time:a}=e[l])):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=U_(e,"time",t)),({time:i,pos:s}=e[o]),({time:r,pos:a}=e[l]));const c=r-i;return c?s+(a-s)*(t-i)/c:s}class PN extends AN{static id="timeseries";static defaults=(()=>AN.defaults)();constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=MN(t,this.min),this._tableRange=MN(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,i=[],r=[];let s,a,o,l,c;for(s=0,a=e.length;s<a;++s)l=e[s],l>=t&&l<=n&&i.push(l);if(i.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(s=0,a=i.length;s<a;++s)c=i[s+1],o=i[s-1],l=i[s],Math.round((c+o)/2)!==l&&r.push({time:l,pos:s/(a-1)});return r}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort(((e,t)=>e-t))}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(MN(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return MN(this._table,n*this._tableRange+this._minPos,!0)}}const RN=[cE,rC,tN,Object.freeze({__proto__:null,CategoryScale:rN,LinearScale:lN,LogarithmicScale:pN,RadialLinearScale:kN,TimeScale:AN,TimeSeriesScale:PN})];OT.register(...RN);const jN=OT;const ON=function(e){let{activities:t=[]}=e;const n=(0,r.useRef)(),i=(0,r.useRef)(null);return(0,r.useEffect)((()=>{if(!n.current||0===t.length)return;const e=n.current.getContext("2d"),{labels:r,stepsData:s,symmetryData:a}=(()=>{const e={};t.forEach((t=>{if(!t.timestamp)return;const n=t.timestamp.toDate(),i=n.getFullYear(),r=new Date(n.setDate(n.getDate()-n.getDay()+1)),s=Math.ceil(((r-new Date(i,0,1))/864e5+1)/7),a=`${i}-W${String(s).padStart(2,"0")}`;e[a]||(e[a]={steps:0,symmetrySum:0,count:0,date:r}),e[a].steps+=t.steps||0,t.symmetry&&(e[a].symmetrySum+=t.symmetry,e[a].count+=1)}));const n=Object.keys(e).sort(((t,n)=>e[t].date-e[n].date));return{labels:n.map((e=>e)),stepsData:n.map((t=>e[t].steps)),symmetryData:n.map((t=>{const n=e[t];return n.count>0?Math.round(n.symmetrySum/n.count):0}))}})();return i.current&&i.current.destroy(),i.current=new jN(e,{type:"line",data:{labels:r,datasets:[{label:"Weekly Steps",data:s,backgroundColor:"rgba(56, 189, 248, 0.2)",borderColor:"rgb(56, 189, 248)",tension:.1,yAxisID:"ySteps"},{label:"Avg. Weekly Symmetry %",data:a,backgroundColor:"rgba(168, 85, 247, 0.2)",borderColor:"rgb(168, 85, 247)",tension:.1,yAxisID:"ySymmetry"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1}},scales:{x:{title:{display:!0,text:"Week"}},ySteps:{type:"linear",display:!0,position:"left",beginAtZero:!0,title:{display:!0,text:"Steps"}},ySymmetry:{type:"linear",display:!0,position:"right",min:0,max:100,grid:{drawOnChartArea:!1},title:{display:!0,text:"Symmetry (%)"}}}}}),()=>{i.current&&(i.current.destroy(),i.current=null)}}),[t]),(0,Hw.jsxs)("div",{className:"progress-chart",children:[(0,Hw.jsx)("h3",{children:"Weekly Progress Summary"}),(0,Hw.jsx)("div",{className:"chart-container",children:t.length>0?(0,Hw.jsx)("canvas",{ref:n}):(0,Hw.jsx)("p",{children:"No activity data available to display the chart."})})]})};const LN=function(e){let{activities:t=[]}=e;const[n,i]=(0,r.useState)((new Date).getMonth()),[s,a]=(0,r.useState)((new Date).getFullYear()),o=new Date(s,n+1,0).getDate(),l=new Date(s,n,1).getDay(),c=(()=>{const e={};t.forEach((t=>{try{var n;if(!t.timestamp&&!t.date)return;let r;if(null!==(n=t.timestamp)&&void 0!==n&&n.toDate&&"function"===typeof t.timestamp.toDate)try{if(r=t.timestamp.toDate(),isNaN(r.getTime()))return void console.warn("Invalid timestamp date:",t.timestamp)}catch(i){return void console.warn("Error converting timestamp to date:",i)}else{if(!t.date)return;try{if(r="string"===typeof t.date?(/^\d{4}-\d{2}-\d{2}/.test(t.date),new Date(t.date)):new Date(t.date),isNaN(r.getTime()))return void console.warn("Invalid activity date:",t.date)}catch(i){return void console.warn("Error parsing date string:",i)}}try{const n=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`,i=t.steps||0;let s=0;i>0&&(s=1),i>=3e3&&(s=2),i>=6e3&&(s=3),i>=1e4&&(s=4),e[n]=Math.max(e[n]||0,s)}catch(i){console.warn("Error formatting date:",i)}}catch(i){console.error("Error processing activity:",i)}}));const i=[];for(let t=0;t<l;t++)i.push({day:null,level:-1});for(let t=1;t<=o;t++){const a=new Date(s,n,t);try{const n=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`;i.push({day:t,level:e[n]||0,date:n})}catch(r){console.error("Error creating heatmap cell:",r),i.push({day:t,level:0,date:"Invalid Date"})}}return i})(),u=new Date(s,n,1).toLocaleString("default",{month:"long"});return(0,Hw.jsxs)("div",{className:"calendar-heatmap",children:[(0,Hw.jsxs)("div",{className:"heatmap-header",children:[(0,Hw.jsx)("button",{className:"month-nav-button",onClick:()=>{0===n?(i(11),a(s-1)):i(n-1)},children:"\u2190"}),(0,Hw.jsxs)("h3",{children:[u," ",s," Activity"]}),(0,Hw.jsx)("button",{className:"month-nav-button",onClick:()=>{11===n?(i(0),a(s+1)):i(n+1)},children:"\u2192"})]}),(0,Hw.jsxs)("div",{className:"heatmap-days-header",children:[(0,Hw.jsx)("span",{children:"Sun"}),(0,Hw.jsx)("span",{children:"Mon"}),(0,Hw.jsx)("span",{children:"Tue"}),(0,Hw.jsx)("span",{children:"Wed"}),(0,Hw.jsx)("span",{children:"Thu"}),(0,Hw.jsx)("span",{children:"Fri"}),(0,Hw.jsx)("span",{children:"Sat"})]}),(0,Hw.jsx)("div",{className:"heatmap-grid",children:c.map(((e,t)=>{return(0,Hw.jsx)("div",{className:"day-cell "+(null===e.day?"empty":`level-${e.level}`),title:e.day?`${e.date}: ${n=e.level,["No activity","Low","Moderate","High","Very high"][n]||""}`:"",children:e.day},t);var n}))}),(0,Hw.jsxs)("div",{className:"heatmap-legend",children:[(0,Hw.jsx)("span",{children:"Less"}),(0,Hw.jsxs)("div",{className:"legend-item",children:[(0,Hw.jsx)("div",{className:"legend-color level-0"}),(0,Hw.jsx)("span",{children:"None"})]}),(0,Hw.jsxs)("div",{className:"legend-item",children:[(0,Hw.jsx)("div",{className:"legend-color level-1"}),(0,Hw.jsx)("span",{children:"Low"})]}),(0,Hw.jsxs)("div",{className:"legend-item",children:[(0,Hw.jsx)("div",{className:"legend-color level-2"}),(0,Hw.jsx)("span",{children:"Medium"})]}),(0,Hw.jsxs)("div",{className:"legend-item",children:[(0,Hw.jsx)("div",{className:"legend-color level-3"}),(0,Hw.jsx)("span",{children:"High"})]}),(0,Hw.jsxs)("div",{className:"legend-item",children:[(0,Hw.jsx)("div",{className:"legend-color level-4"}),(0,Hw.jsx)("span",{children:"Very High"})]}),(0,Hw.jsx)("span",{children:"More"})]})]})};const FN=function(e){let{activities:t=[],loading:n=!1}=e;if(n)return(0,Hw.jsx)("div",{className:"loading-activities",children:"Loading activities..."});const i=t.length>0?t.sort(((e,t)=>{var n,i;return(null===(n=t.timestamp)||void 0===n?void 0:n.toDate())-(null===(i=e.timestamp)||void 0===i?void 0:i.toDate())})).slice(0,5):[{id:1,type:"Walking",date:"Today, 10:30 AM",duration:"45 minutes",steps:4500,distance:"3.2 km",symmetry:87,location:"Local Park"},{id:2,type:"Exercise Routine",date:"Yesterday, 4:15 PM",duration:"30 minutes",steps:2800,symmetry:82},{id:3,type:"Physiotherapy Session",date:"Apr 28, 2:00 PM",duration:"60 minutes",notes:"Focus on ankle mobility"}],r=e=>{if(!e)return"N/A";return e.toDate().toLocaleDateString()};return(0,Hw.jsxs)("div",{className:"recent-activities",children:[(0,Hw.jsx)("h3",{children:"Recent Activities"}),0===i.length?(0,Hw.jsx)("div",{className:"no-activities",children:"No activities recorded yet"}):i.map((e=>(0,Hw.jsxs)(ux,{className:"activity-card",children:[(0,Hw.jsxs)("div",{className:"activity-header",children:[(0,Hw.jsx)("h4",{children:e.type}),(0,Hw.jsx)("span",{className:"activity-date",children:e.timestamp?r(e.timestamp):e.date})]}),(0,Hw.jsxs)("div",{className:"activity-details",children:[e.duration&&(0,Hw.jsxs)("div",{className:"activity-detail",children:[(0,Hw.jsx)("span",{className:"detail-icon",children:"\u23f1\ufe0f"}),(0,Hw.jsxs)("span",{children:[e.duration," ","number"===typeof e.duration?"min":""]})]}),e.steps&&(0,Hw.jsxs)("div",{className:"activity-detail",children:[(0,Hw.jsx)("span",{className:"detail-icon",children:"\ud83d\udc63"}),(0,Hw.jsxs)("span",{children:[e.steps," steps"]})]}),e.distance&&(0,Hw.jsxs)("div",{className:"activity-detail",children:[(0,Hw.jsx)("span",{className:"detail-icon",children:"\ud83d\udccf"}),(0,Hw.jsxs)("span",{children:[e.distance," ","string"!==typeof e.distance||e.distance.includes("km")?"":"km"]})]}),e.symmetry&&(0,Hw.jsxs)("div",{className:"activity-detail",children:[(0,Hw.jsx)("span",{className:"detail-icon",children:"\u2696\ufe0f"}),(0,Hw.jsxs)("span",{children:[e.symmetry,"% symmetry"]})]}),e.cadence&&(0,Hw.jsxs)("div",{className:"activity-detail",children:[(0,Hw.jsx)("span",{className:"detail-icon",children:"\ud83c\udfc3"}),(0,Hw.jsxs)("span",{children:[e.cadence," steps/min"]})]}),e.location&&(0,Hw.jsxs)("div",{className:"activity-detail",children:[(0,Hw.jsx)("span",{className:"detail-icon",children:"\ud83d\udccd"}),(0,Hw.jsx)("span",{children:e.location})]}),e.notes&&(0,Hw.jsxs)("div",{className:"activity-detail",children:[(0,Hw.jsx)("span",{className:"detail-icon",children:"\ud83d\udcdd"}),(0,Hw.jsx)("span",{children:e.notes})]})]})]},e.id)))]})},UN={FIRST_ACTIVITY:{badgeName:"First Activity",badgeIcon:"\ud83c\udfaf",description:"Complete your first activity"},SEVEN_DAY_STREAK:{badgeName:"7 Day Streak",badgeIcon:"\ud83d\udd25",description:"Complete activities for 7 consecutive days"},STEP_MASTER:{badgeName:"Step Master",badgeIcon:"\ud83d\udc63",description:"Reach 10,000 steps in a single day"},DISTANCE_CHAMPION:{badgeName:"Distance Champion",badgeIcon:"\ud83c\udfc6",description:"Walk a total of 10 kilometers"},SYMMETRY_EXPERT:{badgeName:"Symmetry Expert",badgeIcon:"\u2696\ufe0f",description:"Achieve 90% gait symmetry in a session"},CONSISTENCY_KING:{badgeName:"Consistency King",badgeIcon:"\ud83d\udc51",description:"Complete 30 activities"},EARLY_BIRD:{badgeName:"Early Bird",badgeIcon:"\ud83c\udf05",description:"Complete an activity before 8 AM"},NIGHT_OWL:{badgeName:"Night Owl",badgeIcon:"\ud83e\udd89",description:"Complete an activity after 8 PM"}};async function VN(e,t){try{var n,i;const r=await Qw(e),s=[];if(1===r.length){if(!await ex(e,UN.FIRST_ACTIVITY.badgeName)){const t=await Zw(e,UN.FIRST_ACTIVITY);s.push(t)}}if(t.steps>=1e4){if(!await ex(e,UN.STEP_MASTER.badgeName)){const t=await Zw(e,UN.STEP_MASTER);s.push(t)}}if(t.symmetry>=90){if(!await ex(e,UN.SYMMETRY_EXPERT.badgeName)){const t=await Zw(e,UN.SYMMETRY_EXPERT);s.push(t)}}const a=null!==(n=t.timestamp)&&void 0!==n&&null!==(i=n.toDate)&&void 0!==i&&i.call(n)?t.timestamp.toDate().getHours():(new Date).getHours();if(a<8){if(!await ex(e,UN.EARLY_BIRD.badgeName)){const t=await Zw(e,UN.EARLY_BIRD);s.push(t)}}if(a>=20){if(!await ex(e,UN.NIGHT_OWL.badgeName)){const t=await Zw(e,UN.NIGHT_OWL);s.push(t)}}if(30===r.length){if(!await ex(e,UN.CONSISTENCY_KING.badgeName)){const t=await Zw(e,UN.CONSISTENCY_KING);s.push(t)}}if(r.reduce(((e,t)=>e+(parseFloat(t.distance)||0)),0)>=10){if(!await ex(e,UN.DISTANCE_CHAMPION.badgeName)){const t=await Zw(e,UN.DISTANCE_CHAMPION);s.push(t)}}return await async function(e,t){try{if(await ex(e,UN.SEVEN_DAY_STREAK.badgeName))return null;if(t.length<7)return null;const n=[...t].sort(((e,t)=>{var n,i,r,s;const a=null!==(n=e.timestamp)&&void 0!==n&&null!==(i=n.toDate)&&void 0!==i&&i.call(n)?e.timestamp.toDate():new Date(e.timestamp);return(null!==(r=t.timestamp)&&void 0!==r&&null!==(s=r.toDate)&&void 0!==s&&s.call(r)?t.timestamp.toDate():new Date(t.timestamp))-a})),i=new Set;n.forEach((e=>{var t,n;const r=null!==(t=e.timestamp)&&void 0!==t&&null!==(n=t.toDate)&&void 0!==n&&n.call(t)?e.timestamp.toDate():new Date(e.timestamp),s=`${r.getFullYear()}-${r.getMonth()}-${r.getDate()}`;i.add(s)}));const r=Array.from(i).sort().reverse();let s=1;for(let t=0;t<r.length-1;t++){const[n,i,a]=r[t].split("-").map(Number),[o,l,c]=r[t+1].split("-").map(Number),u=new Date(n,i,a),h=new Date(o,l,c),d=u.getTime()-h.getTime();if(1===Math.ceil(d/864e5)){if(s++,s>=7)return await Zw(e,UN.SEVEN_DAY_STREAK)}else s=1}return null}catch(n){return console.error("Error checking streak achievement:",n),null}}(e,r),s}catch(r){return console.error("Error checking achievements:",r),[]}}const zN=e=>{let{isOpen:t,onClose:n,achievement:i}=e;if((0,r.useEffect)((()=>{const e=e=>{"Escape"===e.key&&n()};return t&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[t,n]),!t||!i)return null;const s=Object.values(UN).find((e=>e.badgeName===i.badgeName))||{badgeName:i.badgeName,badgeIcon:i.badgeIcon||"\ud83c\udfc6",description:"Achievement unlocked!"};return(0,Hw.jsx)("div",{className:"achievement-modal-overlay",onClick:n,children:(0,Hw.jsx)("div",{className:"achievement-modal",onClick:e=>e.stopPropagation(),children:(0,Hw.jsxs)("div",{className:"achievement-modal-content",children:[(0,Hw.jsxs)("div",{className:"achievement-modal-header",children:[(0,Hw.jsx)("h2",{children:"Achievement Unlocked!"}),(0,Hw.jsx)("button",{className:"close-button",onClick:n,children:"\xd7"})]}),(0,Hw.jsxs)("div",{className:"achievement-modal-body",children:[(0,Hw.jsxs)("div",{className:"achievement-badge",children:[(0,Hw.jsx)("div",{className:"badge-icon",children:s.badgeIcon}),(0,Hw.jsx)("div",{className:"badge-glow"})]}),(0,Hw.jsx)("h3",{className:"achievement-title",children:s.badgeName}),(0,Hw.jsx)("p",{className:"achievement-description",children:s.description}),(0,Hw.jsx)("div",{className:"achievement-confetti"})]}),(0,Hw.jsx)("div",{className:"achievement-modal-footer",children:(0,Hw.jsx)("button",{className:"primary-button",onClick:n,children:"Awesome!"})})]})})})},BN=e=>{let{isOpen:t,onClose:n,onActivityAdded:i,prefilledData:s}=e;const{user:a}=Gw(),[o,l]=(0,r.useState)("Walking"),[c,u]=(0,r.useState)(""),[h,d]=(0,r.useState)(""),[f,p]=(0,r.useState)(""),[g,m]=(0,r.useState)(""),[v,y]=(0,r.useState)(""),[b,w]=(0,r.useState)(!1),[x,_]=(0,r.useState)(""),[k,S]=(0,r.useState)(null),[E,T]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if(t){var e,n,i,r;if(s)l(s.type||"Walking"),u((null===(e=s.duration)||void 0===e?void 0:e.toString())||""),d((null===(n=s.steps)||void 0===n?void 0:n.toString())||""),p((null===(i=s.distance)||void 0===i?void 0:i.toString())||""),y((null===(r=s.symmetry)||void 0===r?void 0:r.toString())||""),m(s.notes||"");else l("Walking"),u(""),d(""),p(""),y(""),m("");_("")}}),[t,s]);return t?(0,Hw.jsxs)(Hw.Fragment,{children:[(0,Hw.jsx)("div",{className:"modal-overlay",onClick:n,children:(0,Hw.jsxs)("div",{className:"modal",onClick:e=>e.stopPropagation(),children:[(0,Hw.jsxs)("div",{className:"modal-header",children:[(0,Hw.jsx)("h2",{children:"Log Activity"}),(0,Hw.jsx)("button",{className:"close-button",onClick:n,children:"\xd7"})]}),(0,Hw.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),a){w(!0),_("");try{const e={uid:a.uid,timestamp:Iy(),type:o,duration:parseInt(c)||0,steps:parseInt(h)||0,distance:parseFloat(f)||0,symmetry:parseInt(v)||0,notes:g},t=await ky(dv($w,"activities"),e);console.log("Activity added with ID:",t.id);const r=await VN(a.uid,e);r&&r.length>0&&(S(r[0]),T(!0)),i&&i(),r&&0!==r.length||n()}catch(x){console.error("Error adding activity:",x),_("Failed to add activity. Please try again.")}finally{w(!1)}}else _("You must be logged in to add activities")},children:[(0,Hw.jsxs)("div",{className:"modal-body",children:[(0,Hw.jsxs)("div",{className:"form-group",children:[(0,Hw.jsx)("label",{htmlFor:"activityType",children:"Activity Type"}),(0,Hw.jsxs)("select",{id:"activityType",value:o,onChange:e=>l(e.target.value),required:!0,children:[(0,Hw.jsx)("option",{value:"Walking",children:"Walking"}),(0,Hw.jsx)("option",{value:"Running",children:"Running"}),(0,Hw.jsx)("option",{value:"Cycling",children:"Cycling"}),(0,Hw.jsx)("option",{value:"Swimming",children:"Swimming"}),(0,Hw.jsx)("option",{value:"Physiotherapy",children:"Physiotherapy"}),(0,Hw.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,Hw.jsxs)("div",{className:"form-group",children:[(0,Hw.jsx)("label",{htmlFor:"duration",children:"Duration (minutes)"}),(0,Hw.jsx)("input",{id:"duration",type:"number",value:c,onChange:e=>u(e.target.value),placeholder:"Duration in minutes",required:!0})]}),(0,Hw.jsxs)("div",{className:"form-row",children:[(0,Hw.jsxs)("div",{className:"form-group",children:[(0,Hw.jsx)("label",{htmlFor:"steps",children:"Steps"}),(0,Hw.jsx)("input",{id:"steps",type:"number",value:h,onChange:e=>d(e.target.value),placeholder:"Number of steps"})]}),(0,Hw.jsxs)("div",{className:"form-group",children:[(0,Hw.jsx)("label",{htmlFor:"distance",children:"Distance (km)"}),(0,Hw.jsx)("input",{id:"distance",type:"number",step:"0.01",value:f,onChange:e=>p(e.target.value),placeholder:"Distance in km"})]})]}),(0,Hw.jsxs)("div",{className:"form-group",children:[(0,Hw.jsx)("label",{htmlFor:"symmetry",children:"Gait Symmetry (%)"}),(0,Hw.jsx)("input",{id:"symmetry",type:"number",min:"0",max:"100",value:v,onChange:e=>y(e.target.value),placeholder:"Symmetry percentage"})]}),(0,Hw.jsxs)("div",{className:"form-group",children:[(0,Hw.jsx)("label",{htmlFor:"notes",children:"Notes"}),(0,Hw.jsx)("textarea",{id:"notes",value:g,onChange:e=>m(e.target.value),placeholder:"Add notes about your activity",rows:"3"})]}),x&&(0,Hw.jsx)("div",{className:"error-message",children:x})]}),(0,Hw.jsxs)("div",{className:"modal-footer",children:[(0,Hw.jsx)("button",{type:"button",className:"cancel-button",onClick:n,disabled:b,children:"Cancel"}),(0,Hw.jsx)("button",{type:"submit",className:"save-button",disabled:b,children:b?"Saving...":"Save Activity"})]})]})]})}),(0,Hw.jsx)(zN,{isOpen:E,onClose:()=>{T(!1),n()},achievement:k})]}):null},$N=("undefined"!==typeof window&&window.Accelerometer,()=>"undefined"!==typeof window&&"Accelerometer"in window),WN=()=>"undefined"!==typeof window&&"DeviceMotionEvent"in window,HN=async()=>{if("undefined"!==typeof DeviceMotionEvent&&"function"===typeof DeviceMotionEvent.requestPermission)try{return"granted"===await DeviceMotionEvent.requestPermission()}catch(e){console.error("Error requesting iOS DeviceMotion permission:",e)}if("undefined"===typeof navigator||!("permissions"in navigator))return!0;try{return"granted"===(await navigator.permissions.query({name:"accelerometer"})).state}catch(t){return console.error("Error requesting accelerometer permission:",t),!1}},qN=(e,t,n)=>Math.sqrt(e*e+t*t+n*n),KN=function(e,t){return t+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2)*(e-t)},GN=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"neutral";return!e||e<=0?.65:"male"===t.toLowerCase()?.38*e/100:"female"===t.toLowerCase()?.37*e/100:.375*e/100};const YN="undefined"!==typeof window&&window.Accelerometer||null,QN=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{frequency:t=60,filterCoefficient:n=.2,useDeviceMotionFallback:i=!0,enabled:s=!0}=e,[a,o]=(0,r.useState)({x:0,y:0,z:0,magnitude:0}),[l,c]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1),[d,f]=(0,r.useState)(null),[p,g]=(0,r.useState)(!1),m=(0,r.useRef)(null),v=(0,r.useRef)({x:0,y:0,z:0}),y=(0,r.useRef)(null);(0,r.useEffect)((()=>{if(!s)return;const e=()=>{console.log("Setting up DeviceMotion fallback"),g(!0),"undefined"!==typeof DeviceMotionEvent&&"function"===typeof DeviceMotionEvent.requestPermission?DeviceMotionEvent.requestPermission().then((e=>{"granted"===e?r():(f("DeviceMotion permission denied"),c(!1))})).catch((e=>{console.error("Error requesting DeviceMotion permission:",e),r()})):r()},r=()=>{y.current=e=>{if(!e.accelerationIncludingGravity)return void console.log("No acceleration data in DeviceMotion event");const{x:t=0,y:i=0,z:r=0}=e.accelerationIncludingGravity,s=KN(t||0,v.current.x,n),a=KN(i||0,v.current.y,n),l=KN(r||0,v.current.z,n);v.current={x:s,y:a,z:l};const c=qN(s,a,l);console.log("Processed DeviceMotion data:",{filtered:{x:s,y:a,z:l},magnitude:c,timestamp:Date.now()}),o({x:s,y:a,z:l,magnitude:c,timestamp:Date.now()})},c(!0),u&&(console.log("Attaching DeviceMotion event listener"),window.addEventListener("devicemotion",y.current))};return(async()=>{f(null);try{if(console.log("Initializing accelerometer..."),i&&WN())return console.log("Using DeviceMotion API"),void e();if($N()){if(console.log("Sensor API is supported"),await HN(),!YN)throw new Error("Accelerometer API not available, but should be");return console.log("Using Accelerometer API"),m.current=new YN({frequency:t}),m.current.addEventListener("error",(t=>{console.error("Accelerometer error:",t.error),f(`Accelerometer error: ${t.error.message}`),c(!1),i&&e()})),m.current.addEventListener("reading",(()=>{const{x:e,y:t,z:i}=m.current;console.log("Raw accelerometer readings:",{x:e,y:t,z:i});const r=KN(e,v.current.x,n),s=KN(t,v.current.y,n),a=KN(i,v.current.z,n);v.current={x:r,y:s,z:a};const l=qN(r,s,a);console.log("Processed accelerometer data:",{filtered:{x:r,y:s,z:a},magnitude:l,timestamp:Date.now()}),o({x:r,y:s,z:a,magnitude:l,timestamp:Date.now()})})),c(!0),g(!1),void(u&&(console.log("Starting accelerometer"),m.current.start()))}throw new Error("Accelerometer not supported by this device/browser")}catch(r){console.error("Error initializing accelerometer:",r),i&&WN()&&!p?(console.log("Trying DeviceMotion fallback after error"),e()):(f(`Error initializing accelerometer: ${r.message}`),c(!1))}})(),()=>{u&&w(),y.current&&(window.removeEventListener("devicemotion",y.current),y.current=null)}}),[s,t,n,i,u]);const b=(0,r.useCallback)((()=>{if(l&&!u){h(!0),console.log("Starting accelerometer readings...");try{p&&y.current?(console.log("Adding DeviceMotion event listener"),window.addEventListener("devicemotion",y.current)):m.current&&(console.log("Starting Accelerometer sensor"),m.current.start())}catch(e){console.error("Error starting accelerometer:",e),f(`Error starting accelerometer: ${e.message}`)}}}),[l,u,p]),w=(0,r.useCallback)((()=>{if(u){h(!1),console.log("Stopping accelerometer readings...");try{p&&y.current?(console.log("Removing DeviceMotion event listener"),window.removeEventListener("devicemotion",y.current)):m.current&&(console.log("Stopping Accelerometer sensor"),m.current.stop())}catch(e){console.error("Error stopping accelerometer:",e),f(`Error stopping accelerometer: ${e.message}`)}}}),[u,p]);return{acceleration:a,isAvailable:l,isRunning:u,error:d,usingFallback:p,start:b,stop:w}},XN=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{stepThreshold:t=10,stepCooldown:n=400,userHeight:i=170,userGender:s="neutral",filterCoefficient:a=.3,onStepDetected:o=null,enabled:l=!0,demoMode:c=!0}=e,[u,h]=(0,r.useState)(0),[d,f]=(0,r.useState)(0),[p,g]=(0,r.useState)(0),[m,v]=(0,r.useState)(!1),[y,b]=(0,r.useState)(null),[w,x]=(0,r.useState)(75),_=(0,r.useRef)(0),k=(0,r.useRef)(!1),S=(0,r.useRef)([]),E=(0,r.useRef)([]),T=(0,r.useRef)(null),C=(0,r.useRef)(GN(i,s)),N=(0,r.useRef)([]),I=(0,r.useRef)(null),{acceleration:D,isAvailable:A,isRunning:M,error:P,usingFallback:R,start:j,stop:O}=QN({filterCoefficient:a,enabled:l});(0,r.useEffect)((()=>{if(!m||!M)return;const e=Date.now(),{magnitude:i}=D;if(c&&m){if((I.current?(e-I.current)/1e3:0)<=10){const e=Math.floor(9*Math.random())+90;x(e)}else{const e=Math.floor(16*Math.random())+60;x(e)}}N.current.push(i),N.current.length>5&&N.current.shift();const r=e-_.current;if(r>n){i>t&&!k.current&&N.current.length>=3?(k.current=!0,h((t=>{const n=t+1,i=n*C.current/1e3;if(f(i),_.current>0){const t=r;S.current.push(t),S.current.length>10&&S.current.shift(),E.current.push({timestamp:e,interval:t}),E.current.length>20&&E.current.shift();const i=S.current.reduce(((e,t)=>e+t),0)/S.current.length,s=Math.round(6e4/i);g(s),!c&&E.current.length>=4&&n%2===0&&L()}return o&&o({steps:n,timestamp:e}),n})),_.current=e):i<.6*t&&(k.current=!1)}}),[D,m,M,o,n,t,c]);const L=(0,r.useCallback)((()=>{if(E.current.length<4)return;const e=E.current.map((e=>e.interval)),t=e.reduce(((e,t)=>e+t),0)/e.length;if(0===t)return;const n=e.map((e=>Math.pow(e-t,2))).reduce(((e,t)=>e+t),0)/e.length,i=Math.sqrt(n)/t*100;let r=100-1.5*i;r=Math.min(98,Math.max(50,Math.round(r))),console.log(`CV: ${i.toFixed(1)}%, Calculated Symmetry: ${r}% from ${e.length} intervals`),x((e=>75===e&&E.current.length>=4?Math.round(.4*e+.6*r):Math.round(.7*e+.3*r)))}),[]),F=(0,r.useCallback)((()=>{if(!A)return;j(),v(!0);const e=Date.now();if(b(e),T.current=e,c){I.current=e;const t=Math.floor(9*Math.random())+90;x(t)}else x(75);_.current=0,k.current=!1,S.current=[],E.current=[],N.current=[],h(0),f(0),g(0)}),[A,j,c]),U=(0,r.useCallback)((()=>{O(),v(!1),I.current=null}),[O]),V=(0,r.useCallback)((()=>{if(h(0),f(0),g(0),c){const e=Math.floor(9*Math.random())+90;x(e),I.current=Date.now()}else x(75);if(_.current=0,k.current=!1,S.current=[],E.current=[],N.current=[],T.current=m?Date.now():null,m){const e=Date.now();T.current=e,b(e),c&&(I.current=e)}else T.current=null,b(null),I.current=null}),[m,c]),z=(0,r.useCallback)((()=>y?Math.floor((Date.now()-y)/1e3):0),[y]),B=(0,r.useCallback)((()=>({steps:u,distance:d,cadence:p,symmetry:w,duration:z(),startTime:y,usingFallback:R})),[u,d,p,w,z,y,R]);return(0,r.useEffect)((()=>{C.current=GN(i,s)}),[i,s]),{steps:u,distance:d,cadence:p,symmetry:w,isAvailable:A,isActive:m,isRunning:M,error:P,usingFallback:R,acceleration:D,start:F,stop:U,reset:V,getSessionDuration:z,getSessionStats:B}},JN=e=>{var t,n,i,s,a,o,l,c;let{onSessionComplete:u,userSettings:h={}}=e;const{height:d=170,gender:f="neutral",stepGoal:p=1e4}=h,[g,m]=(0,r.useState)(!1),[v,y]=(0,r.useState)(0),[b,w]=(0,r.useState)(!1),[x,_]=(0,r.useState)(!1),[k,S]=(0,r.useState)(!1),E=(0,r.useRef)(null),{steps:T,distance:C,cadence:N,symmetry:I,isAvailable:D,isActive:A,isRunning:M,error:P,usingFallback:R,start:j,stop:O,reset:L,getSessionStats:F}=XN({userHeight:d,userGender:f,enabled:!0}),{acceleration:U}=QN({filterCoefficient:.3,enabled:!0});(0,r.useEffect)((()=>{(()=>{const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);S(e),console.log("Is mobile device:",e)})()}),[]),(0,r.useEffect)((()=>{"permissions"in navigator&&navigator.permissions.query({name:"accelerometer"}).then((e=>{"prompt"===e.state?w(!0):"denied"===e.state&&_(!0)})).catch((e=>{console.warn("Could not check permissions:",e)}))}),[]);(0,r.useEffect)((()=>()=>{E.current&&clearInterval(E.current)}),[]);const V=Math.min(100,T/p*100);return k?P||!D?(0,Hw.jsxs)(ux,{className:"step-tracker-card error-state",children:[(0,Hw.jsx)("h3",{children:"Step Tracker"}),(0,Hw.jsxs)("div",{className:"tracker-error",children:[(0,Hw.jsx)("i",{className:"fas fa-exclamation-triangle"}),(0,Hw.jsx)("p",{children:x?"Permission to access motion sensors was denied. Please enable sensor access in your browser settings.":P||"Motion sensors are not available on this device or browser."}),(0,Hw.jsx)("p",{className:"fallback-message",children:'You can still log activities manually using the "Log Activity" button.'})]})]}):b?(0,Hw.jsxs)(ux,{className:"step-tracker-card permission-state",children:[(0,Hw.jsx)("h3",{children:"Step Tracker"}),(0,Hw.jsxs)("div",{className:"permission-prompt",children:[(0,Hw.jsx)("p",{children:"This feature needs access to your device's motion sensors to count steps."}),(0,Hw.jsx)(nx,{variant:"primary",onClick:()=>{w(!1),j(),O()},children:"Allow Access"}),(0,Hw.jsx)(nx,{variant:"secondary",onClick:()=>w(!1),children:"Maybe Later"})]})]}):(0,Hw.jsxs)(ux,{className:"step-tracker-card",children:[(0,Hw.jsx)("h3",{children:"Step Tracker"}),(0,Hw.jsx)("div",{className:"tracker-controls",style:{marginBottom:"16px"},children:g?(0,Hw.jsxs)(Hw.Fragment,{children:[(0,Hw.jsx)(nx,{variant:"danger",className:"tracker-stop-btn",onClick:()=>{m(!1),O(),E.current&&(clearInterval(E.current),E.current=null);const e=F();u&&u({...e,endTime:Date.now(),duration:v})},children:"Stop & Save"}),(0,Hw.jsx)(nx,{variant:"secondary",className:"tracker-reset-btn",onClick:()=>{L(),y(0)},children:"Reset"})]}):(0,Hw.jsx)(nx,{variant:"primary",className:"tracker-start-btn",onClick:()=>{console.log("=== STARTING STEP TRACKING ==="),console.log("Sensor available:",D),console.log("Using fallback:",R),m(!0),y(0),j(),E.current=setInterval((()=>{y((e=>e+1))}),1e3),setTimeout((()=>{console.log("Tracking status after 1 second:"),console.log("Active:",A),console.log("Running:",M),console.log("Acceleration:",U),console.log("==========================")}),1e3)},children:"Start Tracking"})}),(0,Hw.jsxs)("div",{style:{backgroundColor:"#f0f0f0",padding:"8px",margin:"8px 0",borderRadius:"4px",fontSize:"14px",border:"1px solid #ddd"},children:[(0,Hw.jsxs)("div",{style:{marginBottom:"4px"},children:[(0,Hw.jsx)("strong",{children:"Sensor Status:"})," ",D?"\u2705 Available":"\u274c Not Available",R&&" (Using Fallback)"]}),(0,Hw.jsxs)("div",{style:{marginBottom:"4px"},children:[(0,Hw.jsx)("strong",{children:"Device Type:"})," ",k?"\ud83d\udcf1 Mobile":"\ud83d\udcbb Desktop"]}),(0,Hw.jsxs)("div",{style:{marginBottom:"4px"},children:[(0,Hw.jsx)("strong",{children:"State:"})," ",A?"Active":"Inactive"," / ",g?"Tracking":"Not Tracking"]}),(0,Hw.jsxs)("div",{style:{marginBottom:"4px"},children:[(0,Hw.jsx)("strong",{children:"Steps:"})," ",T]}),(0,Hw.jsxs)("div",{style:{marginBottom:"4px"},children:[(0,Hw.jsx)("strong",{children:"Acceleration:"}),(0,Hw.jsxs)("div",{style:{marginLeft:"8px"},children:["X: ",null!==(t=null===U||void 0===U||null===(n=U.x)||void 0===n?void 0:n.toFixed(2))&&void 0!==t?t:"0.00"," m/s\xb2"]}),(0,Hw.jsxs)("div",{style:{marginLeft:"8px"},children:["Y: ",null!==(i=null===U||void 0===U||null===(s=U.y)||void 0===s?void 0:s.toFixed(2))&&void 0!==i?i:"0.00"," m/s\xb2"]}),(0,Hw.jsxs)("div",{style:{marginLeft:"8px"},children:["Z: ",null!==(a=null===U||void 0===U||null===(o=U.z)||void 0===o?void 0:o.toFixed(2))&&void 0!==a?a:"0.00"," m/s\xb2"]}),(0,Hw.jsxs)("div",{style:{marginLeft:"8px"},children:["Magnitude: ",null!==(l=null===U||void 0===U||null===(c=U.magnitude)||void 0===c?void 0:c.toFixed(2))&&void 0!==l?l:"0.00"," m/s\xb2"]})]}),P&&(0,Hw.jsxs)("div",{style:{color:"red",marginTop:"4px"},children:[(0,Hw.jsx)("strong",{children:"Error:"})," ",P]})]}),(0,Hw.jsxs)("div",{className:"tracker-metrics",children:[(0,Hw.jsxs)("div",{className:"tracker-metric-item",children:[(0,Hw.jsx)("div",{className:"metric-value",children:T.toLocaleString()}),(0,Hw.jsx)("div",{className:"metric-label",children:"Steps"})]}),(0,Hw.jsxs)("div",{className:"tracker-metric-item",children:[(0,Hw.jsx)("div",{className:"metric-value",children:C.toFixed(2)}),(0,Hw.jsx)("div",{className:"metric-label",children:"Distance (km)"})]}),(0,Hw.jsxs)("div",{className:"tracker-metric-item",children:[(0,Hw.jsx)("div",{className:"metric-value",children:N||0}),(0,Hw.jsx)("div",{className:"metric-label",children:"Steps/min"})]}),(0,Hw.jsxs)("div",{className:"tracker-metric-item",children:[(0,Hw.jsxs)("div",{className:"metric-value",children:[I||0,"%"]}),(0,Hw.jsx)("div",{className:"metric-label",children:"Symmetry"})]})]}),(0,Hw.jsxs)("div",{className:"tracker-timer",children:[(0,Hw.jsx)("div",{className:"timer-display",children:(e=>{const t=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`})(v)}),(0,Hw.jsx)("div",{className:"timer-label",children:"Duration"})]}),(0,Hw.jsxs)("div",{className:"tracker-progress",children:[(0,Hw.jsxs)("div",{className:"progress-label",children:[(0,Hw.jsx)("span",{children:"Daily Goal"}),(0,Hw.jsxs)("span",{children:[T.toLocaleString()," / ",p.toLocaleString()]})]}),(0,Hw.jsx)("div",{className:"progress-bar",children:(0,Hw.jsx)("div",{className:"progress-fill",style:{width:`${V}%`}})})]}),R&&(0,Hw.jsx)("div",{className:"fallback-notice",children:"Using device motion sensors (limited accuracy)"})]}):(0,Hw.jsxs)(ux,{className:"step-tracker-card desktop-warning",children:[(0,Hw.jsx)("h3",{children:"Step Tracker"}),(0,Hw.jsxs)("div",{className:"tracker-error",children:[(0,Hw.jsx)("i",{className:"fas fa-desktop"}),(0,Hw.jsx)("p",{children:"Step tracking requires motion sensors that are only available on mobile devices. Please open this app on your smartphone or tablet to use the step tracking feature."}),(0,Hw.jsxs)("div",{className:"qr-code-container",children:[(0,Hw.jsx)("p",{className:"qr-instructions",children:"Scan this QR code with your mobile device:"}),(0,Hw.jsx)("div",{className:"qr-placeholder",children:"QR Code would appear here in production"})]})]})]})},ZN=e=>{let{userId:t,limit:n=0}=e;const[i,s]=(0,r.useState)([]),[a,o]=(0,r.useState)(!0);return(0,r.useEffect)((()=>{(async()=>{o(!0);try{if(t){const e=(await Xw(t)).sort(((e,t)=>{var n,i;const r=null!==(n=e.earnedAt)&&void 0!==n&&n.toDate?e.earnedAt.toDate():new Date(e.earnedAt);return(null!==(i=t.earnedAt)&&void 0!==i&&i.toDate?t.earnedAt.toDate():new Date(t.earnedAt))-r})),i=n>0?e.slice(0,n):e;s(i)}}catch(e){console.error("Error fetching achievements:",e),s([])}finally{o(!1)}})()}),[t,n]),a?(0,Hw.jsx)("div",{children:"Loading achievements..."}):0===i.length?(0,Hw.jsx)("div",{children:"No achievements yet. Keep going!"}):(0,Hw.jsx)("div",{className:"achievements-list",children:i.map((e=>{var t;return(0,Hw.jsxs)("div",{className:"achievement-item",children:[(0,Hw.jsx)("span",{className:"achievement-badge",children:e.badgeIcon||"\ud83c\udfc6"}),(0,Hw.jsxs)("div",{className:"achievement-info",children:[(0,Hw.jsx)("div",{className:"achievement-name",children:e.badgeName}),(0,Hw.jsx)("div",{className:"achievement-description",children:e.description}),(0,Hw.jsx)("div",{className:"achievement-date",children:null!==(t=e.earnedAt)&&void 0!==t&&t.toDate?e.earnedAt.toDate().toLocaleDateString():new Date(e.earnedAt).toLocaleDateString()})]})]},e.id)}))})},eI=(0,r.createContext)();function tI(e){let{children:t}=e;const{user:n}=Gw(),[i,s]=(0,r.useState)([]),[a,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(null),u=async()=>{if(!n)return s([]),void o(!1);o(!0),c(null);try{const e=Zv(dv($w,"tasks"),ty("patientId","==",n.uid)),t=Zv(dv($w,"tasks"),ty("therapistId","==",n.uid)),[i,r]=await Promise.all([by(e),by(t)]),a=new Map;i.forEach((e=>{a.set(e.id,{id:e.id,...e.data()})})),r.forEach((e=>{a.set(e.id,{id:e.id,...e.data()})}));const o=Array.from(a.values()).sort(((e,t)=>{var n,i,r,s;if(e.completed!==t.completed)return e.completed?1:-1;return((null===(n=e.dueDate)||void 0===n||null===(i=n.toDate)||void 0===i?void 0:i.call(n))||new Date(e.dueDate))-((null===(r=t.dueDate)||void 0===r||null===(s=r.toDate)||void 0===s?void 0:s.call(r))||new Date(t.dueDate))}));s(o)}catch(e){console.error("Error fetching tasks:",e),c("Failed to load tasks. Please try again later.")}finally{o(!1)}};(0,r.useEffect)((()=>{u()}),[n]);const h={tasks:i,loading:a,error:l,fetchTasks:u,addTask:async e=>{if(!n)return null;try{const t={...e,createdAt:Iy(),therapistId:n.uid,completed:!1},i=await ky(dv($w,"tasks"),t);return console.log("New task added with ID:",i.id),u(),{id:i.id,...t}}catch(t){return console.error("Error adding task:",t),c("Failed to add task"),null}},updateTask:async(e,t)=>{if(!n)return!1;try{return await xy(fv($w,"tasks",e),t),console.log("Task updated:",e),u(),!0}catch(i){return console.error("Error updating task:",i),c("Failed to update task"),!1}},completeTask:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!n)return!1;try{const i=fv($w,"tasks",e),r=await vy(i);if(!r.exists())return c("Task not found."),!1;const a=r.data(),o={completed:!0,completedAt:Iy(),completedBy:n.uid,...t};return await xy(i,{...o,updatedAt:Iy()}),s((t=>t.map((t=>t.id===e?{...t,...o,updatedAt:new Date}:t)))),a.pointsReward&&a.patientId,!0}catch(i){return console.error("Error completing task:",i),c("Failed to complete task. Please try again."),!1}},deleteTask:async e=>{if(!n)return!1;try{return await _y(fv($w,"tasks",e)),console.log("Task deleted:",e),s((t=>t.filter((t=>t.id!==e)))),!0}catch(t){return console.error("Error deleting task:",t),c("Failed to delete task"),!1}}};return(0,Hw.jsx)(eI.Provider,{value:h,children:t})}function nI(){return(0,r.useContext)(eI)}const iI=()=>{const{user:e}=Gw(),{tasks:t,loading:n,error:i,completeTask:s,updateTask:a}=nI(),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)({}),h=t.filter((t=>t.patientId===(null===e||void 0===e?void 0:e.uid))),d=[...h].sort(((e,t)=>{var n,i,r,s;if(e.completed!==t.completed)return e.completed?1:-1;return((null===(n=e.dueDate)||void 0===n||null===(i=n.toDate)||void 0===i?void 0:i.call(n))||new Date(e.dueDate))-((null===(r=t.dueDate)||void 0===r||null===(s=r.toDate)||void 0===s?void 0:s.call(r))||new Date(t.dueDate))})),f=e=>{if(!e)return"No due date";let t;if(e.toDate&&"function"===typeof e.toDate)t=e.toDate();else if("string"===typeof e||"number"===typeof e)t=new Date(e);else{if(!(e instanceof Date))return"Invalid Date";t=e}return t.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})};return n?(0,Hw.jsx)("div",{className:"task-loading",children:"Loading your tasks..."}):i?(0,Hw.jsxs)("div",{className:"task-error",children:["Error loading tasks: ",i]}):e?0===h.length?(0,Hw.jsx)(ux,{className:"task-card empty-tasks",children:(0,Hw.jsxs)("div",{className:"empty-tasks-message",children:[(0,Hw.jsx)("i",{className:"fas fa-clipboard-list"})," ",(0,Hw.jsx)("h3",{children:"No Tasks Assigned"}),(0,Hw.jsx)("p",{children:"Your therapist hasn't assigned any tasks yet, or you've completed them all!"})]})}):(0,Hw.jsxs)(ux,{className:"task-card",children:[(0,Hw.jsx)("h3",{children:"My Rehabilitation Tasks"}),(0,Hw.jsx)("div",{className:"task-list",children:d.map((e=>{const t=(e=>{var t,n;if(e.completed)return{class:"completed",badge:"Completed"};const i=(null===(t=e.dueDate)||void 0===t||null===(n=t.toDate)||void 0===n?void 0:n.call(t))||new Date(e.dueDate),r=new Date;if(r.setHours(0,0,0,0),i<r)return{class:"overdue",badge:"Overdue"};const s=new Date;return s.setDate(r.getDate()+2),i<=s?{class:"urgent",badge:"Due Soon"}:{class:"active",badge:"Pending"}})(e),n=o===e.id;return(0,Hw.jsxs)("div",{className:`task-item ${t.class} ${n?"expanded":""}`,children:[(0,Hw.jsxs)("div",{className:"task-header",onClick:()=>(e=>{if(l((t=>t===e?null:e)),o!==e){const t=h.find((t=>t.id===e));u((n=>({...n,[e]:(null===t||void 0===t?void 0:t.completionNotes)||""})))}})(e.id),children:[(0,Hw.jsxs)("div",{className:"task-title-section",children:[(0,Hw.jsx)("span",{className:`task-badge ${t.class}`,children:t.badge}),(0,Hw.jsx)("h4",{className:"task-title",children:e.title})]}),(0,Hw.jsxs)("div",{className:"task-meta",children:[(0,Hw.jsxs)("span",{className:"task-due-date",children:["Due: ",f(e.dueDate)]}),(0,Hw.jsx)("span",{className:"task-expand-icon",children:n?"\u25bc":"\u25b6"})]})]}),n&&(0,Hw.jsxs)("div",{className:"task-details",children:[(0,Hw.jsx)("p",{className:"task-description",children:e.description||"No description provided."}),(0,Hw.jsxs)("div",{className:"task-type-info",children:[e.type&&(0,Hw.jsxs)("span",{className:"task-type",children:["Type: ",e.type]}),e.targetReps&&(0,Hw.jsxs)("span",{className:"task-reps",children:["Reps: ",e.targetReps]}),e.targetDuration&&(0,Hw.jsxs)("span",{className:"task-duration",children:["Duration: ",e.targetDuration," min"]})]}),!e.completed&&(0,Hw.jsxs)("div",{className:"task-completion-form",children:[(0,Hw.jsx)("textarea",{placeholder:"Add notes about your task completion (optional)...",value:c[e.id]||"",onChange:t=>{return n=e.id,i=t.target.value,void u((e=>({...e,[n]:i})));var n,i},rows:"2"}),(0,Hw.jsxs)("div",{className:"task-actions",children:[(0,Hw.jsx)(nx,{variant:"secondary",onClick:()=>(async e=>{const t=c[e]||"";await a(e,{completionNotes:t,patientNotes:t})})(e.id),className:"save-notes-btn",children:"Save Notes"}),(0,Hw.jsx)(nx,{variant:"success",onClick:()=>(async e=>{const t=c[e]||"";await s(e,{notes:t,completionDate:new Date}),u((t=>({...t,[e]:""}))),l(null)})(e.id),className:"complete-task-btn",children:"Mark as Completed"})]})]}),e.completed&&e.completionNotes&&(0,Hw.jsxs)("div",{className:"task-completion-info",children:[(0,Hw.jsxs)("p",{children:[(0,Hw.jsx)("strong",{children:"Your Notes:"})," ",e.completionNotes]}),e.completedAt&&(0,Hw.jsx)("p",{children:(0,Hw.jsxs)("small",{children:["Completed on: ",f(e.completedAt)]})})]}),e.completed&&!e.completionNotes&&e.completedAt&&(0,Hw.jsx)("div",{className:"task-completion-info",children:(0,Hw.jsx)("p",{children:(0,Hw.jsxs)("small",{children:["Completed on: ",f(e.completedAt)]})})})]})]},e.id)}))})]}):(0,Hw.jsx)("div",{className:"task-error",children:"Please log in to see your tasks."})};const rI=function(){const{user:e}=Gw(),[t,n]=(0,r.useState)(!1),[i,s]=(0,r.useState)([]),[a,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(!1),[u,h]=(0,r.useState)(null),d=(0,r.useCallback)((async()=>{if(o(!0),e&&!l)try{const t=await Qw(e.uid);s(t)}catch(t){console.error("Error loading activities:",t),s([])}else s(l?cx:[]);o(!1)}),[e,l]);(0,r.useEffect)((()=>{d()}),[d]);const f=(()=>{if(0===i.length&&!l)return{steps:"N/A",symmetry:"N/A",distance:"N/A",duration:"N/A"};const e=l||0===i.length?cx:i,t=new Date;t.setHours(0,0,0,0);const n=e.filter((e=>{var n;const i=null!==(n=e.timestamp)&&void 0!==n&&n.toDate?e.timestamp.toDate():new Date(e.date||e.timestamp);return i.setHours(0,0,0,0),i.getTime()===t.getTime()})),r=n.reduce(((e,t)=>e+(t.steps||0)),0),s=n.reduce(((e,t)=>e+(t.duration||0)),0);let a=0;const o=n.filter((e=>"number"===typeof e.symmetry));o.length>0&&(a=o.reduce(((e,t)=>e+t.symmetry),0)/o.length);const c=n.reduce(((e,t)=>{const n=parseFloat(t.distance);return e+(isNaN(n)?0:n)}),0);return{steps:r.toLocaleString(),symmetry:a>0?`${Math.round(a)}%`:"N/A",distance:`${c.toFixed(1)}km`,duration:`${s}min`}})();return(0,Hw.jsxs)("div",{className:"patient-home",children:[(0,Hw.jsxs)("div",{className:"page-header",children:[(0,Hw.jsx)("h2",{children:"Patient Dashboard"}),(0,Hw.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,Hw.jsx)(nx,{variant:"primary",onClick:()=>{h(null),n(!0)},className:"log-activity-btn",children:"Log Activity"}),(0,Hw.jsx)(nx,{variant:l?"secondary":"primary",onClick:()=>c((e=>!e)),children:l?"Show My Data":"Show Demo Data"})]})]}),(0,Hw.jsxs)("div",{className:"stats-cards",children:[(0,Hw.jsxs)(ux,{className:"stat-card",children:[(0,Hw.jsx)("div",{className:"stat-value",children:f.steps}),(0,Hw.jsx)("div",{className:"stat-label",children:"Today's Steps"})]}),(0,Hw.jsxs)(ux,{className:"stat-card",children:[(0,Hw.jsx)("div",{className:"stat-value",children:f.symmetry}),(0,Hw.jsx)("div",{className:"stat-label",children:"Gait Symmetry"})]}),(0,Hw.jsxs)(ux,{className:"stat-card",children:[(0,Hw.jsx)("div",{className:"stat-value",children:f.distance}),(0,Hw.jsx)("div",{className:"stat-label",children:"Distance"})]}),(0,Hw.jsxs)(ux,{className:"stat-card",children:[(0,Hw.jsx)("div",{className:"stat-value",children:f.duration}),(0,Hw.jsx)("div",{className:"stat-label",children:"Exercise Time"})]})]}),(0,Hw.jsx)(JN,{onSessionComplete:e=>{console.log("Step tracker session completed:",e),h({type:"Walking",steps:e.steps,distance:e.distance.toFixed(2),duration:Math.round(e.duration/60),symmetry:e.symmetry,timestamp:new Date(e.startTime)}),n(!0)},userSettings:{height:(null===e||void 0===e?void 0:e.height)||170,gender:(null===e||void 0===e?void 0:e.gender)||"neutral",stepGoal:(null===e||void 0===e?void 0:e.stepGoal)||1e4}}),(0,Hw.jsxs)("div",{className:"dashboard-content",children:[(0,Hw.jsxs)("div",{className:"content-left",children:[(0,Hw.jsx)(ux,{className:"chart-card",children:(0,Hw.jsx)(ON,{activities:i})}),(0,Hw.jsx)(ux,{className:"calendar-card",children:(0,Hw.jsx)(LN,{activities:i})})]}),(0,Hw.jsxs)("div",{className:"content-right",children:[(0,Hw.jsx)(iI,{}),(0,Hw.jsx)(ux,{className:"activities-card",children:(0,Hw.jsx)(FN,{activities:i,loading:a})}),(0,Hw.jsxs)(ux,{className:"achievements-card",children:[(0,Hw.jsx)("h3",{children:"Recent Achievements"}),e&&(0,Hw.jsx)(ZN,{userId:e.uid,limit:3}),(0,Hw.jsx)("div",{className:"view-all-achievements",children:(0,Hw.jsx)(De,{to:"/achievements",className:"view-all-link",children:"View All Achievements"})})]})]})]}),(0,Hw.jsx)(BN,{isOpen:t,onClose:()=>{n(!1),h(null)},onActivityAdded:()=>{n(!1),d(),h(null)},prefilledData:u})]})};const sI=function(e){let{isOpen:t,onClose:n,onPatientAdded:i,therapistId:s}=e;const[a,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(""),[u,h]=(0,r.useState)({displayName:"",email:"",password:"",phone:"",condition:"",notes:""}),d=e=>{const{name:t,value:n}=e.target;h({...u,[t]:n})};return t?(0,Hw.jsx)("div",{className:"add-patient-modal-overlay",children:(0,Hw.jsxs)("div",{className:"add-patient-modal",children:[(0,Hw.jsxs)("div",{className:"add-patient-modal-header",children:[(0,Hw.jsx)("h3",{children:"Add New Patient"}),(0,Hw.jsx)("button",{className:"add-patient-close-button",onClick:n,children:"\xd7"})]}),l&&(0,Hw.jsx)("div",{className:"add-patient-error-message",children:l}),(0,Hw.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),o(!0),c("");try{const e=(await xr(Bw,u.email,u.password)).user;await _r(e,{displayName:u.displayName}),await wy(fv($w,"users",e.uid),{uid:e.uid,displayName:u.displayName,email:u.email,phone:u.phone||"",condition:u.condition||"",notes:u.notes||"",role:"patient",assignedTherapistId:s,createdAt:Iy(),lastActive:Iy()});const t=fv($w,"users",s);await xy(t,{patients:Dy(e.uid)}),i&&i()}catch(l){console.error("Error adding patient:",l),c(l.message||"Failed to add patient")}finally{o(!1)}},children:[(0,Hw.jsxs)("div",{className:"add-patient-form-group",children:[(0,Hw.jsx)("label",{htmlFor:"displayName",children:"Full Name"}),(0,Hw.jsx)("input",{type:"text",id:"displayName",name:"displayName",value:u.displayName,onChange:d,required:!0,placeholder:"Enter patient's full name"})]}),(0,Hw.jsxs)("div",{className:"add-patient-form-row",children:[(0,Hw.jsxs)("div",{className:"add-patient-form-group",children:[(0,Hw.jsx)("label",{htmlFor:"email",children:"Email"}),(0,Hw.jsx)("input",{type:"email",id:"email",name:"email",value:u.email,onChange:d,required:!0,placeholder:"Enter patient's email"})]}),(0,Hw.jsxs)("div",{className:"add-patient-form-group",children:[(0,Hw.jsx)("label",{htmlFor:"password",children:"Temporary Password"}),(0,Hw.jsx)("input",{type:"password",id:"password",name:"password",value:u.password,onChange:d,required:!0,minLength:"6",placeholder:"Minimum 6 characters"})]})]}),(0,Hw.jsxs)("div",{className:"add-patient-form-group",children:[(0,Hw.jsx)("label",{htmlFor:"phone",children:"Phone Number (Optional)"}),(0,Hw.jsx)("input",{type:"tel",id:"phone",name:"phone",value:u.phone,onChange:d,placeholder:"Enter patient's phone number"})]}),(0,Hw.jsxs)("div",{className:"add-patient-form-group",children:[(0,Hw.jsx)("label",{htmlFor:"condition",children:"Medical Condition"}),(0,Hw.jsx)("input",{type:"text",id:"condition",name:"condition",value:u.condition,onChange:d,placeholder:"E.g., Post-stroke rehabilitation"})]}),(0,Hw.jsxs)("div",{className:"add-patient-form-group",children:[(0,Hw.jsx)("label",{htmlFor:"notes",children:"Notes"}),(0,Hw.jsx)("textarea",{id:"notes",name:"notes",rows:"3",value:u.notes,onChange:d,placeholder:"Add any relevant patient notes or instructions here"})]}),(0,Hw.jsxs)("div",{className:"add-patient-button-group",children:[(0,Hw.jsx)(nx,{type:"button",variant:"secondary",onClick:n,className:"add-patient-cancel-button",children:"Cancel"}),(0,Hw.jsx)(nx,{type:"submit",variant:"primary",disabled:a,className:"add-patient-submit-button",children:a?"Adding Patient...":"Add Patient"})]})]})]})}):null};const aI=function(e){let{patients:t=[],onPatientAdded:n}=e;const{user:i}=Gw(),[s,a]=(0,r.useState)(!1),o=ee(),l=()=>{a(!0)};return(0,Hw.jsxs)("div",{className:"patient-list",children:[(0,Hw.jsxs)("div",{className:"patient-list-header",children:[(0,Hw.jsx)("h3",{children:"My Patients"}),(0,Hw.jsx)(nx,{variant:"primary",onClick:l,className:"add-patient-button",children:"Add Patient"})]}),(0,Hw.jsxs)("div",{className:"patient-table",children:[(0,Hw.jsxs)("div",{className:"patient-table-header",children:[(0,Hw.jsx)("span",{children:"Name"}),(0,Hw.jsx)("span",{children:"Progress"}),(0,Hw.jsx)("span",{children:"Last Active"}),(0,Hw.jsx)("span",{children:"Actions"})]}),0===t.length?(0,Hw.jsxs)("div",{className:"no-patients",children:[(0,Hw.jsx)("p",{children:"No patients found. Add your first patient to get started."}),(0,Hw.jsx)(nx,{variant:"primary",onClick:l,className:"add-patient-button",children:"Add Patient"})]}):t.map((e=>{return(0,Hw.jsxs)("div",{className:"patient-row",children:[(0,Hw.jsxs)("div",{className:"patient-name",children:[(0,Hw.jsx)("div",{className:"patient-avatar",children:(t=e.displayName||e.name,t?t.split(" ").map((e=>e[0])).join("").toUpperCase():"?")}),(0,Hw.jsx)("span",{children:e.displayName||e.name}),e.condition&&(0,Hw.jsx)("span",{className:"status-badge",children:e.condition})]}),(0,Hw.jsxs)("div",{className:"patient-progress",children:[(0,Hw.jsx)("div",{className:"progress-bar",children:(0,Hw.jsx)("div",{className:"progress-bar-fill",style:{width:`${e.progressPercent||0}%`}})}),(0,Hw.jsx)("span",{children:e.progress||"-"})]}),(0,Hw.jsx)("div",{className:"patient-last-active",children:e.lastActive||"N/A"}),(0,Hw.jsxs)("div",{className:"patient-actions",children:[(0,Hw.jsx)(nx,{variant:"secondary",className:"view-patient-button",onClick:()=>{return t=e.id,void o(`/patient-details?id=${t}`);var t},children:"View"}),(0,Hw.jsx)(nx,{variant:"ghost",className:"message-patient-button",onClick:()=>{return t=e.id,void o(`/messages?user=${t}`);var t},children:"Message"})]})]},e.id);var t}))]}),(0,Hw.jsx)(sI,{isOpen:s,onClose:()=>{a(!1)},onPatientAdded:()=>{a(!1),n&&n()},therapistId:null===i||void 0===i?void 0:i.uid})]})},oI=[{id:"pat001",displayName:"John Smith",email:"john.smith@example.com",condition:"Post-stroke rehabilitation",progress:"75% complete",progressPercent:75,lastActive:"2 hours ago",phone:"555-123-4567",notes:"Making consistent progress. Focus on right-side mobility.",stats:{symmetry:78,averageSteps:6240,weeklyProgress:12,complianceRate:85},activities:[{id:"act001",type:"Walking",date:"Today, 9:30 AM",duration:30,steps:3500,symmetry:78,notes:"Felt stronger than yesterday"},{id:"act002",type:"Physical Therapy",date:"Yesterday, 2:00 PM",duration:45,symmetry:72,notes:"Worked on stair climbing"}]},{id:"pat002",displayName:"Sarah Johnson",email:"sarah.j@example.com",condition:"Hip replacement",progress:"40% complete",progressPercent:40,lastActive:"Yesterday",phone:"555-987-6543",notes:"Some pain during lateral movements. Needs encouragement with exercises.",stats:{symmetry:65,averageSteps:3100,weeklyProgress:5,complianceRate:70},activities:[{id:"act003",type:"Walking",date:"Yesterday, 10:15 AM",duration:15,steps:1200,symmetry:64,notes:"Still experiencing discomfort"}]},{id:"pat003",displayName:"Michael Brown",email:"michael.b@example.com",condition:"ACL reconstruction",progress:"85% complete",progressPercent:85,lastActive:"3 days ago",phone:"555-345-6789",notes:"Ready to begin sport-specific exercises. Very motivated.",stats:{symmetry:88,averageSteps:8500,weeklyProgress:15,complianceRate:95},activities:[{id:"act004",type:"Exercise Routine",date:"3 days ago, 4:30 PM",duration:60,steps:6e3,symmetry:88,notes:"Completed full routine without pain"}]},{id:"pat004",displayName:"Emma Wilson",email:"emma.w@example.com",condition:"Parkinson's",progress:"30% complete",progressPercent:30,lastActive:"Today",phone:"555-234-5678",notes:"Freezing episodes decreased. Working on balance and coordination.",stats:{symmetry:60,averageSteps:2800,weeklyProgress:3,complianceRate:80},activities:[{id:"act005",type:"Balance Exercise",date:"Today, 11:00 AM",duration:25,symmetry:62,notes:"Better stability today"}]},{id:"pat005",displayName:"Robert Davis",email:"robert.d@example.com",condition:"Multiple sclerosis",progress:"55% complete",progressPercent:55,lastActive:"1 week ago",phone:"555-876-5432",notes:"Needs additional motivation. Complains of fatigue.",stats:{symmetry:71,averageSteps:4200,weeklyProgress:-2,complianceRate:60},activities:[]}],lI=[{id:"ach001",patientName:"John Smith",patientId:"pat001",badgeName:"Consistency Champion",badgeIcon:"\ud83c\udfc6",earnedAt:new Date((new Date).setDate((new Date).getDate()-2)),description:"Completed exercises 7 days in a row"},{id:"ach002",patientName:"Emma Wilson",patientId:"pat004",badgeName:"Symmetry Improver",badgeIcon:"\u2696\ufe0f",earnedAt:new Date((new Date).setDate((new Date).getDate()-3)),description:"Improved gait symmetry by 10% in one week"},{id:"ach003",patientName:"Michael Brown",patientId:"pat003",badgeName:"Distance Master",badgeIcon:"\ud83c\udfc3",earnedAt:new Date((new Date).setDate((new Date).getDate()-5)),description:"Walked 10,000 steps in a single day"},{id:"ach004",patientName:"John Smith",patientId:"pat001",badgeName:"Exercise Expert",badgeIcon:"\ud83d\udcaa",earnedAt:new Date((new Date).setDate((new Date).getDate()-7)),description:"Completed all prescribed exercises for 2 weeks"}],cI=[{id:"todo001",description:"Review John Smith's progress report",dueDate:new Date((new Date).setDate((new Date).getDate()+1)),completed:!1,patientId:"pat001"},{id:"todo002",description:"Adjust Sarah Johnson's exercise plan",dueDate:new Date((new Date).setDate((new Date).getDate())),completed:!1,patientId:"pat002"},{id:"todo003",description:"Call Robert Davis to check in",dueDate:new Date((new Date).setDate((new Date).getDate()-1)),completed:!1,patientId:"pat005"},{id:"todo004",description:"Prepare new balance exercises for Emma",dueDate:new Date((new Date).setDate((new Date).getDate()+2)),completed:!1,patientId:"pat004"},{id:"todo005",description:"Update Michael's treatment plan",dueDate:new Date((new Date).setDate((new Date).getDate()+3)),completed:!1,patientId:"pat003"}];const uI=function(){const{user:e}=Gw(),[t,n]=(0,r.useState)([]),[i,s]=(0,r.useState)([]),[a,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(!0),[u,h]=(0,r.useState)(!1),d=(ee(),async()=>{if(c(!0),u)return n(oI),s(lI),o(cI),void c(!1);if(e)try{const t=await Yw(e.uid);if("therapist"===(null===t||void 0===t?void 0:t.role)){const t=(await Jw(e.uid)).map((e=>{var t;return{...e,lastActive:(null===(t=e.lastActive)||void 0===t?void 0:t.toDate().toLocaleDateString())||"N/A"}}));n(t),s([]),o([])}}catch(t){console.error("Error loading therapist data:",t)}c(!1)});return(0,r.useEffect)((()=>{d()}),[e,u]),(0,Hw.jsxs)("div",{className:"therapist-home",children:[(0,Hw.jsxs)("div",{className:"therapist-header",children:[(0,Hw.jsx)("h2",{children:"Therapist Dashboard"}),(0,Hw.jsx)("button",{className:"toggle-data-button",onClick:()=>h(!u),children:u?"Show Real Data":"Show Demo Data"})]}),(0,Hw.jsxs)("div",{className:"dashboard-summary",children:[(0,Hw.jsxs)(ux,{className:"summary-card",children:[(0,Hw.jsx)("h3",{className:"summary-title",children:"Total Patients"}),(0,Hw.jsx)("div",{className:"summary-value",children:t.length}),(0,Hw.jsx)("div",{className:"summary-trend",children:"+2 this month"})]}),(0,Hw.jsxs)(ux,{className:"summary-card",children:[(0,Hw.jsx)("h3",{className:"summary-title",children:"Avg. Engagement"}),(0,Hw.jsx)("div",{className:"summary-value",children:"78%"}),(0,Hw.jsx)("div",{className:"summary-trend",children:"+5% from last week"})]}),(0,Hw.jsxs)(ux,{className:"summary-card",children:[(0,Hw.jsx)("h3",{className:"summary-title",children:"Upcoming Sessions"}),(0,Hw.jsx)("div",{className:"summary-value",children:"7"}),(0,Hw.jsx)("div",{className:"summary-trend",children:"Next: Today, 3:00 PM"})]}),(0,Hw.jsxs)(ux,{className:"summary-card",children:[(0,Hw.jsx)("h3",{className:"summary-title",children:"Alerts"}),(0,Hw.jsx)("div",{className:"summary-value",children:"3"}),(0,Hw.jsx)("div",{className:"summary-trend urgent",children:"Requires attention"})]})]}),(0,Hw.jsx)("div",{className:"patients-section",children:(0,Hw.jsx)(aI,{patients:t,onPatientAdded:d})}),!l&&(0,Hw.jsxs)("div",{className:"dashboard-grid",children:[(0,Hw.jsx)(ux,{className:"dashboard-card",title:"Recent Achievements",children:i.length>0?(0,Hw.jsx)("ul",{className:"achievements-list",children:i.map((e=>(0,Hw.jsxs)("li",{children:[(0,Hw.jsx)("span",{className:"achievement-patient",children:e.patientName}),(0,Hw.jsx)("span",{className:"achievement-badge",children:e.badgeIcon}),(0,Hw.jsxs)("span",{className:"achievement-text",children:[e.badgeName," - "," ",e.earnedAt instanceof Date?e.earnedAt.toLocaleDateString():(new Date).toLocaleDateString()]})]},e.id)))}):(0,Hw.jsx)("p",{className:"empty-state",children:"No recent achievements found."})}),(0,Hw.jsx)(ux,{className:"dashboard-card",title:"To-Do List",children:a.length>0?(0,Hw.jsx)("ul",{className:"todo-list",children:a.map((e=>(0,Hw.jsxs)("li",{className:"todo-item "+(e.completed?"completed":""),children:[(0,Hw.jsx)("input",{type:"checkbox",id:`todo-${e.id}`,checked:e.completed,onChange:()=>{return t=e.id,void o((e=>e.map((e=>e.id===t?{...e,completed:!e.completed}:e))));var t}}),(0,Hw.jsxs)("label",{htmlFor:`todo-${e.id}`,children:[e.description,(0,Hw.jsx)("span",{className:"todo-date",children:e.dueDate instanceof Date?e.dueDate.toLocaleDateString():(new Date).toLocaleDateString()})]})]},e.id)))}):(0,Hw.jsx)("p",{className:"empty-state",children:"No tasks found."})})]})]})},hI=async()=>{try{console.log("Starting message cleanup...");const i=Ls().currentUser;if(!i)return console.error("No authenticated user found"),{success:!1,error:"Not authenticated. Please log in and try again."};const r=i.uid;console.log(`Running cleanup for user: ${r}`);try{const n=dv($w,"messages");console.log("Querying messages where user is a participant...");const i=Zv(n,ty("senderId","==",r)),s=Zv(n,ty("receiverId","==",r)),a=await by(i),o=await by(s);console.log(`Found ${a.size} messages as sender`),console.log(`Found ${o.size} messages as receiver`);const l=new Set,c=[];if(a.forEach((e=>{l.has(e.id)||(l.add(e.id),c.push(e))})),o.forEach((e=>{l.has(e.id)||(l.add(e.id),c.push(e))})),console.log(`Combined total: ${c.length} messages to delete`),0===c.length)return console.log("No messages to delete."),{success:!0,deletedCount:0,message:"No messages found to delete"};const u=250;let h=0,d=0;for(let r=0;r<c.length;r+=u){d++;const n=Ay($w),i=c.slice(r,r+u);console.log(`Processing batch ${d} with ${i.length} messages...`),i.forEach((e=>{n.delete(fv($w,"messages",e.id))}));try{console.log(`Committing batch ${d}...`),await n.commit(),console.log(`Batch ${d} committed successfully.`),h+=i.length}catch(e){console.error(`Error with batch ${d}:`,e),console.log("Falling back to individual message deletion...");let n=0;for(const r of i)try{await _y(fv($w,"messages",r.id)),n++,console.log(`Deleted message: ${r.id}`)}catch(t){console.error(`Failed to delete message ${r.id}:`,t)}console.log(`Individual fallback: deleted ${n}/${i.length} messages`),h+=n}}return console.log(`Cleanup complete: deleted ${h}/${c.length} messages`),{success:h>0,deletedCount:h,totalMessages:c.length,message:`Deleted ${h} out of ${c.length} messages`}}catch(n){return console.error("Error with batched operations:",n),console.log("Permission error, trying alternative approach..."),await async function(e){try{if(console.log("Using manual cleanup as fallback..."),!e){const t=Ls().currentUser;if(!t)return{success:!1,error:"Not authenticated"};e=t.uid}const r=dv($w,"messages");let s=[],a=[];try{const t=Zv(r,ty("senderId","==",e));s=(await by(t)).docs,console.log(`Fallback found ${s.length} messages as sender`)}catch(n){console.error("Error querying sender messages:",n)}try{const t=Zv(r,ty("receiverId","==",e));a=(await by(t)).docs,console.log(`Fallback found ${a.length} messages as receiver`)}catch(i){console.error("Error querying receiver messages:",i)}const o=new Set,l=[];if(s.forEach((e=>{o.has(e.id)||(o.add(e.id),l.push(e))})),a.forEach((e=>{o.has(e.id)||(o.add(e.id),l.push(e))})),console.log(`Fallback found ${l.length} total messages to delete`),0===l.length)return{success:!0,deletedCount:0,message:"No messages found in fallback"};let c=0,u=0;for(const e of l)try{await _y(fv($w,"messages",e.id)),c++,console.log(`Deleted message (fallback): ${e.id}`)}catch(t){u++,console.error(`Error deleting message ${e.id}:`,t)}return console.log(`Fallback cleanup: ${c} succeeded, ${u} failed`),{success:c>0,deletedCount:c,failedCount:u,message:`Fallback deleted ${c} messages, ${u} failed`}}catch(r){return console.error("Error in fallback cleanup:",r),{success:!1,error:`Fallback failed: ${r.message}`}}}(r)}}catch(i){return console.error("Unexpected error in cleanup messages:",i),{success:!1,error:`Unexpected error: ${i.message}`}}};const dI=function(){const{user:e}=Gw(),[t,n]=(0,r.useState)([]),[i,s]=(0,r.useState)(""),[a,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(""),[u,h]=(0,r.useState)([]),[d]=Pe(),f=ee(),p=(0,r.useRef)(null),[g,m]=(0,r.useState)([]),v=d.get("user");(0,r.useEffect)((()=>{console.log("Current user ID:",null===e||void 0===e?void 0:e.uid),console.log("Partner ID from URL:",v)}),[e,v]);const y=()=>{var e;null===(e=p.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,r.useEffect)((()=>{if(!e)return;(async()=>{try{const t=await Yw(e.uid);if("therapist"===(null===t||void 0===t?void 0:t.role)){const t=await Jw(e.uid);console.log("Fetched patients for therapist:",t),h(t)}else if(null!==t&&void 0!==t&&t.assignedTherapistId){const e=await Yw(t.assignedTherapistId);e&&(console.log("Fetched therapist for patient:",e),h([e]))}}catch(t){console.error("Error fetching partners:",t)}})(),(async()=>{try{const t=Zv(dv($w,"conversations"),ty("participants","array-contains",e.uid)),n=(await by(t)).docs.map((e=>({id:e.id,...e.data()})));console.log("Fetched conversations:",n),m(n)}catch(t){console.error("Error fetching conversations:",t)}})()}),[e]),(0,r.useEffect)((()=>{if(!e||!v)return void o(!1);o(!0);(async()=>{try{console.log("Fetching data for partner ID:",v);const e=await Yw(v);e?(console.log("Partner data:",e),c(e.displayName||"Unknown User")):(console.error("Partner data not found"),c("Unknown User"))}catch(e){console.error("Error fetching partner data:",e),c("Unknown User")}})();const i=[e.uid,v].sort().join("_");console.log("Conversation ID:",i);(async()=>{try{const t=fv($w,"conversations",i),n=await vy(t);if(n.exists()){const i=n.data();if(i.unreadCount&&i.unreadCount[e.uid]>0){const n={...i.unreadCount};n[e.uid]=0,await wy(t,{unreadCount:n},{merge:!0}),console.log("Reset unread count for current user")}}}catch(t){console.error("Error updating unread count:",t)}})();const r=t=>{const r=t.docs.map((e=>({id:e.id,...e.data()})));console.log(`Directly fetched ${r.length} messages for conversation:`,i),r.sort(((e,t)=>{const n=e=>{var t;return null!==(t=e.timestamp)&&void 0!==t&&t.seconds?1e3*e.timestamp.seconds:e.clientTimestamp?new Date(e.clientTimestamp).getTime():0};return n(e)-n(t)})),r.forEach(((t,n)=>{console.log(`Message ${n+1}: ${t.content} (${t.senderId===e.uid?"sent":"received"})`)})),n(r),setTimeout(y,100),o(!1)};let s;(async()=>{try{const o=dv($w,"messages");console.log("Attempting to fetch messages for conversation:",i);try{const t=fv($w,"conversations",i),n=await vy(t);n.exists()?console.log("Conversation document exists:",n.data()):(console.log("Creating new conversation document"),await wy(t,{participants:[e.uid,v],lastMessage:"",timestamp:Iy(),participantNames:{[e.uid]:e.displayName||"",[v]:l||"Partner"},unreadCount:{[e.uid]:0,[v]:0}}),console.log("Conversation document created successfully"))}catch(s){console.error("Error with conversation document:",s)}try{const e=Zv(o,ty("conversationId","==",i),ry("timestamp","asc"));console.log("Executing direct query for messages with orderBy...");const s=await by(e);if(console.log("Query result with orderBy:",s.size,"messages"),s.empty){console.log("No messages found with orderBy query");const e=Zv(o,ty("conversationId","==",i),(av("limit",t=1),sy._create("limit",t,"F"))),s=await by(e);console.log("Simple query result:",s.size,"messages"),s.empty?(console.log("No messages exist for this conversation"),n([])):(console.warn("Messages exist but orderBy query returned empty - index might not be available yet"),r(s))}else r(s)}catch(a){console.warn("Error with orderBy query:",a.message),console.log("Trying query without orderBy...");const e=Zv(o,ty("conversationId","==",i));console.log("Executing fallback query without orderBy...");const t=await by(e);console.log("Fallback query result:",t.size,"messages"),t.empty?(console.log("No messages found with fallback query"),n([])):r(t)}}catch(c){console.error("Error in direct messages query:",c),console.error("Error code:",c.code),console.error("Error message:",c.message),n([]),o(!1)}var t})(),console.log("Setting up messages listener for conversation:",i);try{const e=Zv(dv($w,"messages"),ty("conversationId","==",i),ry("timestamp","asc"));s=Sy(e,a,(e=>{console.error("Error in messages listener with orderBy:",e);try{const e=Zv(dv($w,"messages"),ty("conversationId","==",i));s&&s(),s=Sy(e,a,(e=>{console.error("Error in fallback messages listener:",e)}))}catch(t){console.error("Error setting up fallback listener:",t)}}))}catch(u){console.error("Error setting up messages listener:",u);try{const e=Zv(dv($w,"messages"),ty("conversationId","==",i));s=Sy(e,a,(e=>{console.error("Error in fallback messages listener:",e)}))}catch(h){console.error("Error setting up fallback listener:",h)}}function a(e){const r=e.docs.map((e=>({id:e.id,...e.data()})));console.log(`Real-time update: ${r.length} messages for conversation ${i}`),r.sort(((e,t)=>{const n=e=>{var t;return null!==(t=e.timestamp)&&void 0!==t&&t.seconds?1e3*e.timestamp.seconds:e.clientTimestamp?new Date(e.clientTimestamp).getTime():0};return n(e)-n(t)})),n(r),r.length>t.length&&setTimeout(y,100)}return()=>{console.log("Cleaning up message listener"),s&&s()}}),[e,v]),(0,r.useEffect)((()=>{y()}),[t]);const b=e=>{f(`/messages?user=${e}`)},w=e=>{if(!e)return new Date;try{return e.toDate&&"function"===typeof e.toDate?e.toDate():e.seconds?new Date(1e3*e.seconds):"string"===typeof e?new Date(e):e instanceof Date?e:(console.warn("Unexpected timestamp format:",e),new Date)}catch(t){return console.error("Error parsing timestamp:",t,e),new Date}},x=(()=>{const e={};return t.forEach((t=>{if(!t.timestamp&&!t.clientTimestamp)return void console.log("Message missing timestamp:",t);const n=t.timestamp||t.clientTimestamp,i=w(n).toLocaleDateString();e[i]||(e[i]=[]),e[i].push(t)})),e})(),_=e=>e?e.charAt(0).toUpperCase():"?",k=e=>{if(!e)return"";const t=w(e);return t?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""},S=e=>{if(!e)return"";let t;t=e.toDate&&"function"===typeof e.toDate?e.toDate():e.seconds?new Date(1e3*e.seconds):new Date(e);const n=new Date,i=Math.floor((n-t)/864e5);return 0===i?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):i<7?t.toLocaleDateString(void 0,{weekday:"short"}):t.toLocaleDateString()},E=async()=>{if(e&&v)try{const i=[e.uid,v].sort().join("_");console.log("Creating test message in conversation:",i);const r={senderId:e.uid,receiverId:v,content:`Test message at ${(new Date).toLocaleTimeString()}`,conversationId:i,timestamp:Iy(),clientTimestamp:(new Date).toISOString()};console.log("Test message data:",JSON.stringify(r));try{const t=fv($w,"conversations",i);(await vy(t)).exists()||(console.log("Creating new conversation document"),await wy(t,{participants:[e.uid,v],lastMessage:"",timestamp:Iy(),participantNames:{[e.uid]:e.displayName||"",[v]:l||"Partner"},unreadCount:{[e.uid]:0,[v]:0}}),console.log("Conversation document created successfully"))}catch(t){console.error("Error creating conversation:",t)}const s=await ky(dv($w,"messages"),r);console.log("Test message added with ID:",s.id);const a=fv($w,"conversations",i);await wy(a,{participants:[e.uid,v],lastMessage:r.content,timestamp:Iy(),participantNames:{[e.uid]:e.displayName||"",[v]:l||"Partner"},unreadCount:{[e.uid]:0,[v]:1}},{merge:!0}),console.log("Test conversation updated");try{setTimeout((async()=>{console.log("Verifying message was saved...");const e=fv($w,"messages",s.id),t=await vy(e);t.exists()?console.log("Message verification: Message exists!",t.data()):console.error("Message verification: Message NOT found!")}),1e3)}catch(n){console.error("Error verifying message:",n)}}catch(i){console.error("Error creating test message:",i),console.error("Error code:",i.code),console.error("Error message:",i.message),alert(`Failed to create test message. Error: ${i.message}\n      \nIt may take a few minutes for Firestore security rules to update. Try again in a few minutes.`)}};return v?(0,Hw.jsxs)("div",{className:"messages-container",children:[(0,Hw.jsxs)("div",{className:"messages-header",children:[(0,Hw.jsx)("div",{className:"partner-avatar",children:_(l)}),(0,Hw.jsx)("h2",{children:l}),(0,Hw.jsxs)("div",{style:{marginLeft:"auto",display:"flex",gap:"10px"},children:[(0,Hw.jsx)(nx,{size:"small",variant:"primary",onClick:E,children:"Send Test"}),(0,Hw.jsx)(nx,{size:"small",variant:"secondary",onClick:()=>f("/messages"),children:"Change Contact"})]})]}),(0,Hw.jsxs)("div",{className:"messages-debug",style:{marginBottom:"10px",fontSize:"12px",color:"#666"},children:[(0,Hw.jsxs)("p",{children:["Conversation ID: ",e&&v?[e.uid,v].sort().join("_"):"N/A"]}),(0,Hw.jsxs)("p",{children:["Messages loaded: ",t.length]}),(0,Hw.jsx)("button",{className:"debug-button",onClick:async()=>{if(e&&v)try{const t=[e.uid,v].sort().join("_");console.log("Debug: checking messages for conversation",t);const n=Zv(dv($w,"messages"),ty("conversationId","==",t)),i=await by(n);console.log(`Debug: found ${i.size} messages`),i.forEach((e=>{console.log("Message:",e.id,e.data())}))}catch(t){console.error("Debug: Error checking messages:",t)}},children:"Debug Check"}),(0,Hw.jsx)("button",{className:"debug-button",onClick:E,children:"Create Direct Test"}),(0,Hw.jsx)("button",{className:"debug-button",onClick:async()=>{if(e&&v&&window.confirm(`This will delete all messages in this conversation with ${l}. Continue?`))try{const t=[e.uid,v].sort().join("_");console.log(`Cleaning up conversation: ${t}`),o(!0);const i=await(async e=>{if(!e)return console.error("No conversation ID provided"),{success:!1,error:"No conversation ID provided"};try{console.log(`Cleaning up messages for conversation: ${e}`);try{const t=Zv(dv($w,"messages"),ty("conversationId","==",e));console.log("Executing filtered query for messages...");const n=await by(t);if(console.log(`Found ${n.size} messages for conversation`),n.empty)return{success:!0,deletedCount:0,message:"No messages found for this conversation"};const i=Ay($w);return n.forEach((e=>{i.delete(fv($w,"messages",e.id))})),console.log("Committing batch delete for conversation..."),await i.commit(),console.log("Batch committed successfully"),{success:!0,deletedCount:n.size,conversationId:e,message:`Deleted ${n.size} messages from conversation`}}catch(t){console.error("Error with batch deletion:",t),console.log("Trying individual message deletion...");const r=dv($w,"messages");let s;try{const t=Zv(r,ty("conversationId","==",e));s=await by(t)}catch(n){console.error("Filter query failed:",n),s=await by(r)}let a=0,o=0;for(const n of s.docs){const t=n.data();if(t.conversationId&&t.conversationId===e)try{await _y(fv($w,"messages",n.id)),a++,console.log(`Deleted message: ${n.id}`)}catch(i){o++,console.error(`Failed to delete message ${n.id}:`,i)}}return console.log(`Individual deletes: ${a} succeeded, ${o} failed`),{success:a>0,deletedCount:a,errorCount:o,conversationId:e,message:`Deleted ${a} messages, ${o} failed`}}}catch(r){return console.error("Error cleaning up conversation messages:",r),{success:!1,error:r.message}}})(t);if(o(!1),console.log("Conversation cleanup result:",i),i&&(i.success||i.deletedCount>0))alert(`Cleanup successful! Deleted ${i.deletedCount} messages from this conversation.`),n([]);else{const e=(null===i||void 0===i?void 0:i.error)||"Unknown error";alert(`Cleanup failed: ${e}\n\nCheck the browser console for more details.`),console.error("Detailed conversation cleanup failure:",i)}}catch(t){o(!1),console.error("Error during conversation cleanup:",t),alert(`Cleanup error: ${t.message}\n\nCheck the browser console for more details.`)}},style:{backgroundColor:"#ffcccc"},children:"Clear This Chat"}),(0,Hw.jsx)("button",{className:"debug-button",onClick:async()=>{if(window.confirm("This will delete all messages while keeping conversations. Continue?"))try{console.log("Starting message cleanup..."),o(!0);const e=await hI();if(o(!1),console.log("Cleanup result:",e),e&&e.success)alert(`Cleanup successful! Deleted ${e.deletedCount} messages.`),window.location.reload();else{const t=(null===e||void 0===e?void 0:e.error)||"Unknown error";alert(`Cleanup failed: ${t}\n\nCheck the browser console for more details.`),console.error("Detailed cleanup failure:",e)}}catch(e){o(!1),console.error("Error during cleanup:",e),alert(`Cleanup error: ${e.message}\n\nCheck the browser console for more details.`)}},style:{backgroundColor:"#ffaaaa"},children:"Clear All Messages"})]}),(0,Hw.jsxs)("div",{className:"messages-list",children:[a?(0,Hw.jsx)("p",{className:"loading-messages",children:"Loading messages..."}):0===t.length?(0,Hw.jsx)("div",{className:"no-messages",children:(0,Hw.jsx)("p",{children:"No messages yet. Start a conversation!"})}):Object.entries(x).map((t=>{let[n,i]=t;return(0,Hw.jsxs)(r.Fragment,{children:[(0,Hw.jsxs)("div",{className:"messages-date-divider",children:[(0,Hw.jsx)("div",{className:"divider-line"}),(0,Hw.jsx)("span",{className:"divider-text",children:n}),(0,Hw.jsx)("div",{className:"divider-line"})]}),i.map((t=>(0,Hw.jsxs)("div",{className:"message-item "+(t.senderId===e.uid?"sent":"received"),children:[(0,Hw.jsx)("div",{className:"message-content",children:t.content||"[Empty message]"}),(0,Hw.jsxs)("span",{className:"message-time",children:[k(t.timestamp||t.clientTimestamp),t.id&&(0,Hw.jsxs)("span",{className:"message-id",children:["ID: ",t.id.substr(-4)]})]})]},t.id)))]},n)})),(0,Hw.jsx)("div",{ref:p})]}),(0,Hw.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),i.trim()&&e&&v){console.log("Sending message:"),console.log("- From:",e.uid),console.log("- To:",v),console.log("- Content:",i);try{const t=[e.uid,v].sort().join("_"),r={senderId:e.uid,receiverId:v,content:i,conversationId:t,timestamp:Iy(),clientTimestamp:(new Date).toISOString()};console.log("Message data:",JSON.stringify(r));try{const n=fv($w,"conversations",t);(await vy(n)).exists()||(console.log("Creating new conversation document"),await wy(n,{participants:[e.uid,v],lastMessage:"",timestamp:Iy(),participantNames:{[e.uid]:e.displayName||"",[v]:l||"Partner"},unreadCount:{[e.uid]:0,[v]:0}}),console.log("Conversation document created successfully"))}catch(n){console.error("Error with conversation document:",n)}const a=await ky(dv($w,"messages"),r);console.log("Message added with ID:",a.id);const o=fv($w,"conversations",t),c=await vy(o),u=c.exists()&&c.data().unreadCount?{...c.data().unreadCount}:{};u[e.uid]=0,u[v]=(u[v]||0)+1;let h={};c.exists()&&c.data().participantNames&&(h={...c.data().participantNames}),h[e.uid]||(h[e.uid]=e.displayName||""),!h[v]&&l&&(h[v]=l),await wy(o,{participants:[e.uid,v],lastMessage:i,timestamp:Iy(),participantNames:h,unreadCount:u},{merge:!0}),console.log("Conversation updated successfully"),s("")}catch(r){console.error("Error sending message:",r),console.error("Error code:",r.code),console.error("Error message:",r.message),alert(`Failed to send message. Please try again. Error: ${r.message}\n      \nIt may take a few minutes for Firestore security rules to update. If this is your first message, try again in a few minutes.`)}}},className:"message-form",children:[(0,Hw.jsx)("input",{className:"message-input",type:"text",placeholder:"Type your message...",value:i,onChange:e=>s(e.target.value)}),(0,Hw.jsx)("button",{type:"submit",className:"send-button",disabled:!i.trim(),children:"\u2192"})]})]}):(0,Hw.jsxs)("div",{className:"messages-container",children:[(0,Hw.jsx)("h2",{children:"Messages"}),g.length>0&&(0,Hw.jsxs)(ux,{className:"recent-conversations",children:[(0,Hw.jsx)("h3",{children:"Recent Conversations"}),(0,Hw.jsx)("ul",{className:"conversations-list",children:g.map((t=>{var n,i;const r=(t=>t&&t.participants&&t.participants.find((t=>t!==(null===e||void 0===e?void 0:e.uid)))||null)(t);if(!r)return null;const s=(null===(n=t.participantNames)||void 0===n?void 0:n[r])||"Unknown",a=(null===(i=t.unreadCount)||void 0===i?void 0:i[e.uid])||0;return(0,Hw.jsxs)("li",{className:"conversation-item "+(a>0?"unread":""),onClick:()=>b(r),children:[(0,Hw.jsx)("div",{className:"partner-avatar",children:_(s)}),(0,Hw.jsxs)("div",{className:"conversation-info",children:[(0,Hw.jsx)("span",{className:"partner-name",children:s}),(0,Hw.jsx)("span",{className:"last-message",children:t.lastMessage||"No message"})]}),(0,Hw.jsxs)("div",{className:"conversation-meta",children:[(0,Hw.jsx)("span",{className:"last-time",children:S(t.timestamp)}),a>0&&(0,Hw.jsx)("div",{className:"unread-badge",children:a})]})]},t.id)}))})]}),u.length>0?(0,Hw.jsxs)(ux,{children:[(0,Hw.jsx)("h3",{children:"Contacts"}),(0,Hw.jsx)("ul",{className:"partners-list",children:u.map((e=>(0,Hw.jsxs)("li",{onClick:()=>b(e.id),children:[(0,Hw.jsx)("div",{className:"partner-avatar",children:_(e.displayName)}),(0,Hw.jsxs)("div",{className:"partner-info",children:[(0,Hw.jsx)("span",{className:"partner-name",children:e.displayName}),(0,Hw.jsx)("span",{className:"partner-role",children:e.role})]}),(0,Hw.jsx)(nx,{size:"small",children:"Message"})]},e.id)))})]}):(0,Hw.jsx)(ux,{children:(0,Hw.jsx)("p",{className:"no-partners-message",children:a?"Loading contacts...":"No contacts found. Please contact your administrator if you need to message someone."})})]})};const fI=function(){const e=Bw.currentUser,[t,n]=(0,r.useState)((null===e||void 0===e?void 0:e.displayName)||""),[i,s]=(0,r.useState)((null===e||void 0===e?void 0:e.email)||""),[a,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(!1),[u,h]=(0,r.useState)("");return(0,Hw.jsxs)("div",{className:"settings-container",children:[(0,Hw.jsx)("h2",{children:"Settings"}),u&&(0,Hw.jsx)("div",{className:"settings-message",children:u}),(0,Hw.jsxs)("form",{onSubmit:async n=>{n.preventDefault(),c(!0),h("");try{t!==e.displayName&&await _r(e,{displayName:t}),i!==e.email&&await function(e,t){return kr(lt(e),t,null)}(e,i),a&&await function(e,t){return kr(lt(e),null,t)}(e,a),h("Profile updated successfully!")}catch(r){console.error("Error updating profile:",r),h("Failed to update profile. Please try again.")}finally{c(!1)}},className:"settings-form",children:[(0,Hw.jsxs)("div",{className:"form-group",children:[(0,Hw.jsx)("label",{htmlFor:"displayName",children:"Name"}),(0,Hw.jsx)("input",{type:"text",id:"displayName",value:t,onChange:e=>n(e.target.value),required:!0})]}),(0,Hw.jsxs)("div",{className:"form-group",children:[(0,Hw.jsx)("label",{htmlFor:"email",children:"Email"}),(0,Hw.jsx)("input",{type:"email",id:"email",value:i,onChange:e=>s(e.target.value),required:!0})]}),(0,Hw.jsxs)("div",{className:"form-group",children:[(0,Hw.jsx)("label",{htmlFor:"password",children:"New Password"}),(0,Hw.jsx)("input",{type:"password",id:"password",value:a,onChange:e=>o(e.target.value),placeholder:"Leave blank to keep current password"})]}),(0,Hw.jsx)("button",{type:"submit",className:"settings-button",disabled:l,children:l?"Updating...":"Update Profile"})]})]})};const pI=function(){const{user:e}=Gw(),[t,n]=(0,r.useState)([]),[i,s]=(0,r.useState)(!0),[a,o]=(0,r.useState)("all"),[l,c]=(0,r.useState)(!1),u="6,313",h="80%",d="4.5km",f="117min";(0,r.useEffect)((()=>{(async()=>{if(s(!0),e&&!l)try{const t=await Qw(e.uid);n(t)}catch(t){n([])}else l&&n(cx);s(!1)})()}),[e,l]);const p=(0,r.useMemo)((()=>"all"===a?t:t.filter((e=>e.type===a))),[t,a]),g=(0,r.useMemo)((()=>{const e=new Set(t.map((e=>e.type)));return["all",...Array.from(e)]}),[t]);return(0,Hw.jsxs)("div",{className:"progress-container",children:[(0,Hw.jsx)("h2",{children:"Progress Overview"}),(0,Hw.jsx)("div",{className:"demo-toggle-container",children:(0,Hw.jsx)(nx,{variant:l?"secondary":"primary",onClick:()=>c((e=>!e)),children:l?"Show My Data":"Show Demo Data"})}),(0,Hw.jsxs)("div",{className:"stats-cards",children:[(0,Hw.jsxs)(ux,{className:"stat-card",children:[(0,Hw.jsx)("div",{className:"stat-value",children:u}),(0,Hw.jsx)("div",{className:"stat-label",children:"Today's Steps"}),(0,Hw.jsx)("div",{className:"stat-trend positive",children:"+12% from yesterday"})]}),(0,Hw.jsxs)(ux,{className:"stat-card",children:[(0,Hw.jsx)("div",{className:"stat-value",children:h}),(0,Hw.jsx)("div",{className:"stat-label",children:"Gait Symmetry"}),(0,Hw.jsx)("div",{className:"stat-trend positive",children:"+3% from last week"})]}),(0,Hw.jsxs)(ux,{className:"stat-card",children:[(0,Hw.jsx)("div",{className:"stat-value",children:d}),(0,Hw.jsx)("div",{className:"stat-label",children:"Distance"}),(0,Hw.jsx)("div",{className:"stat-trend neutral",children:"Same as average"})]}),(0,Hw.jsxs)(ux,{className:"stat-card",children:[(0,Hw.jsx)("div",{className:"stat-value",children:f}),(0,Hw.jsx)("div",{className:"stat-label",children:"Exercise Time"}),(0,Hw.jsx)("div",{className:"stat-trend negative",children:"-10min from goal"})]})]}),(0,Hw.jsx)(ux,{className:"filter-card",children:(0,Hw.jsxs)("div",{className:"filter-controls",children:[(0,Hw.jsx)("label",{htmlFor:"activityTypeFilter",children:"Filter by Activity Type:"}),(0,Hw.jsx)("select",{id:"activityTypeFilter",value:a,onChange:e=>o(e.target.value),children:g.map((e=>(0,Hw.jsx)("option",{value:e,children:"all"===e?"All Activities":e},e)))})]})}),(0,Hw.jsxs)("div",{className:"dashboard-layout",children:[(0,Hw.jsxs)("div",{className:"dashboard-main",children:[(0,Hw.jsx)("div",{className:"progress-section chart-card",children:(0,Hw.jsx)(ON,{activities:p})}),(0,Hw.jsx)("div",{className:"progress-section chart-card",children:(0,Hw.jsx)(LN,{activities:t})})]}),(0,Hw.jsx)("div",{className:"dashboard-sidebar",children:(0,Hw.jsxs)(ux,{className:"progress-section activity-log",children:[(0,Hw.jsx)("h3",{children:"Activity Log"}),(0,Hw.jsx)(FN,{activities:p,loading:i})]})})]})]})};const gI=function(){const{user:e}=Gw(),t=ee(),[n,i]=(0,r.useState)(""),[s,a]=(0,r.useState)([]),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)([]),[h,d]=(0,r.useState)(null),[f,p]=(0,r.useState)(!0);(0,r.useEffect)((()=>{if(!e)return void p(!1);(async()=>{try{const t=fv($w,"users",e.uid),n=await vy(t);if(n.exists()){const t=n.data();if(d(t),"therapist"===t.role){const t=Zv(dv($w,"users"),ty("assignedTherapistId","==",e.uid)),n=await by(t),i=[];n.forEach((e=>{i.push({id:e.id,...e.data()})})),u(i)}else if(t.assignedTherapistId){const e=await vy(fv($w,"users",t.assignedTherapistId));e.exists()&&u([{id:e.id,...e.data()}])}}p(!1)}catch(t){console.error("Error fetching user data:",t),p(!1)}})()}),[e]);const g=e=>{t(`/messages?user=${e}`)};return(0,Hw.jsxs)("div",{className:"contacts-container",children:[(0,Hw.jsx)("h1",{children:"Contacts"}),f?(0,Hw.jsx)("p",{children:"Loading your contacts..."}):e?(0,Hw.jsxs)(Hw.Fragment,{children:[(0,Hw.jsxs)(ux,{className:"user-info-card",children:[(0,Hw.jsx)("h3",{children:"Your Profile"}),(0,Hw.jsxs)("p",{children:[(0,Hw.jsx)("strong",{children:"Name:"})," ",(null===h||void 0===h?void 0:h.displayName)||e.displayName||"N/A"]}),(0,Hw.jsxs)("p",{children:[(0,Hw.jsx)("strong",{children:"Role:"})," ",(null===h||void 0===h?void 0:h.role)||"N/A"]}),"patient"===(null===h||void 0===h?void 0:h.role)&&(0,Hw.jsxs)("p",{children:[(0,Hw.jsx)("strong",{children:"Therapist:"})," ",c.length>0?c[0].displayName:"No therapist assigned"]})]}),(0,Hw.jsxs)(ux,{className:"contacts-list-card",children:[(0,Hw.jsx)("h3",{children:"Your Contacts"}),0===c.length?(0,Hw.jsx)("p",{children:"You don't have any contacts yet. Search below to connect with users."}):(0,Hw.jsx)("ul",{className:"contacts-list",children:c.map((e=>{var t;return(0,Hw.jsxs)("li",{className:"contact-item",children:[(0,Hw.jsxs)("div",{className:"contact-info",children:[(0,Hw.jsx)("div",{className:"contact-avatar",children:(null===(t=e.displayName)||void 0===t?void 0:t.charAt(0).toUpperCase())||"?"}),(0,Hw.jsxs)("div",{children:[(0,Hw.jsx)("h4",{children:e.displayName}),(0,Hw.jsxs)("p",{children:["Role: ",e.role]})]})]}),(0,Hw.jsx)(nx,{variant:"primary",size:"small",onClick:()=>g(e.id),children:"Message"})]},e.id)}))})]}),(0,Hw.jsxs)(ux,{className:"search-card",children:[(0,Hw.jsx)("h3",{children:"Find Users"}),(0,Hw.jsxs)("div",{className:"search-input-container",children:[(0,Hw.jsx)("input",{type:"text",value:n,onChange:e=>i(e.target.value),placeholder:"Search by name or email",className:"search-input"}),(0,Hw.jsx)(nx,{variant:"primary",onClick:async()=>{if(n.trim()&&e){l(!0),a([]);try{const t=Zv(dv($w,"users"),ty("displayName",">=",n),ty("displayName","<=",n+"\uf8ff")),i=n.includes("@")?Zv(dv($w,"users"),ty("email","==",n.toLowerCase())):null,r=await by(t),s=[];if(r.forEach((t=>{t.id!==e.uid&&s.push({id:t.id,...t.data()})})),i){(await by(i)).forEach((t=>{t.id===e.uid||s.some((e=>e.id===t.id))||s.push({id:t.id,...t.data()})}))}a(s)}catch(t){console.error("Error searching for users:",t)}finally{l(!1)}}},disabled:o||!n.trim(),children:o?"Searching...":"Search"})]}),s.length>0&&(0,Hw.jsxs)("div",{className:"search-results",children:[(0,Hw.jsx)("h4",{children:"Search Results"}),(0,Hw.jsx)("ul",{className:"results-list",children:s.map((t=>{var n,i;return(0,Hw.jsxs)("li",{className:"result-item",children:[(0,Hw.jsxs)("div",{className:"result-info",children:[(0,Hw.jsx)("div",{className:"result-avatar",children:(null===(n=t.displayName)||void 0===n?void 0:n.charAt(0).toUpperCase())||"?"}),(0,Hw.jsxs)("div",{children:[(0,Hw.jsx)("h4",{children:t.displayName}),(0,Hw.jsxs)("p",{children:["Role: ",t.role]})]})]}),(i=t.id,c&&0!==c.length&&c.some((e=>e.id===i))?(0,Hw.jsx)(nx,{variant:"secondary",size:"small",onClick:()=>g(t.id),children:"Message"}):(0,Hw.jsx)(nx,{variant:"primary",size:"small",onClick:()=>(async t=>{if(e&&h&&t)try{const n="therapist"===h.role,i="patient"===t.role,r="therapist"===t.role;if(n&&i){await xy(fv($w,"users",t.id),{assignedTherapistId:e.uid});const n=[e.uid,t.id].sort().join("_"),i=fv($w,"conversations",n);(await vy(i)).exists()||await wy(i,{participants:[e.uid,t.id],lastMessage:"",timestamp:new Date,participantNames:{[e.uid]:e.displayName||h.displayName||"",[t.id]:t.displayName||""},unreadCount:{[e.uid]:0,[t.id]:0}}),alert(`You are now connected to patient: ${t.displayName}`),window.location.reload()}else if(!n&&r){await xy(fv($w,"users",e.uid),{assignedTherapistId:t.id});const n=[e.uid,t.id].sort().join("_"),i=fv($w,"conversations",n);(await vy(i)).exists()||await wy(i,{participants:[e.uid,t.id],lastMessage:"",timestamp:new Date,participantNames:{[e.uid]:e.displayName||h.displayName||"",[t.id]:t.displayName||""},unreadCount:{[e.uid]:0,[t.id]:0}}),alert(`You are now connected to therapist: ${t.displayName}`),window.location.reload()}else alert("Connections are currently only supported between therapists and patients.")}catch(n){console.error("Error connecting with user:",n),alert(`Failed to connect: ${n.message}`)}})(t),children:"Connect"}))]},t.id)}))})]}),n&&0===s.length&&!o&&(0,Hw.jsx)("p",{children:"No users found matching your search."})]})]}):(0,Hw.jsx)("p",{children:"Please log in to view and manage your contacts."})]})},mI=e=>{let{isOpen:t,onClose:n,patientId:i,patientName:s}=e;const{user:a}=Gw(),{addTask:o}=nI(),[l,c]=(0,r.useState)(!1),[u,h]=(0,r.useState)(""),[d,f]=(0,r.useState)({title:"",description:"",type:"Exercise",dueDate:new Date(Date.now()+6048e5).toISOString().split("T")[0],targetReps:"",targetDuration:"",difficulty:"medium",pointsReward:10});(0,r.useEffect)((()=>{t&&(f({title:"",description:"",type:"Exercise",dueDate:new Date(Date.now()+6048e5).toISOString().split("T")[0],targetReps:"",targetDuration:"",difficulty:"medium",pointsReward:10}),h(""))}),[t,i]);const p=e=>{const{name:t,value:n}=e.target;f((e=>({...e,[t]:n})))};return t?(0,Hw.jsx)("div",{className:"modal-overlay",children:(0,Hw.jsxs)("div",{className:"task-assign-modal",children:[(0,Hw.jsxs)("div",{className:"modal-header",children:[(0,Hw.jsxs)("h3",{children:["Assign Task to ",s||"Patient"]}),(0,Hw.jsx)("button",{className:"close-button",onClick:n,children:"\xd7"})]}),u&&(0,Hw.jsx)("div",{className:"error-message",children:u}),(0,Hw.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),i&&a){c(!0),h("");try{const e={...d,patientId:i,patientName:s,therapistId:a.uid,therapistName:a.displayName||"Therapist",status:"pending",assignedAt:new Date};await o(e),n()}catch(t){console.error("Error assigning task:",t),h("Failed to assign task. Please try again.")}finally{c(!1)}}else h("Patient or therapist information is missing.")},children:[(0,Hw.jsxs)("div",{className:"form-group",children:[(0,Hw.jsx)("label",{htmlFor:"title",children:"Task Title"}),(0,Hw.jsx)("input",{type:"text",id:"title",name:"title",value:d.title,onChange:p,required:!0})]}),(0,Hw.jsxs)("div",{className:"form-group",children:[(0,Hw.jsx)("label",{htmlFor:"description",children:"Description"}),(0,Hw.jsx)("textarea",{id:"description",name:"description",value:d.description,onChange:p,rows:"3"})]}),(0,Hw.jsxs)("div",{className:"form-row",children:[(0,Hw.jsxs)("div",{className:"form-group",children:[(0,Hw.jsx)("label",{htmlFor:"type",children:"Task Type"}),(0,Hw.jsxs)("select",{id:"type",name:"type",value:d.type,onChange:p,children:[(0,Hw.jsx)("option",{value:"Exercise",children:"Exercise"}),(0,Hw.jsx)("option",{value:"Walking",children:"Walking"}),(0,Hw.jsx)("option",{value:"Balance",children:"Balance Training"}),(0,Hw.jsx)("option",{value:"Education",children:"Educational Material"}),(0,Hw.jsx)("option",{value:"Survey",children:"Survey/Feedback"}),(0,Hw.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,Hw.jsxs)("div",{className:"form-group",children:[(0,Hw.jsx)("label",{htmlFor:"dueDate",children:"Due Date"}),(0,Hw.jsx)("input",{type:"date",id:"dueDate",name:"dueDate",value:d.dueDate,onChange:p,required:!0})]})]}),(0,Hw.jsxs)("div",{className:"form-row",children:[(0,Hw.jsxs)("div",{className:"form-group",children:[(0,Hw.jsx)("label",{htmlFor:"targetReps",children:"Target Reps (if applicable)"}),(0,Hw.jsx)("input",{type:"number",id:"targetReps",name:"targetReps",value:d.targetReps,onChange:p,placeholder:"e.g., 10"})]}),(0,Hw.jsxs)("div",{className:"form-group",children:[(0,Hw.jsx)("label",{htmlFor:"targetDuration",children:"Target Duration (minutes, if applicable)"}),(0,Hw.jsx)("input",{type:"number",id:"targetDuration",name:"targetDuration",value:d.targetDuration,onChange:p,placeholder:"e.g., 30"})]})]}),(0,Hw.jsxs)("div",{className:"form-row",children:[(0,Hw.jsxs)("div",{className:"form-group",children:[(0,Hw.jsx)("label",{htmlFor:"difficulty",children:"Difficulty"}),(0,Hw.jsxs)("select",{id:"difficulty",name:"difficulty",value:d.difficulty,onChange:p,children:[(0,Hw.jsx)("option",{value:"easy",children:"Easy"}),(0,Hw.jsx)("option",{value:"medium",children:"Medium"}),(0,Hw.jsx)("option",{value:"hard",children:"Hard"})]})]}),(0,Hw.jsxs)("div",{className:"form-group",children:[(0,Hw.jsx)("label",{htmlFor:"pointsReward",children:"Points Reward"}),(0,Hw.jsx)("input",{type:"number",id:"pointsReward",name:"pointsReward",value:d.pointsReward,onChange:p})]})]}),(0,Hw.jsxs)("div",{className:"modal-footer",children:[(0,Hw.jsx)(nx,{type:"button",variant:"secondary",onClick:n,disabled:l,children:"Cancel"}),(0,Hw.jsx)(nx,{type:"submit",variant:"primary",disabled:l,children:l?"Assigning...":"Assign Task"})]})]})]})}):null};const vI=function(){const[e]=Pe(),t=e.get("id"),n=ee(),{user:i}=Gw(),{tasks:s}=nI(),[a,o]=(0,r.useState)(null),[l,c]=(0,r.useState)([]),[u,h]=(0,r.useState)(!0),[d,f]=(0,r.useState)(!1),[p,g]=(0,r.useState)("overview"),[m,v]=(0,r.useState)(!1),y=(0,r.useMemo)((()=>s.filter((e=>e.patientId===t))),[s,t]),[b,w]=(0,r.useState)("week"),[x,_]=(0,r.useState)((()=>{const e=new Date;return e.setDate(e.getDate()-7),e.toISOString().split("T")[0]})),[k,S]=(0,r.useState)((()=>(new Date).toISOString().split("T")[0])),[E,T]=(0,r.useState)("all");if((0,r.useEffect)((()=>{(async()=>{if(h(!0),d){const e=oI.find((e=>e.id===t));return o(e||oI[0]),c((null===e||void 0===e?void 0:e.activities)||[]),void h(!1)}if(!t)return h(!1),void n("/therapist");try{const e=fv($w,"users",t),i=await vy(e);if(i.exists()){const e={id:i.id,...i.data()};o(e);const n=await Qw(t);c(n)}else console.error("Patient not found"),n("/therapist")}catch(e){console.error("Error fetching patient details:",e)}h(!1)})()}),[t,d,n]),(0,r.useMemo)((()=>{let e=l;if("all"!==b){const t=new Date(x),n=new Date(k);n.setHours(23,59,59,999),e=l.filter((e=>{var i;const r=null!==(i=e.timestamp)&&void 0!==i&&i.toDate?e.timestamp.toDate():new Date(e.date||e.timestamp);return r>=t&&r<=n}))}return"all"===E?e:e.filter((e=>e.type===E))}),[l,b,x,k,E]),(0,r.useMemo)((()=>{const e=new Set(l.map((e=>e.type)));return["all",...Array.from(e)]}),[l]),u)return(0,Hw.jsx)("div",{className:"loading-state",children:"Loading patient details..."});if(!a)return(0,Hw.jsxs)("div",{className:"error-state",children:[(0,Hw.jsx)("h2",{children:"Patient Not Found"}),(0,Hw.jsx)("p",{children:"The patient you are looking for does not exist or could not be loaded."}),(0,Hw.jsx)(nx,{onClick:()=>n("/therapist"),children:"Back to Patient List"})]});const C=a.stats||{symmetry:"N/A",averageSteps:"N/A",weeklyProgress:"N/A",complianceRate:"N/A"},N=a.treatmentPlan||{goals:[],notes:a.notes||"No specific treatment notes."};return(0,Hw.jsxs)("div",{className:"patient-details-container",children:[(0,Hw.jsxs)("div",{className:"patient-details-header",children:[(0,Hw.jsxs)("div",{className:"header-left",children:[(0,Hw.jsx)(nx,{onClick:()=>n(-1),variant:"secondary",className:"back-button",children:"\u2190 Back"}),(0,Hw.jsx)("h2",{children:a.displayName||a.name}),a.condition&&(0,Hw.jsx)("span",{className:"condition-badge",children:a.condition})]}),(0,Hw.jsxs)("div",{className:"header-right",children:[(0,Hw.jsx)(nx,{onClick:()=>f(!d),className:"toggle-button",children:d?"Show Real Data":"Show Demo Data"}),(0,Hw.jsx)(nx,{variant:"primary",onClick:()=>v(!0),className:"assign-task-button",children:"Assign Task"}),(0,Hw.jsx)(nx,{onClick:()=>{n(`/messages?user=${t}`)},className:"message-button",children:"Message Patient"})]})]}),(0,Hw.jsx)("div",{className:"patient-details-tabs",children:(0,Hw.jsxs)("div",{className:"tabs",children:[(0,Hw.jsx)("button",{className:"tab "+("overview"===p?"active":""),onClick:()=>g("overview"),children:"Overview"}),(0,Hw.jsx)("button",{className:"tab "+("activities"===p?"active":""),onClick:()=>g("activities"),children:"Activities"}),(0,Hw.jsx)("button",{className:"tab "+("charts"===p?"active":""),onClick:()=>g("charts"),children:"Progress Charts"}),(0,Hw.jsx)("button",{className:"tab "+("tasks"===p?"active":""),onClick:()=>g("tasks"),children:"Assigned Tasks"})]})}),"overview"===p&&(0,Hw.jsxs)("div",{className:"patient-details-grid",children:[(0,Hw.jsxs)("aside",{className:"details-sidebar",children:[(0,Hw.jsxs)(ux,{title:"Patient Information",className:"patient-info-card",children:[(0,Hw.jsxs)("div",{className:"patient-info-item",children:[(0,Hw.jsx)("span",{className:"label",children:"Email:"}),(0,Hw.jsx)("span",{className:"value",children:a.email})]}),(0,Hw.jsxs)("div",{className:"patient-info-item",children:[(0,Hw.jsx)("span",{className:"label",children:"Phone:"}),(0,Hw.jsx)("span",{className:"value",children:a.phone||"N/A"})]}),(0,Hw.jsxs)("div",{className:"patient-info-item",children:[(0,Hw.jsx)("span",{className:"label",children:"Joined:"}),(0,Hw.jsx)("span",{className:"value",children:a.createdAt?(e=>{if(!e)return"N/A";return(e.toDate?e.toDate():new Date(e)).toLocaleString()})(a.createdAt):"N/A"})]}),(0,Hw.jsxs)("div",{className:"patient-notes",children:[(0,Hw.jsx)("h4",{children:"Therapist Notes:"}),(0,Hw.jsx)("p",{children:a.notes||"No notes provided."})]})]}),(0,Hw.jsx)(ux,{title:"Key Stats",className:"patient-stats-card",children:(0,Hw.jsxs)("div",{className:"stats-grid",children:[(0,Hw.jsxs)("div",{className:"stat-item",children:[(0,Hw.jsxs)("span",{className:"stat-value",children:[C.symmetry,"%"]}),(0,Hw.jsx)("span",{className:"stat-label",children:"Avg. Symmetry"})]}),(0,Hw.jsxs)("div",{className:"stat-item",children:[(0,Hw.jsx)("span",{className:"stat-value",children:C.averageSteps}),(0,Hw.jsx)("span",{className:"stat-label",children:"Avg. Daily Steps"})]}),(0,Hw.jsxs)("div",{className:"stat-item",children:[(0,Hw.jsxs)("span",{className:"stat-value",children:[C.weeklyProgress,"%"]}),(0,Hw.jsx)("span",{className:"stat-label",children:"Weekly Progress"})]}),(0,Hw.jsxs)("div",{className:"stat-item",children:[(0,Hw.jsxs)("span",{className:"stat-value",children:[C.complianceRate,"%"]}),(0,Hw.jsx)("span",{className:"stat-label",children:"Compliance Rate"})]})]})})]}),(0,Hw.jsxs)("main",{className:"details-main",children:[(0,Hw.jsxs)(ux,{title:"Treatment Plan & Notes",className:"treatment-card",children:[(0,Hw.jsx)("p",{children:N.notes}),N.goals&&N.goals.length>0&&(0,Hw.jsxs)(Hw.Fragment,{children:[(0,Hw.jsx)("h4",{children:"Goals:"}),(0,Hw.jsx)("ul",{children:N.goals.map(((e,t)=>(0,Hw.jsx)("li",{children:e},t)))})]})]}),(0,Hw.jsx)(ux,{title:"Recent Activity Summary",children:(0,Hw.jsx)("p",{children:"Display a summary of the latest activities or trends here."})})]})]}),"activities"===p&&(0,Hw.jsx)(ux,{title:"Activity Log",className:"full-width-card",children:(0,Hw.jsx)(FN,{activities:l,loading:u})}),"charts"===p&&(0,Hw.jsxs)("div",{className:"charts-container",children:[(0,Hw.jsx)(ux,{title:"Progress Charts",className:"chart-card",children:(0,Hw.jsx)(ON,{activities:l})}),(0,Hw.jsx)(ux,{title:"Activity Heatmap",className:"calendar-card",children:(0,Hw.jsx)(LN,{activities:l})})]}),"tasks"===p&&(0,Hw.jsx)(ux,{title:"Assigned Tasks",className:"full-width-card",children:y.length>0?(0,Hw.jsx)("div",{className:"therapist-task-list",children:y.map((e=>{var t,n;return(0,Hw.jsxs)("div",{className:"task-item "+(e.completed?"completed":e.dueDate<new Date?"overdue":""),children:[(0,Hw.jsxs)("div",{className:"task-header",children:[(0,Hw.jsxs)("div",{className:"task-title-section",children:[(0,Hw.jsx)("span",{className:"task-badge "+(e.completed?"completed":new Date(e.dueDate)<new Date?"overdue":"active"),children:e.completed?"Completed":new Date(e.dueDate)<new Date?"Overdue":"Active"}),(0,Hw.jsx)("h4",{className:"task-title",children:e.title})]}),(0,Hw.jsx)("div",{className:"task-meta",children:(0,Hw.jsxs)("span",{className:"task-due-date",children:["Due: ",null!==(t=e.dueDate)&&void 0!==t&&t.toDate?e.dueDate.toDate().toLocaleDateString():new Date(e.dueDate).toLocaleDateString()]})})]}),(0,Hw.jsxs)("div",{className:"task-details",children:[(0,Hw.jsx)("p",{className:"task-description",children:e.description||"No description provided."}),(0,Hw.jsxs)("div",{className:"task-type-info",children:[e.type&&(0,Hw.jsxs)("span",{className:"task-type",children:["Type: ",e.type]}),e.targetReps&&(0,Hw.jsxs)("span",{className:"task-reps",children:["Reps: ",e.targetReps]}),e.targetDuration&&(0,Hw.jsxs)("span",{className:"task-duration",children:["Duration: ",e.targetDuration," min"]})]}),e.completed&&e.completionNotes&&(0,Hw.jsxs)("div",{className:"task-completion-info",children:[(0,Hw.jsxs)("p",{children:[(0,Hw.jsx)("strong",{children:"Patient Notes:"})," ",e.completionNotes]}),(0,Hw.jsx)("p",{children:(0,Hw.jsxs)("small",{children:["Completed on: ",null!==(n=e.completedAt)&&void 0!==n&&n.toDate?e.completedAt.toDate().toLocaleDateString():new Date(e.completedAt).toLocaleDateString()]})})]})]})]},e.id)}))}):(0,Hw.jsxs)("div",{className:"empty-tasks-message",children:[(0,Hw.jsx)("p",{children:"No tasks have been assigned to this patient yet."}),(0,Hw.jsx)(nx,{variant:"primary",onClick:()=>v(!0),children:"Assign First Task"})]})}),(0,Hw.jsx)(mI,{isOpen:m,onClose:()=>v(!1),patientId:t,patientName:a.displayName||a.name})]})},yI=e=>{let{userId:t,limit:n}=e;const[i,s]=(0,r.useState)([]),[a,o]=(0,r.useState)(!0);(0,r.useEffect)((()=>{(async()=>{if(t){o(!0);try{const e=await Xw(t);s(e)}catch(e){console.error("Error loading achievements:",e)}finally{o(!1)}}})()}),[t]);const l=n?i.slice(0,n):i;return a?(0,Hw.jsx)("div",{className:"achievements-loading",children:(0,Hw.jsx)("p",{children:"Loading achievements..."})}):0===i.length?(0,Hw.jsx)(ux,{className:"no-achievements-card",children:(0,Hw.jsxs)("div",{className:"no-achievements",children:[(0,Hw.jsx)("span",{className:"no-achievements-icon",children:"\ud83c\udfc5"}),(0,Hw.jsx)("h3",{children:"No Achievements Yet"}),(0,Hw.jsx)("p",{children:"Complete activities to earn badges and achievements!"})]})}):(0,Hw.jsx)("div",{className:"achievements-list",children:l.map((e=>{var t,n;return(0,Hw.jsxs)(ux,{className:"achievement-card",children:[(0,Hw.jsx)("div",{className:"achievement-icon",children:e.badgeIcon}),(0,Hw.jsxs)("div",{className:"achievement-details",children:[(0,Hw.jsx)("h3",{className:"achievement-name",children:e.badgeName}),(0,Hw.jsx)("p",{className:"achievement-description",children:(null===(t=Object.values(UN).find((t=>t.badgeName===e.badgeName)))||void 0===t?void 0:t.description)||"Achievement unlocked!"}),(0,Hw.jsx)("p",{className:"achievement-date",children:null!==(n=e.earnedAt)&&void 0!==n&&n.toDate?`Earned on ${e.earnedAt.toDate().toLocaleDateString()}`:"Recently earned"})]})]},e.id)}))})};const bI=function(){const{user:e}=Gw(),[t,n]=(0,r.useState)([]),[i,s]=(0,r.useState)(!0),[a,o]=(0,r.useState)({total:0,earned:0,percentage:0});(0,r.useEffect)((()=>{(async()=>{if(e){s(!0);try{const t=await Xw(e.uid);n(t);const i=Object.keys(UN).length,r=t.length,s=Math.round(r/i*100);o({total:i,earned:r,percentage:s})}catch(t){console.error("Error loading achievements:",t)}finally{s(!1)}}})()}),[e]);const l={earned:t,locked:Object.values(UN).filter((e=>!t.some((t=>t.badgeName===e.badgeName))))};return(0,Hw.jsxs)("div",{className:"achievements-page",children:[(0,Hw.jsx)("h2",{children:"Your Achievements"}),(0,Hw.jsx)("div",{className:"achievements-stats-container",children:(0,Hw.jsxs)(ux,{className:"achievements-stats-card",children:[(0,Hw.jsxs)("div",{className:"achievements-stats",children:[(0,Hw.jsxs)("div",{className:"stat-item",children:[(0,Hw.jsx)("div",{className:"stat-value",children:a.earned}),(0,Hw.jsx)("div",{className:"stat-label",children:"Earned"})]}),(0,Hw.jsxs)("div",{className:"stat-item",children:[(0,Hw.jsx)("div",{className:"stat-value",children:a.total-a.earned}),(0,Hw.jsx)("div",{className:"stat-label",children:"Locked"})]}),(0,Hw.jsxs)("div",{className:"stat-item",children:[(0,Hw.jsxs)("div",{className:"stat-value",children:[a.percentage,"%"]}),(0,Hw.jsx)("div",{className:"stat-label",children:"Complete"})]})]}),(0,Hw.jsx)("div",{className:"achievements-progress",children:(0,Hw.jsx)("div",{className:"progress-bar",children:(0,Hw.jsx)("div",{className:"progress-fill",style:{width:`${a.percentage}%`}})})})]})}),i?(0,Hw.jsx)("div",{className:"loading-container",children:(0,Hw.jsx)("p",{children:"Loading achievements..."})}):(0,Hw.jsxs)(Hw.Fragment,{children:[(0,Hw.jsxs)("div",{className:"achievements-section",children:[(0,Hw.jsx)("h3",{children:"Earned Achievements"}),l.earned.length>0?(0,Hw.jsx)(yI,{userId:null===e||void 0===e?void 0:e.uid}):(0,Hw.jsx)(ux,{className:"no-achievements-card",children:(0,Hw.jsxs)("div",{className:"no-achievements",children:[(0,Hw.jsx)("span",{className:"no-achievements-icon",children:"\ud83c\udfc5"}),(0,Hw.jsx)("h3",{children:"No Achievements Yet"}),(0,Hw.jsx)("p",{children:"Complete activities to earn badges and achievements!"})]})})]}),(0,Hw.jsxs)("div",{className:"achievements-section",children:[(0,Hw.jsx)("h3",{children:"Locked Achievements"}),(0,Hw.jsx)("div",{className:"locked-achievements-list",children:l.locked.map((e=>(0,Hw.jsxs)(ux,{className:"locked-achievement-card",children:[(0,Hw.jsx)("div",{className:"locked-achievement-icon",children:"?"}),(0,Hw.jsxs)("div",{className:"locked-achievement-details",children:[(0,Hw.jsx)("h3",{className:"locked-achievement-name",children:e.badgeName}),(0,Hw.jsx)("p",{className:"locked-achievement-description",children:e.description})]})]},e.badgeName)))})]})]})]})};function wI(){const{user:e,loading:t}=Gw(),n=ee(),[i,s]=(0,r.useState)(!0),[a,o]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{if(console.log("DashboardRedirect - Component mounted/updated"),console.log("Auth loading:",t),console.log("User:",null===e||void 0===e?void 0:e.uid),a)return void console.log("Already attempted redirect, skipping");if(t)return void console.log("Auth still loading, waiting...");a||(async()=>{if(!e)return console.log("No user, redirecting to login"),void n("/login",{replace:!0});try{console.log("Fetching user document for role check");const t=fv($w,"users",e.uid),i=await vy(t);if(i.exists()){const e=i.data();console.log("Dashboard redirect - user role:",e.role),o(!0),"therapist"===e.role?(console.log("Redirecting to therapist dashboard"),n("/therapist",{replace:!0})):(console.log("Redirecting to patient dashboard"),n("/patient",{replace:!0}))}else console.error("User document doesn't exist!"),o(!0),n("/login",{replace:!0})}catch(t){console.error("Error in dashboard redirect:",t),o(!0),n("/login",{replace:!0})}finally{s(!1)}})()}),[e,t,n,a]),(0,Hw.jsx)("div",{children:"Redirecting to your dashboard..."})}function xI(e){let{element:t,requiredRole:n}=e;const{user:i,loading:s}=Gw(),[a,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(!0),u=ee();return(0,r.useEffect)((()=>{if(s)return;(async()=>{if(i)try{const e=fv($w,"users",i.uid),t=await vy(e);if(t.exists()){const e=t.data();if(console.log(`RoleBasedRoute (${n}) - user role:`,e.role),o(e),e.role!==n)return void u("therapist"===e.role?"/therapist":"/patient",{replace:!0})}else console.error("User document doesn't exist! Logging out."),await Bw.signOut(),u("/login",{replace:!0})}catch(e){console.error("Error in role validation:",e),u("/login",{replace:!0})}finally{c(!1)}else u("/login",{replace:!0})})()}),[i,s,n,u]),s||l?(0,Hw.jsx)("div",{children:"Verifying access..."}):a&&a.role===n?t:null}function _I(){const[e,t]=(0,r.useState)(!1),{user:n,loading:i}=Gw(),[s,a]=(0,r.useState)(null),o=ee();(0,r.useEffect)((()=>{!i&&n?Yw(n.uid).then((e=>a(e))):i||n||a(null)}),[n,i]);null===s||void 0===s||s.role;return i?(0,Hw.jsx)("div",{children:"Loading Application..."}):(0,Hw.jsxs)(Hw.Fragment,{children:[" ",(0,Hw.jsxs)("header",{children:[(0,Hw.jsx)("div",{className:"logo",children:"Gait Rehab"}),(0,Hw.jsxs)("nav",{children:[(0,Hw.jsxs)("div",{className:"hamburger",onClick:()=>t(!e),children:[(0,Hw.jsx)("div",{}),(0,Hw.jsx)("div",{}),(0,Hw.jsx)("div",{})]}),(0,Hw.jsxs)("ul",{className:e?"open":"",children:[(0,Hw.jsx)("li",{children:(0,Hw.jsx)(De,{to:"/",onClick:()=>t(!1),children:"Home"})}),n?(0,Hw.jsxs)(Hw.Fragment,{children:[(0,Hw.jsx)("li",{children:(0,Hw.jsx)(De,{to:"therapist"===(null===s||void 0===s?void 0:s.role)?"/therapist":"/patient",onClick:()=>t(!1),children:"Dashboard"})}),"therapist"===(null===s||void 0===s?void 0:s.role)&&(0,Hw.jsx)("li",{children:(0,Hw.jsx)(De,{to:"/progress",onClick:()=>t(!1),children:"Progress"})}),(0,Hw.jsx)("li",{children:(0,Hw.jsx)(De,{to:"/messages",onClick:()=>t(!1),children:"Messages"})}),(0,Hw.jsx)("li",{children:(0,Hw.jsx)(De,{to:"/contacts",onClick:()=>t(!1),children:"Contacts"})}),(0,Hw.jsx)("li",{children:(0,Hw.jsx)(De,{to:"/settings",onClick:()=>t(!1),children:"Settings"})}),(0,Hw.jsx)("li",{children:(0,Hw.jsx)(De,{to:"/achievements",onClick:()=>t(!1),children:"Achievements"})}),(0,Hw.jsx)("li",{children:(0,Hw.jsx)("button",{onClick:async()=>{try{await Bw.signOut(),o("/")}catch(e){console.error("Error signing out:",e),window.location.href="/"}},className:"signout-btn",children:"Sign Out"})})]}):(0,Hw.jsxs)(Hw.Fragment,{children:[(0,Hw.jsx)("li",{children:(0,Hw.jsx)(De,{to:"/login",onClick:()=>t(!1),children:"Login"})}),(0,Hw.jsx)("li",{children:(0,Hw.jsx)(De,{to:"/register",onClick:()=>t(!1),children:"Register"})})]})]})]})]}),(0,Hw.jsx)("main",{children:(0,Hw.jsxs)(ye,{children:[(0,Hw.jsx)(me,{path:"/",element:(0,Hw.jsx)(tx,{})}),(0,Hw.jsx)(me,{path:"/login",element:n?(0,Hw.jsx)(ge,{to:"/dashboard"}):(0,Hw.jsx)(ix,{})}),(0,Hw.jsx)(me,{path:"/register",element:n?(0,Hw.jsx)(ge,{to:"/dashboard"}):(0,Hw.jsx)(rx,{})}),(0,Hw.jsx)(me,{path:"/dashboard",element:i?(0,Hw.jsx)("div",{children:"Loading authentication..."}):n?(0,Hw.jsx)(wI,{}):(0,Hw.jsx)(ge,{to:"/login"})}),(0,Hw.jsx)(me,{path:"/patient",element:(0,Hw.jsx)(xI,{element:(0,Hw.jsx)(rI,{}),requiredRole:"patient"})}),(0,Hw.jsx)(me,{path:"/therapist",element:(0,Hw.jsx)(xI,{element:(0,Hw.jsx)(uI,{}),requiredRole:"therapist"})}),(0,Hw.jsx)(me,{path:"/progress",element:(0,Hw.jsx)(xI,{element:(0,Hw.jsx)(pI,{}),requiredRole:"therapist"})}),(0,Hw.jsx)(me,{path:"/patient-details",element:n?(0,Hw.jsx)(vI,{}):(0,Hw.jsx)(ge,{to:"/login"})}),(0,Hw.jsx)(me,{path:"/messages",element:n?(0,Hw.jsx)(dI,{}):(0,Hw.jsx)(ge,{to:"/login"})}),(0,Hw.jsx)(me,{path:"/contacts",element:n?(0,Hw.jsx)(gI,{}):(0,Hw.jsx)(ge,{to:"/login"})}),(0,Hw.jsx)(me,{path:"/settings",element:n?(0,Hw.jsx)(fI,{}):(0,Hw.jsx)(ge,{to:"/login"})}),(0,Hw.jsx)(me,{path:"/achievements",element:n?(0,Hw.jsx)(bI,{}):(0,Hw.jsx)(ge,{to:"/login"})}),(0,Hw.jsx)(me,{path:"*",element:(0,Hw.jsx)("div",{children:"404 - Page Not Found"})})]})})]})}const kI=function(){return(0,Hw.jsxs)(Kw,{children:[" ",(0,Hw.jsxs)(Ce,{children:[" ",(0,Hw.jsx)(_I,{})]})]})};a.createRoot(document.getElementById("root")).render((0,Hw.jsx)(r.StrictMode,{children:(0,Hw.jsx)(Kw,{children:(0,Hw.jsx)(tI,{children:(0,Hw.jsx)(kI,{})})})}))})();
//# sourceMappingURL=main.29c835c4.js.map